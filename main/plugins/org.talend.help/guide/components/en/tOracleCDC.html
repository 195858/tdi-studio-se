<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tOracleCDC</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tdi-components-rg-en..html" title="Talend Components"><link rel="up" href="ch-databases-traditional.html" title="Chapter&nbsp;7.&nbsp;Databases - traditional components"><link rel="prev" href="tOracleBulkExec.html" title="tOracleBulkExec"><link rel="next" href="tOracleClose.html" title="tOracleClose"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tOracleCDC</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tOracleBulkExec.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;7.&nbsp;Databases - traditional components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tOracleClose.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tOracleCDC"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tOracleCDC"></a>tOracleCDC</h2></div></div></div><div class="mediaobject"><img src="../images/tOracleCDC.png"></div><div class="section" title="tOracleCDC properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e164812"></a>tOracleCDC properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Component family</strong></span>
							</p>
						</td><td valign="top">
							<p>Databases/Oracle</p>
						</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Function</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p><span class="emphasis"><strong>tOracleCDC </strong></span>extracts source system
								data that has changed since the last extraction and transports it to
								another/other system(s). </p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Purpose</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p><span class="emphasis"><strong>tOracleCDC</strong></span> addresses data
								extraction and transportation needs. <span class="emphasis"><strong>tOracleCDC</strong></span> only extracts the changes done to the
								source operational data and makes them available to the target
								system(s) using database CDC views. </p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Basic settings</strong></span>
							</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Property type</em></span>
							</p>
						</td><td valign="top">
							<p>Either <span class="emphasis"><strong>Built-in</strong></span> or <span class="emphasis"><strong>Repository</strong></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Built-in</strong></span>: No property data stored
								centrally.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Repository</strong></span>: Select the repository
								file in which the properties are stored. The fields that follow are
								completed automatically using the data retrieved.</p>
							<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>Reset the DB type by clicking the relevant button to
										select the CDC connection.</em></span>
								</p></div>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Use an existing connection</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box and in the <span class="emphasis"><strong>Component List</strong></span> click the
		relevant connection component to reuse the connection details you already defined.</p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>When a Job contains the parent Job and the child Job, if you need to share an existing
			connection between the two levels, for example, to share the connection created by the
			parent Job with the child Job, you have to: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>In the parent level, register the DB connection to be shared in the
							<span class="emphasis"><strong>Basic settings</strong></span> view of the connection
						component which creates that very DB connection.</p></li><li class="listitem"><p>In the child level, use a dedicated connection component to read that
						registered DB connection.</p></li></ol></div><p>For an example about how to share a DB connection across Job levels,see
					<span class="emphasis"><em>Talend Data Integration Studio
				User Guide</em></span>.</p></div>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Connection type</em></span>
							</p>
						</td><td valign="top">
							<p>Drop-down list of available drivers.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>DB Version</em></span>
							</p>
						</td><td valign="top">
							<p>Select the Oracle version in use</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Host</em></span>
							</p>
						</td><td valign="top">
							<p>Database server IP address.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Port</em></span>
							</p>
						</td><td valign="top">
							<p>DB server listening port number.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Database</em></span>
							</p>
						</td><td valign="top">
							<p>Name of the database.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Oracle schema</em></span>
							</p>
						</td><td valign="top">
							<p>Name of the oracle schema.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Username</em></span> and
								<span class="emphasis"><em>Password</em></span></p>
						</td><td valign="top">
							<p>DB user authentication data.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Schema using CDC</em></span> and <span class="emphasis"><em>Edit
									Schema</em></span></p>
						</td><td valign="top">
							<p>A schema is a row description, i.e., it defines the number of
								fields to be processed and passed on to the next component. The
								schema is either <span class="emphasis"><strong>Built-in</strong></span> or stored
								remotely in the <span class="emphasis"><strong>Repository</strong></span>. </p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Built-in</strong></span>: The schema is created
								and stored locally for this component only. Related topic: see
									<span class="emphasis"><em>Talend Data Integration Studio</em></span>
								<span class="emphasis"><strong>User Guide</strong></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Repository</strong></span>: The schema already
								exists and is stored in the Repository, hence can be reused. Related
								topic: see <span class="emphasis"><em>Talend Data Integration Studio</em></span>
								<span class="emphasis"><strong>User Guide</strong></span>.</p>
							<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>Reset the DB type by clicking the relevant button to
										select the schema of the CDC connection.</em></span>
								</p></div>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Table using CDC</em></span>
							</p>
						</td><td valign="top">
							<p>Select the source table from which changes made to data are to be
								captured. </p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>CDC Log Mode</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box if you want to use Oracle <span class="emphasis"><strong>Redo log</strong></span> to capture the changes done on
								data.</p>
							<p> For more information on <span class="emphasis"><strong>Redo log
									mode</strong></span>, see <span class="emphasis"><em>Talend Data Integration Studio</em></span>
								<span class="emphasis"><strong>User Guide</strong></span>. </p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Subscriber</em></span>
							</p>
						</td><td valign="top">
							<p>Enter the name of the application that will use the change table
								if you use the <span class="emphasis"><strong>Trigger</strong></span> mode to
								capture changes done on data.</p>
							<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>The <span class="emphasis"><strong>Subscriber</strong></span> field is not available if you use
										the <span class="emphasis"><strong>Redo log</strong></span> mode because
										this mode allows access to the changed data for only one
										subscriber. </em></span></p></div>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Events to catch</em></span>
							</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Insert</strong></span>: Select this check box to
								catch the data inserted in the change table since the last
								extraction.</p>
							<p>
								<span class="emphasis"><strong>Update</strong></span>: Select this check box to
								catch the data updated in the change table since the last
								extraction.</p>
							<p>
								<span class="emphasis"><strong>Delete</strong></span>: Select this check box to
								catch the data deleted in the change table since the last
								extraction.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Limit</em></span>
							</p>
						</td><td valign="top">
							<p>Maximum number of consumed rows a subscriber can recover from the
								change table, per execution.</p>
							<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>The <span class="emphasis"><strong>Limit</strong></span> field is not available in <span class="emphasis"><strong>CDC Log Mode</strong></span>.</em></span>
								</p></div>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Advanced settings</strong></span>
							</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Keep data in CDC Table</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to keep the changes made available to one or
								more target systems, even after they have been consulted.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Use cursor</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to specify the number of rows you want to
								work with at at any given time. This option optimises
								performance.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Trim all the String/Char columns</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to delete any spaces found at the beginning
								or end of fields, in all of the columns containing character
								strings.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Trim column</em></span>
							</p>
						</td><td valign="top">
							<p>Remove leading and trailing whitespace from defined
								columns.</p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Clear <span class="emphasis"><strong>Trim all the String/Char
										columns</strong></span> to enable Trim columns in this
									field.</p></div>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>tStatCatcher Statistics</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to collect the log data at component
								level.</p>
						</td></tr><tr><td>&nbsp;</td><td valign="top">
							<span class="emphasis"><em>Enable parallel execution</em></span>
						</td><td valign="top">
							<p>Select this check box to perform high-speed data processing, by
								treating multiple data flows simultaneously. </p>
							<p> In the <span class="emphasis"><strong>Number of parallel
									executions</strong></span> field, either:</p>
							<p> - Enter the number of parallel executions desired.</p>
							<p> - Press <span class="emphasis"><strong>Ctrl + Space</strong></span> and select
								the appropriate context variable from the list.</p>
							<p> </p>
							<p> For further information, see <span class="emphasis"><em>Talend Data Integration Studio</em></span>
								<span class="emphasis"><strong>User Guide</strong></span>.</p>
							<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>The <span class="emphasis"><strong>Action on
											table</strong></span> field is not available with the
										parallelization function. Therefore, you must use a
											<span class="emphasis"><strong>tCreateTable</strong></span> component
										if you want to create a table. </em></span></p></div>
							<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>When parallel execution is enabled, it is not
										possible to use global variables to retrieve return values
										in a subjob.</em></span>
								</p></div>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Usage</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>This component is used as a start component. It requires an output
								component and row Main link.</p>
						</td></tr></tbody></table></div></div><div class="section" title="Scenario 1: Populating a data warehouse"><div class="titlepage"><div><div><h3 class="title"><a name="d0e165522"></a>Scenario 1: Populating a data warehouse</h3></div></div></div><p>The following Java scenario creates a three-component Job that populates a data
			warehouse. A <span class="emphasis"><strong>tOracleInput</strong></span> component reads your client
			data stored in the <span class="emphasis"><em>CLIENT</em></span> table. A <span class="emphasis"><strong>tMap</strong></span> component allows you to modify this data and the modifications are
			transmitted to the <span class="emphasis"><em>Leadfact</em></span> table in the database through a
				<span class="emphasis"><strong>tOracleOutput</strong></span> component.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Drop the following components from the <span class="emphasis"><strong>Palette</strong></span> onto the design workspace: <span class="emphasis"><strong>tOracleInput</strong></span>, <span class="emphasis"><strong>tMap</strong></span>, and
						<span class="emphasis"><strong>tOracleOutput</strong></span>.</p></li><li class="listitem"><p>Connect the three components using <span class="emphasis"><strong>Row Main
					</strong></span>links. Click the link between <span class="emphasis"><strong>tMap</strong></span>
					and <span class="emphasis"><strong>tOracleOutput</strong></span> and name it
						<span class="emphasis"><em>leadfact</em></span>.</p><div class="mediaobject"><img src="../images/Use_Case_tOracleCDC1_1.png"></div></li><li class="listitem"><p>Double-click <span class="emphasis"><strong>tOracleInput</strong></span> to display its
						<span class="emphasis"><strong>Basic settings</strong></span> view and define its
					properties. </p><div class="mediaobject"><img src="../images/Use_Case_tOracleCDC1_2.png"></div></li><li class="listitem"><p>Set <span class="emphasis"><strong>Property Type</strong></span> to <span class="emphasis"><strong>Repository</strong></span> and then select the connection to the
						<span class="emphasis"><em>TALEND</em></span> database that holds the information about your
					clients. The connection details will display automatically in the corresponding
					fields.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>If you have not stored the DB connection details in the <span class="emphasis"><strong>Metadata</strong></span> entry in the Repository, select
							<span class="emphasis"><strong>Built-in </strong></span>in the property type list and
						set the connection details manually.</p></div></li><li class="listitem"><p>Set <span class="emphasis"><strong>Schema</strong></span> to <span class="emphasis"><strong>Repository</strong></span> and click the three-dot button to select the schema
					of the <span class="emphasis"><em>CLIENT </em></span>table stored in the <span class="emphasis"><strong>Metadata</strong></span> folder.</p><p>Related topics: see <span class="emphasis"><em>Talend Data Integration Studio</em></span>
					<span class="emphasis"><strong>User Guide</strong></span>.</p></li><li class="listitem"><p>In the <span class="emphasis"><strong>Table Name</strong></span> field, enter the name of
					the table holding the information you want to modify,
						<span class="emphasis"><em>CLIENT</em></span> in this example. </p></li><li class="listitem"><p>Click <span class="emphasis"><strong>Guess Query</strong></span> to retrieve all data from
					your table.</p></li><li class="listitem"><p>Double-click the <span class="emphasis"><strong>tMap</strong></span> component to open the
						<span class="emphasis"><strong>Map Editor</strong></span>. Notice that the input area to
					the left is already filled with the metadata of the input component. </p><div class="mediaobject"><img src="../images/Use_Case_tOracleCDC1_3.png"></div></li><li class="listitem"><p>Drag the fields in the input zone to the fields in the <span class="emphasis"><em>leadfact
					</em></span>table in the output zone. For more information regarding data
					mapping, see <span class="emphasis"><em>Talend Data Integration Studio</em></span>
					<span class="emphasis"><strong>User Guide</strong></span>.</p></li><li class="listitem"><p>Click <span class="emphasis"><strong>OK</strong></span> to validate the operation.</p></li><li class="listitem"><p>In the design workspace, double-click <span class="emphasis"><strong>tOracleOutput</strong></span> to display its <span class="emphasis"><strong>Basic
						settings</strong></span> view and define its properties.</p><div class="mediaobject"><img src="../images/Use_Case_tOracleCDC1_4.png"></div></li><li class="listitem"><p>Set <span class="emphasis"><strong>Property Type</strong></span> to <span class="emphasis"><strong>Repository</strong></span> and then select the <span class="emphasis"><em>cdc_data</em></span>
					connection to the data warehouse. The connection details will display
					automatically in the corresponding fields</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>If you have not stored the data warehouse connection details in the
							<span class="emphasis"><strong>Metadata</strong></span> folder in the <span class="emphasis"><strong>Repository</strong></span> tree view, select <span class="emphasis"><strong>Built-in </strong></span>in the property type list and set the
						connection details manually.</p></div><p>Related topics: see <span class="emphasis"><em>Talend Data Integration Studio</em></span>
					<span class="emphasis"><strong>User Guide</strong></span>.</p></li><li class="listitem"><p>In the <span class="emphasis"><strong>Table Name</strong></span> field, enter the name of
					the table you want to populate with modified data, <span class="emphasis"><em>LEADFACT</em></span>
					in this example.</p></li><li class="listitem"><p>Save your job and press <span class="emphasis"><strong>F6</strong></span> to create and
					populate the <span class="emphasis"><em>LEADFACT</em></span> table in the data warehouse.</p></li></ol></div></div><div class="section" title="Scenario 2: Retrieving modified data using Oracle CDC Redo log mode"><div class="titlepage"><div><div><h3 class="title"><a name="jzhang-20110921-databases-toraclecdc-scenario2"></a>Scenario 2: Retrieving modified data using Oracle CDC Redo log mode</h3></div></div></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>Before modifying data in the LEADFACT table and retrieving
					these modifications using the <span class="emphasis"><strong>tOracleCDC</strong></span>
					component, you must activate the <span class="emphasis"><strong>Redo log</strong></span> mode
					in the Oracle database that holds the table to monitor. For more information on
					how to activate the <span class="emphasis"><strong>Redo log</strong></span> mode, see
						<span class="emphasis"><em>Talend Data Integration Studio</em></span>
					<span class="emphasis"><strong>User Guide</strong></span>.</em></span>
			</p></div><p>This scenario is based on the preceding one. It continuously populates and modifies
			the data stored in the <span class="emphasis"><em>LEADFACT</em></span> table, and retrieves and saves,
			every night, these modifications in a dedicated table using the CDC function. These
			modifications could be then extracted by the various concerned departments.</p><div class="section" title="Step&nbsp;1: Configuring CDC"><div class="titlepage"><div><div><h4 class="title"><a name="d0e165767"></a>Step&nbsp;1: Configuring CDC</h4></div></div></div><p>Before being able to retrieve modified data from the <span class="emphasis"><em>LEADFACT</em></span>
				table, you must:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>first set up the DB connection dedicated to CDC,</p></li><li class="listitem"><p>second, set up a DB connection to the source data and identify the table
						to catch,</p></li><li class="listitem"><p>finally, set the connection between the CDC and the data.</p><p>To do that:</p></li><li class="listitem"><p>In the <span class="emphasis"><strong>Repository</strong></span> tree view and under
							<span class="emphasis"><strong>Metadata</strong></span>, create a connection to your
						database dedicated to CDC, <span class="emphasis"><em>cdc_publisher</em></span> in this
						scenario.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Ensure that the DB connection for CDC is on the same server with the
							source data to which changes are to be captured.</p></div></li><li class="listitem"><p>In the <span class="emphasis"><strong>Repository</strong></span> tree view and under
							<span class="emphasis"><strong>Metadata</strong></span>, create a connection to the
						source data warehouse and identify the table to catch,
							<span class="emphasis"><em>LEADFACT</em></span> in this scenario.</p></li><li class="listitem"><p>Right-click the connection to the <span class="emphasis"><em>orcle</em></span> database and
						select <span class="emphasis"><strong>Retrieve schema</strong></span> from the drop-down
						menu to retrieve the schema of the table to catch.</p></li><li class="listitem"><p>Right-click <span class="emphasis"><strong>CDC Foundation</strong></span> of the
							<span class="emphasis"><em>cdc-data </em></span>connection and select <span class="emphasis"><strong>Create CDC</strong></span> in the drop-down menu.</p><p>The <span class="emphasis"><strong>[Create Change Data Capture] </strong></span>dialog
						box displays</p><div class="mediaobject"><img src="../images/Use_Case_tOracleCDC_Create_Sub2_1.png"></div></li><li class="listitem"><p>Click the three-dot button next to the <span class="emphasis"><strong>Set link
							Connection</strong></span> field and select the connection that corresponds
						to CDC, <span class="emphasis"><em>cdc_publisher</em></span> in this example.</p></li><li class="listitem"><p>In the <span class="emphasis"><strong>Options</strong></span> area, select the <span class="emphasis"><strong>Log mode</strong></span> check box.</p></li><li class="listitem"><p>Click <span class="emphasis"><strong>Create Subscriber</strong></span>. The <span class="emphasis"><strong>[Create Subscriber and Execute SQL Script]</strong></span> dialog
						box displays.</p><div class="mediaobject"><img src="../images/Use_Case_tOracleCDC_Create_Sub2_2.png"></div></li><li class="listitem"><p>Click <span class="emphasis"><strong>Execute</strong></span> and then <span class="emphasis"><strong>Close</strong></span> to close the dialog box.</p></li><li class="listitem"><p>Click <span class="emphasis"><strong>Finish</strong></span> to validate the creation of
						the subscriber table.</p><p>In the <span class="emphasis"><strong>CDC Foundation</strong></span> folder, the
						relevant subscriber table displays.</p><p>You must specify which table the subscriber wants to subscribe to and
						then</p></li><li class="listitem"><p>Right-click the <span class="emphasis"><em>LEADFACT</em></span> schema of the
							<span class="emphasis"><em>cdc-data</em></span> connection and select <span class="emphasis"><strong>Add CDC</strong></span> in the drop-down list. The <span class="emphasis"><strong>[Create Subscriber and Execute SQL Script]</strong></span> dialog
						box displays.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>For Oracle databases and in <span class="emphasis"><em>Talend Data Integration Studio</em></span> version 3.2 or subsequent versions, the
							CDC system creates an alias for the source table(s) monitored. This
							avoids problems relating to identifier length upon creation of the table
							of changes and its associated view. For CDC systems which are already in
							place, the table names are maintained.</p><p> </p></div><div class="mediaobject"><img src="../images/Use_Case_tOracleCDC_Create_Sub2_3.png"></div></li><li class="listitem"><p>Click <span class="emphasis"><strong>Execute</strong></span> and then <span class="emphasis"><strong>Close</strong></span> to validate the subscription.</p><p>In the <span class="emphasis"><strong>CDC Foundation</strong></span> folder, the two
						created tables display and the schema node of the catched table is marked
						with a green CDC symbol.</p><div class="mediaobject"><img src="../images/Use_Case_tOracleCDC_arbo.png"></div></li></ol></div></div><div class="section" title="Step&nbsp;2: Modifying the data"><div class="titlepage"><div><div><h4 class="title"><a name="d0e165938"></a>Step&nbsp;2: Modifying the data</h4></div></div></div><p>Modify the data of your clients in the <span class="emphasis"><em>LEADFACT</em></span> table, for
				example, convert all customer names to upper case.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Double-click the <span class="emphasis"><strong>tMap</strong></span> component and enter
							<code class="code">row1.LASTNAME.toUpperCase()</code>in front of the <span class="emphasis"><strong>CLASTNAME</strong></span> column to convert all customer names to
						upper case.</p></li><li class="listitem"><p>Click <span class="emphasis"><strong>Ok</strong></span>.</p></li><li class="listitem"><p>Double-click the <span class="emphasis"><strong>tOracleOutput</strong></span>
						component.</p></li><li class="listitem"><p>In the <span class="emphasis"><strong>Action on table</strong></span> field, select
							<span class="emphasis"><strong>None</strong></span>.</p></li><li class="listitem"><p>In the <span class="emphasis"><strong>Action on data</strong></span> field, select
							<span class="emphasis"><strong>Insert or update</strong></span> to insert or update
						table data.</p></li><li class="listitem"><p>Save your Job and press <span class="emphasis"><strong>F6</strong></span> to execute
						it.</p></li></ol></div><p>To view all changes done on data, right-click the <span class="emphasis"><em>LEADFACT</em></span>
				table and select <span class="emphasis"><strong>View All Changes</strong></span> to open the
				relevant dialog box.</p></div><div class="section" title="Step&nbsp;3: Extracting change data"><div class="titlepage"><div><div><h4 class="title"><a name="d0e166003"></a>Step&nbsp;3: Extracting change data</h4></div></div></div><p>After setting up the CDC environment, you can now design a job using the Oracle
				CDC component to incrementally extract the change data from the
					<span class="emphasis"><em>LEADFACT</em></span> table. To do that:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>From the <span class="emphasis"><strong>Palette</strong></span>, drop the <span class="emphasis"><strong>OracleCDC</strong></span> and <span class="emphasis"><strong>tLogRow</strong></span> components to the design workspace.</p></li><li class="listitem"><p>Link the two components using a <span class="emphasis"><strong>Row Main</strong></span>
						link.</p><div class="mediaobject"><img src="../images/Use_Case_tOracleCDC2_1.png"></div></li><li class="listitem"><p>Double-click <span class="emphasis"><strong>tOracleCDC</strong></span> to open its
							<span class="emphasis"><strong>Basic settings</strong></span> view and define its
						properties.</p><div class="mediaobject"><img src="../images/Use_Case_tOracleCDC2_2.png"></div></li><li class="listitem"><p>Set <span class="emphasis"><strong>Property Type</strong></span> to <span class="emphasis"><strong>Repository</strong></span> and then select the schema
						corresponding to your Oracle DB table, <span class="emphasis"><em>cdc_publisher</em></span> in
						this scenario. The connection details will display automatically in the
						corresponding fields</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>If you have not stored the data warehouse connection details in the
								<span class="emphasis"><strong>Metadata</strong></span> folder in the <span class="emphasis"><strong>Repository</strong></span> tree view, select <span class="emphasis"><strong>Built-in </strong></span>in the property type list and set
							the connection details manually.</p></div></li><li class="listitem"><p>In the <span class="emphasis"><strong>Schema using CDC</strong></span> field, select
							<span class="emphasis"><strong>Repository</strong></span> and then select the schema
						of the <span class="emphasis"><em>LEADFACT</em></span> table stored in the <span class="emphasis"><strong>Metadata</strong></span> folder.</p></li><li class="listitem"><p>In the <span class="emphasis"><strong>Table using CDC</strong></span> field, enter the
						name of the table captured by the CDC, in this scenario
							<span class="emphasis"><em>Leadfact</em></span>.</p></li><li class="listitem"><p>In the <span class="emphasis"><strong>Events to catch</strong></span> field, select the
						check boxes corresponding to the type of the modified data the subscriber
						will extract. In this scenario, select the three check boxes for the three
						subscribers.</p></li><li class="listitem"><p>Double-click <span class="emphasis"><strong>tLogRow</strong></span> to display its
							<span class="emphasis"><strong>Basic settings</strong></span> view and define its
						properties.</p><div class="mediaobject"><img src="../images/Use_Case_tMysqlCDC3.png"></div></li><li class="listitem"><p>Click the <span class="emphasis"><strong>Sync columns</strong></span> button to retrieve
						the schema from the preceding component.</p></li><li class="listitem"><p>Click <span class="emphasis"><strong>Edit schema</strong></span> to open the schema
						dialog box.</p></li><li class="listitem"><p>In the <span class="emphasis"><strong>TALEND_CDC_CREATION_DATE</strong></span> line of
						the <span class="emphasis"><strong>Date Pattern</strong></span> column, enter between
						brackets the desired date format: <code class="code">"yyyy-MM-dd"</code>.</p></li><li class="listitem"><p>Save your Job and press <span class="emphasis"><strong>F6</strong></span> to execute
						it.</p></li></ol></div><p>In the <span class="emphasis"><strong>Redo log</strong></span> mode, changes done on data are
				indicated in the following way: modifications are equal to first, an &#8220;update and
				delete&#8221; operation (<span class="emphasis"><strong>UO</strong></span>), and then to an &#8220;update and
				insert&#8221; operation (<span class="emphasis"><strong>UN</strong></span>). Thus, client data displays
				twice:</p><p>- First, data is deleted (<span class="emphasis"><strong>UO)</strong></span>.</p><p>-Second, data is inserted (<span class="emphasis"><strong>UN)</strong></span>.</p><p>Once these modifications are extracted, they are no more available in the modified
				table. To verify their extraction, right-click the <span class="emphasis"><em>LEADFACT</em></span>
				table catched by the CDC and then select <span class="emphasis"><strong>Views All
					Changes</strong></span>. The extracted changes do not display anymore.</p><p>For another CDC scenario using the <span class="emphasis"><strong>Trigger</strong></span> mode,
				see <a class="xref" href="tMysqlCDC.html#Raa37041" title="Scenario 2: Retrieving modified data using CDC">the section called &#8220;Scenario 2: Retrieving modified data using CDC&#8221;</a>.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tOracleBulkExec.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-databases-traditional.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tOracleClose.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tOracleBulkExec&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tdi-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tOracleClose</td></tr></table></div></body></html>