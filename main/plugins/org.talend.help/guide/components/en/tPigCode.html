<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tPigCode</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tdi-components-rg-en..html" title="Talend Components"><link rel="up" href="ch-bigdata.html" title="Chapter&nbsp;1.&nbsp;Big Data components"><link rel="prev" href="tPigAggregate.html" title="tPigAggregate"><link rel="next" href="tPigCross.html" title="tPigCross"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tPigCode</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tPigAggregate.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;1.&nbsp;Big Data components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tPigCross.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tPigCode"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tPigCode"></a>tPigCode</h2></div></div></div><div class="mediaobject"><img src="../images/tpigcode_icon32_white.png"></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>This component will be available in the <span class="emphasis"><strong>Palette</strong></span> of the studio on the condition that you have subscribed to
				the relevant edition of <span class="emphasis"><em>Talend Big Data Studio</em></span>.</em></span>
		</p></div><div class="section" title="tPigCode Properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e22939"></a>tPigCode Properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Component family</strong></span>
							</p>
						</td><td valign="top">
							<p>Big Data / Hadoop</p>
						</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Function</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>This component allows you to enter personalized Pig code to
								integrate it in <span class="emphasis"><strong>Talend</strong></span> program. You
								can execute this code only once.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Purpose</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p><span class="emphasis"><strong>tPigCode</strong></span> extends the
								functionalities of a <span class="emphasis"><strong>Talend</strong></span> Job through
								using Pig scripts.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Basic settings</strong></span>
							</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
								Schema</em></span></p>
						</td><td valign="top">
							<p>A schema is a row description, i.e., it defines the number of
								fields that will be processed and passed on to the next component.
									The schema is either <span class="emphasis"><strong>Built-in</strong></span> or stored remotely in the
										<span class="emphasis"><strong>Repository</strong></span>. </p>
							<p>If you are using <span class="emphasis"><em>Talend Open Studio for Big Data</em></span>, only the <span class="emphasis"><strong>Built-in</strong></span> mode is available.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Built-in</strong></span>: The schema will be
								created and stored locally for this component only. Related topic:
								see <span class="emphasis"><em>Talend Data Integration Studio User Guide</em></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Repository</strong></span>: The schema already
								exists and is stored in the Repository, hence can be reused in
								various projects and Job designs. Related topic: see
										<span class="emphasis"><em>Talend Data Integration Studio User Guide</em></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Scripts</em></span>
							</p>
						</td><td valign="top">
							<p>Type in Pig scripts you want to execute according to the task you
								need to perform. For further information about Pig functions syntax
								specific to <span class="emphasis"><strong>Talend</strong></span>, see:</p>
							<p>
								<a class="link" href="http://pig.apache.org/docs/r0.8.0/udf.html" target="_top">http://pig.apache.org/docs/r0.8.0/udf.html</a>
							</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Advanced settings</strong></span>
							</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>tStatCatcher Statistics</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to gather the Job processing metadata at the
								Job level as well as at each component level. </p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Usage</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>This component is commonly used as intermediate step together with
								input component and output component.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Prerequisites</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>The Hadoop distribution must be properly installed, so as to guarantee the interaction
		with the Studio.</p>
							<p>For example, if you need to connect to MapR from the Studio, ensure that you have installed
		the MapR client in the machine where the Studio is, and added the MapR client library to the
		PATH variable of that machine. For Windows, this library is <span class="emphasis"><em>lib\MapRClient.dll</em></span> in the MapR client jar file; without adding it, you may
		encounter the following error: <code class="code">no MapRClient in java.library.path</code>.</p>
							<p>For further information about how to install an Hadoop distribution, see the manuals
		corresponding to the Hadoop distribution you are using.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Limitation</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>Knowledge of Pig scripts is required.</p>
						</td></tr></tbody></table></div><p>
			<span>&nbsp;</span>
		</p></div><div class="section" title="Scenario: Selecting a column of data from an input file and store it into a local file"><div class="titlepage"><div><div><h3 class="title"><a name="d0e23188"></a>Scenario: Selecting a column of data from an input file and store it into a local
			file</h3></div></div></div><p>This scenario describes a three-component Job that selects a column of data that
			matches filter condition defined in <span class="emphasis"><strong>tPigCode</strong></span> and stores
			the result into a local file.</p><div class="mediaobject"><img src="../images/Use_Case_tPigCode1.png"></div><div class="section" title="Setting up the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e23199"></a>Setting up the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop the following components from the <span class="emphasis"><strong>Palette</strong></span> to the design workspace: <span class="emphasis"><strong>tPigCode</strong></span>, <span class="emphasis"><strong>tPigLoad</strong></span>,
							<span class="emphasis"><strong>tPigStoreResult</strong></span>.</p></li><li class="step" title="Step 2"><p>Right-click <span class="emphasis"><strong>tPigLoad</strong></span> to connect it to
							<span class="emphasis"><strong>tPigCode</strong></span> using a <span class="emphasis"><strong>Row &gt; Pig Combine</strong></span> connection.</p></li><li class="step" title="Step 3"><p>Right-click <span class="emphasis"><strong>tPigCode</strong></span> to connect it to
							<span class="emphasis"><strong>tPigStoreResult</strong></span> using a <span class="emphasis"><strong>Row &gt; Pig Combine</strong></span> connection.</p></li></ol></div></div><div class="section" title="Loading the data"><div class="titlepage"><div><div><h4 class="title"><a name="d0e23242"></a>Loading the data</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tPigLoad</strong></span> to open its
							<span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/Use_Case_tPigCode2.png"></div></li><li class="step" title="Step 2"><p>Click the three-dot button next to <span class="emphasis"><strong>Edit
							schema</strong></span> to add columns for <span class="emphasis"><strong>tPigLoad</strong></span>.</p><div class="mediaobject"><img src="../images/Use_Case_tPigCode3.png"></div></li><li class="step" title="Step 3"><p>Click the plus button to add <span class="emphasis"><em>Name</em></span>,
							<span class="emphasis"><em>Country</em></span> and <span class="emphasis"><em>Age</em></span> and click
							<span class="emphasis"><strong>OK</strong></span> to save the setting.</p></li><li class="step" title="Step 4"><p>Select <span class="emphasis"><strong>Local</strong></span> from the <span class="emphasis"><strong>Mode</strong></span> area.</p></li><li class="step" title="Step 5"><p>Fill in the <span class="emphasis"><strong>Input filename</strong></span> field with the
						full path to the input file.</p><p> In this scenario, the input file is <span class="emphasis"><em>CustomerList</em></span>
						which contains rows of names, country names and age.</p></li><li class="step" title="Step 6"><p>Select <span class="emphasis"><strong>PigStorage</strong></span> from the <span class="emphasis"><strong>Load function</strong></span> list.</p></li><li class="step" title="Step 7"><p>Leave rest of the settings as they are.</p></li></ol></div></div><div class="section" title="Configuring the tPigCode component"><div class="titlepage"><div><div><h4 class="title"><a name="d0e23317"></a>Configuring the tPigCode component</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tPigCode</strong></span> component to open
						its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/Use_Case_tPigCode4.png"></div></li><li class="step" title="Step 2"><p>Click <span class="emphasis"><strong>Sync columns</strong></span> to retrieve the schema
						structure from the preceding component.</p></li><li class="step" title="Step 3"><p>Fill in the <span class="emphasis"><strong>Script Code</strong></span> field with
						following expression:</p><p>
						</p><pre class="programlisting">tPigCode_1_RESULT = foreach tPigLoad_1_RESULT generate $0 as name;</pre><p>This
						filter expression selects column <span class="emphasis"><em>Name</em></span> from
							<span class="emphasis"><em>CustomerList</em></span>. </p></li></ol></div></div><div class="section" title="Saving the result data to a local file"><div class="titlepage"><div><div><h4 class="title"><a name="d0e23356"></a>Saving the result data to a local file</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tPigStoreResult</strong></span> to open its
							<span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/Use_Case_tPigCode5.png"></div></li><li class="step" title="Step 2"><p>Click <span class="emphasis"><strong>Sync columns</strong></span> to retrieve the schema
						structure from the preceding component.</p></li><li class="step" title="Step 3"><p>Fill in the <span class="emphasis"><strong>Result file</strong></span> field with the
						full path to the result file.</p><p> In this scenario, the result is saved in <span class="emphasis"><em>Result</em></span>
						file.</p></li><li class="step" title="Step 4"><p>Select <span class="emphasis"><strong>Remove result directory if
						exists</strong></span>.</p></li><li class="step" title="Step 5"><p>Select <span class="emphasis"><strong>PigStorage</strong></span> from the <span class="emphasis"><strong>Store function</strong></span> list.</p></li><li class="step" title="Step 6"><p>Leave rest of the settings as they are.</p></li></ol></div></div><div class="section" title="Executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e23407"></a>Executing the Job</h4></div></div></div><p>Save your Job and press <span class="emphasis"><strong>F6</strong></span> to run it.</p><div class="mediaobject"><img src="../images/Use_Case_tPigCode6.png"></div><p>The <span class="emphasis"><em>Result</em></span> file is generated containing the selected column
				of data.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tPigAggregate.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-bigdata.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tPigCross.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tPigAggregate&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tdi-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tPigCross</td></tr></table></div></body></html>