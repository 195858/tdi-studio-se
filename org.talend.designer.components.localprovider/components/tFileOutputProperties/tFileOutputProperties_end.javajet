<%@ jet 
	imports="
        org.talend.core.model.process.INode
        org.talend.designer.codegen.config.CodeGeneratorArgument
        org.talend.core.model.process.ElementParameterParser
	" 
%>
<%
CodeGeneratorArgument codeGenArgument = (CodeGeneratorArgument) argument;
INode node = (INode)codeGenArgument.getArgument();
String cid = node.getUniqueName();
String fileFormat = ElementParameterParser.getValue(node,"__FILE_FORMAT__");
String filename = ElementParameterParser.getValue(node,"__FILENAME__");	
if(fileFormat.equals("PROPERTIES_FORMAT")){
%>
	java.io.OutputStream fos_<%=cid%> = new java.io.FileOutputStream(file_<%=cid%>);
	properties_<%=cid%>.store(fos_<%=cid%>, "");
<%
}else if(fileFormat.equals("INI_FORMAT")){
%>
		ini_<%=cid%>.store();
	} catch (org.ini4j.InvalidFileFormatException e) {
    	throw(e);
    } catch (java.io.IOException ex) {
    	throw(ex);
    }
<%
}
%>
globalMap.put("<%=cid %>_NB_LINE", tos_count_<%=cid %>);


