<%@ jet 
	imports="
		org.talend.core.model.process.INode 
		org.talend.core.model.process.ElementParameterParser
		org.talend.designer.codegen.config.CodeGeneratorArgument
	"
%>

<%
	CodeGeneratorArgument codeGenArgument = (CodeGeneratorArgument) argument;
	INode node = (INode)codeGenArgument.getArgument();
	String cid = node.getUniqueName();
	
	boolean isInputVariable=ElementParameterParser.getValue(node, "__INPUT_VARIABLE__").equals("true");
	int button = Integer.parseInt(ElementParameterParser.getValue(node, "__BUTTONS__"));	
%>
	int messageIcon<%=cid %> = javax.swing.JOptionPane.<%=ElementParameterParser.getValue(node, "__ICON__") %>;
	String title<%=cid %> = <%=ElementParameterParser.getValue(node, "__TITLE__") %>;
	String message<%=cid %> = <%=ElementParameterParser.getValue(node, "__MESSAGE__") %>;
	int result<%=cid %> = 0;

<% if(isInputVariable){

%>
   String variableName_<%=cid %> = <%=ElementParameterParser.getValue(node, "__VARIABLE_NAME__") %>;
   String question_<%=cid %> = <%=ElementParameterParser.getValue(node, "__QUESTION_LABEL__") %>;
   String variableValue_<%=cid %>=null;
   
   variableValue_<%=cid %>=javax.swing.JOptionPane.showInputDialog(null, question_<%=cid %> , "Please input a value for question", javax.swing.JOptionPane.QUESTION_MESSAGE);
      
   globalMap.put("<%=cid %>_USER_RETURN",variableValue_<%=cid %>);
   globalMap.put(variableName_<%=cid %>,variableValue_<%=cid %>);

   
<% }
%>   	
	
<%
	switch(button) {
		case 0:
		// 0) OK
%>
		javax.swing.JOptionPane.showMessageDialog(null, message<%=cid %>, title<%=cid %>, messageIcon<%=cid %>);
		result<%=cid %> = 1;
<%
			break;
		case 1:
		// 1) OK and Cancel
%>
		//javax.swing.JOptionPane.showOptionDialog(null, message<%=cid %>, title<%=cid %>, javax.swing.JOptionPane.YES_NO_OPTION, messageIcon<%=cid %>, null, new String[] { "OK", "Cancel" }, null);
		//result<%=cid %> = 1;
		
		result<%=cid %> = javax.swing.JOptionPane.showOptionDialog(null, message<%=cid %>, title<%=cid %>, javax.swing.JOptionPane.OK_CANCEL_OPTION, messageIcon<%=cid %>, null, new String[] { "OK", "Cancel" }, null);
<%
			break;
		case 2:
		// 2) Abort Retry Ignore
%>
		result<%=cid %> = javax.swing.JOptionPane.showOptionDialog(null, message<%=cid %>, title<%=cid %>, javax.swing.JOptionPane.YES_NO_CANCEL_OPTION, messageIcon<%=cid %>, null, new String[] { "Abort", "Retry", "Ignore" }, null);
<%
			break;
		case 3:
		// 3) Yes No and Cancel
%>
		result<%=cid %> = javax.swing.JOptionPane.showOptionDialog(null, message<%=cid %>, title<%=cid %>, javax.swing.JOptionPane.YES_NO_CANCEL_OPTION, messageIcon<%=cid %>, null, new String[] { "Yes", "No", "Cancel" }, null);
<%
			break;
		case 4:
		// 4) Yes and No
%>
		result<%=cid %> = javax.swing.JOptionPane.showOptionDialog(null, message<%=cid %>, title<%=cid %>, javax.swing.JOptionPane.YES_NO_OPTION, messageIcon<%=cid %>, null, new String[] { "Yes", "No" }, null);
<%
			break;
		case 5:
		// 5) Retry and Cancel
%>
		result<%=cid %> = javax.swing.JOptionPane.showOptionDialog(null, message<%=cid %>, title<%=cid %>, javax.swing.JOptionPane.YES_NO_OPTION, messageIcon<%=cid %>, null, new String[] { "Retry", "Cancel" }, null);
<%
			break;
		default:
			//do nothing
			break;
	}
%>

globalMap.put("<%=cid%>_RESULT", result<%=cid %>);
