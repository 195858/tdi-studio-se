<%@ jet 
	imports="
		org.talend.core.model.process.INode
		org.talend.designer.codegen.config.CodeGeneratorArgument
        org.talend.core.model.process.ElementParameterParser
	"
%>

<%
	CodeGeneratorArgument codeGenArgument = (CodeGeneratorArgument) argument;
	INode node = (INode)codeGenArgument.getArgument();
	String cid = node.getUniqueName();
    boolean disError=("true").equals(ElementParameterParser.getValue(node, "__DISABLE_ERROR__"));
    boolean disWarning=("true").equals(ElementParameterParser.getValue(node, "__DISABLE_WARNINGS__"));
    boolean disInfo=("true").equals(ElementParameterParser.getValue(node, "__DISABLE_INFO__"));
    String newVariable = ElementParameterParser.getValue(node, "__LOAD_NEW_VARIABLE__");
    String oldVariable = ElementParameterParser.getValue(node, "__NOT_LOAD_OLD_VARIABLE__");
%>	
	java.util.Enumeration<?> enu_<%=cid %> = context.propertyNames();
    while(enu_<%=cid %>.hasMoreElements())
    {           
    	String key_<%=cid %> = (String)enu_<%=cid %>.nextElement();
        if(!assignList_<%=cid %>.contains(key_<%=cid %>) && !newPropertyList_<%=cid %>.contains(key_<%=cid %>))
        {
            noAssignList_<%=cid %>.add(key_<%=cid %>);
        }          
    }
<%
	if( (("Error").equals(newVariable) && disError==false) 
		|| (("Warning").equals(newVariable) && disWarning==false)
		|| (("Info").equals(newVariable) && disInfo==false) ){
%>
	for(Object obj_<%=cid %> :newPropertyList_<%=cid%>){
		System.<%=("Error").equals(newVariable)?"err":"out"%>.println("<%=newVariable%>: Parameter \"" + obj_<%=cid %> + "\" is a new parameter of <%=cid %>");
	}
<%
	}
	if( (("Error").equals(oldVariable) && disError==false) 
		|| (("Warning").equals(oldVariable) && disWarning==false)
		|| (("Info").equals(oldVariable) && disInfo==false) ){
%>
	for(Object obj_<%=cid %> :noAssignList_<%=cid %>){
		System.<%=("Error").equals(oldVariable)?"err":"out"%>.println("<%=oldVariable%>: Parameter \"" + obj_<%=cid %> + "\" has not been set by <%=cid %>"); 
	}
<%
	}
%> 
    globalMap.put("<%=cid %>_NB_LINE",nb_line_<%=cid %>);
