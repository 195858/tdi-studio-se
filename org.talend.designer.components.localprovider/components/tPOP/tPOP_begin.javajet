<%@ jet 
	package="org.talend.designer.codegen.translators" 
	imports="
		org.talend.core.model.process.INode 
		org.talend.core.model.process.ElementParameterParser
		org.talend.designer.codegen.config.CodeGeneratorArgument
		java.util.List
	"
	class="POPBegin"
%>

<%
	CodeGeneratorArgument codeGenArgument = (CodeGeneratorArgument) argument;
	INode node = (INode)codeGenArgument.getArgument();

	String host = ElementParameterParser.getValue(node, "__HOST__");
    String username = ElementParameterParser.getValue(node, "__USERNAME__");
    String password = ElementParameterParser.getValue(node, "__PASSWORD__");
        
	// component id
	String cid = node.getUniqueName();
%>	
	String popServer_<%=cid %> = <%=host %>;
    String popUser_<%=cid %> = <%=username %>;
    String popPassword_<%=cid %> = <%=password %>;
    
    java.util.Properties props_<%=cid %> = System.getProperties();
    javax.mail.Session session_<%=cid %> = javax.mail.Session.getDefaultInstance(props_<%=cid %>, null);
    
    javax.mail.Store store_<%=cid %> = session_<%=cid %>.getStore("pop3");
    store_<%=cid %>.connect(popServer_<%=cid %>, popUser_<%=cid %>, popPassword_<%=cid %>);
    
    int nb_email_<%=cid %> = 0;
	java.util.List<String> current_file_<%=cid %> = new java.util.ArrayList<String>();
	java.util.List<String> current_filepath_<%=cid %> = new java.util.ArrayList<String>();    