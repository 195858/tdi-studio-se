<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Simple HTML">
    <meta name="LASTUPDATED" content="10/05/07 18:38:02">
    <title>Scenario: Validating xml files</title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a href="tDTDValidator_Prop.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="tELTMysqlInput_Prop.html"><img src="images/snext.gif" border="0" alt="Next"></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp1326879"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<a name="wp1357735"> </a><h3><font color="#666666" face="Arial, Verdana, Helvetica, sans-serif" size="3"><b>
Scenario: Validating xml files
</b></font></h3>
<a name="wp1327806"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
This scenario describes a job that validates several files from a folder and outputs the log information for the invalid files into a delimited file.
</font></p>
<a name="wp1326890"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></p>
<div align="center"><img src="images/Use_Case_tDTDValidator1.png" border="0" hspace="0" vspace="0"></div><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></p>
<ul>
<ul>
<a name="wp1326904"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Click and drop the following components from the <b>Palette</b>: <b>tFileList</b>, <b>tDTDValidator</b>, <b>tMap</b>, <b>tFileOutputDelimited</b>.</font></li>
<a name="wp1326923"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Connect the <b>tFileList</b> to the <b>tDTDValidator</b> with an <b>Iterate </b>link and the remaining component using a <b>main </b>row.</font></li>
<a name="wp1326932"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Set the tFileList component Properties, to fetch an XML file from a folder. </font></li>
<a name="wp1326939"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<br>
<img src="images/Use_Case_tDTDValidator2.png" border="0" hspace="0" vspace="0"><br>

</font></p>
<a name="wp1326950"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Change the <b>Filemask</b> to <i>*.xml</i>. Mind the quotes depending on the Perl or Java version you are using.</font></li>
<a name="wp1326958"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Uncheck the <b>Case Sensitive</b> box.</font></li>
<a name="wp1326967"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In the <b>tDTDValidate</b> component <b>Properties</b>, the schema is read-only as it contains standard log information related to the validation process.</font></li>
<a name="wp1326976"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Set the <b>DTD file</b> to be used as reference.</font></li>
<a name="wp1326983"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<br>
<img src="images/Use_Case_tDTDValidator3.png" border="0" hspace="0" vspace="0"><br>

</font></p>
<a name="wp1326991"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Press <b>Ctrl+Space bar</b> to access the variable list. In the XML file field, select the current filepath global variable :  $_globals{tFileList_1}{CURRENT_FILEPATH} (in Perl)</font></li>
<a name="wp1326995"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In the various messages to display in the Run Job tab console, use the jobName to recall the job name tag. Recall  the filename using the relevant global variable: $_globals{tFileList_1}{CURRENT_FILE}. Mind the Perl or Java operators such as the dot or the plus sign to build your message.</font></li>
<a name="wp1327003"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Check the <b>Print to Console</b> box.</font></li>
<a name="wp1327009"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In the <b>tMap</b> component, drag and drop the information data from the standard schema that you want to pass on to the output file.</font></li>
<a name="wp1327018"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<br>
<img src="images/Use_Case_tDTDValidator4.png" border="0" hspace="0" vspace="0"><br>

</font></p>
<a name="wp1327023"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Once the Output schema is defined as required, add a filter condition to only select the log information data when the XML file is invalid.</font></li>
<a name="wp1327027"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Follow the best practice by typing first the wanted value for the variable, then the operator based on the type of data filtered then the variable that should meet the requirement. In this case (in Java and Perl): 0 ==  $row1[validate]  </font></li>
<a name="wp1327037"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Then connect (if not already done) the <b>tMap</b> to the <b>tFileOutputDelimited</b> component using a main row. Name it as relevant, in this example: <i>errorsOnly</i>.</font></li>
<a name="wp1327050"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In the <b>tFileOutputDelimited</b> <b>Properties</b>, Define the destination filepath, the field delimiters and the encoding.</font></li>
<a name="wp1327061"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Save your job and press <b>F6</b> to run it.</font></li>
<a name="wp1327122"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<br>
<img src="images/Use_Case_tDTDValidator5.png" border="0" hspace="0" vspace="0"><br>

</font></p>
<a name="wp1327137"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
On the Run Job console the messages defined display for each of the invalid files. At the same time the output file is filled with log data.
</font></p>
</ul>
</ul>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a href="tDTDValidator_Prop.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="tELTMysqlInput_Prop.html"><img src="images/snext.gif" border="0" alt="Next"></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
