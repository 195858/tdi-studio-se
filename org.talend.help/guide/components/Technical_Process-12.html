<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Simple HTML">
    <meta name="LASTUPDATED" content="02/05/08 13:06:56">
    <title>Writing code using the Expression Builder</title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a href="Technical_Process-11.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="Technical_Process-13.html"><img src="images/snext.gif" border="0" alt="Next"></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp1438652"> </a><h2><font color="#666666" face="Arial, Verdana, Helvetica, sans-serif" size="4"><b>
Writing code using the Expression Builder
</b></font></h2>
<a name="wp1439313"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Some jobs require pieces of code to be written in order to provide components with parameters. In the <b>Properties</b> view of some components, an <b>Expression Builder</b> interface can help you build these pieces of code (in Java or Perl generation language).
</font></p>
<a name="wp1439411"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The following example shows the use of the <b>Expression Builder</b> in a <b>tMap</b> component.
</font></p>
<a name="wp1439426"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Expr_Builder1.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<a name="wp1439440"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Two input flows are connected to the <b>tMap</b> component. 
</font></p>
<ul>
<a name="wp1439474"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">From the DB input, comes a list of names made of a first name and a last name separated by a space char. </font></li>
<a name="wp1439780"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">From the File input, comes a list of US states, in lower case.</font></li>
</ul>
<a name="wp1439784"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
In the <b>tMap</b>, use the expression builder to: First, replace the blank char separating the first and last names with an underscore char, and second, change the states from lower case to upper case. 
</font></p>
<ul>
<a name="wp1439890"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In the <b>tMap</b>, set the relevant inner join to set the reference mapping. For more information regarding the use of the tMap<a href="Technical_Process-11.html">, see&#160;<i>Mapping data flows in a job.</i></a></font></li>
<a name="wp1439811"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Drag and drop the <i>Names</i> column from the main (<i>row1</i>) input to the output area, and the <i>State</i> column from the lookup (<i>row2</i>) input towards the same output area.</font></li>
<a name="wp1439935"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Then click on the first <b>Expression</b> field (<i>row1.Name</i>) to display the three-dot button.</font></li>
</ul>
<a name="wp1439825"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Expr_Builder5.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<a name="wp1439830"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The <b>Expression Builder</b> window opens up.
</font></p>
<a name="wp1439965"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Expr_Builder3.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<ul>
<a name="wp1440225"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In the <b>Category</b> area, select the relevant action you want to perform. In this example, select <code>StringHandling</code> and select the <code>EREPLACE</code> function. </font></li>
<a name="wp1440241"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In the <b>Expression</b> area, paste <i>row1.Name</i> in place of the text expression, in order to get: <code>StringHandling.EREPLACE(row1.Name,&quot; &quot;,&quot;_&quot;)</code>. This expression will replace the separating space char with an underscore char in the char string given.</font></li>
<a name="wp1440251"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2"> Now check that the output is correct, by typing in the relevant <b>Value</b> field of the <b>Test </b>area, a dummy value, e.g:<i>Tom Jones</i>. </font></li>
<a name="wp1440326"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Then click <b>Test!</b> and check that the correct change is carried out, e.g: <i>Tom_Jones</i></font></li>
<a name="wp1440354"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Click <b>OK  </b>to validate. </font></li>
<a name="wp1440379"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Carry out the same operation for the second column (<i>State</i>). </font></li>
<a name="wp1440747"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In the <b>tMap </b>output, select the <i>row2.State</i> Expression and click the three-dot button to open the <b>Expression builder </b>again.</font></li>
</ul>
<a name="wp1440403"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Expr_Builder2.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<ul>
<a name="wp1440433"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">This time, the <code>StringHandling</code> function to be used is <code>UPCASE</code>. The complete expression says: <code>StringHandling.UPCASE(row2.State)</code>.</font></li>
<a name="wp1440457"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Once again, check that the expression syntax is correct using a dummy <b>Value</b> in the <b>Test</b> area, e.g.: <i>indiana</i>.</font></li>
<a name="wp1440811"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">The <b>Test!</b> result should display <i>INDIANA </i>for this example.</font></li>
<a name="wp1440535"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Click <b>OK</b> to validate.</font></li>
</ul>
<a name="wp1440552"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Both expressions now display on the <b>tMap Expression</b> field.
</font></p>
<a name="wp1440574"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Expr_Builder4.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<a name="wp1440842"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
These changes will be carried out along the flow processing. The output of this example is as shown below. 
</font></p>
<a name="wp1440861"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Expr_Builder6.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a href="Technical_Process-11.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="Technical_Process-13.html"><img src="images/snext.gif" border="0" alt="Next"></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
