<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tMysqlLastInsertId</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-components-rg-en..html" title="Talend Open Studio"><link rel="up" href="ch-databases-traditional.html" title="Chapter&nbsp;7.&nbsp;Databases - traditional components"><link rel="prev" href="tMysqlInput.html" title="tMysqlInput"><link rel="next" href="tMysqlOutput.html" title="tMysqlOutput"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tMysqlLastInsertId</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tMysqlInput.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;7.&nbsp;Databases - traditional components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tMysqlOutput.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tMysqlLastInsertId"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tMysqlLastInsertId"></a>tMysqlLastInsertId</h2></div></div></div><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="27"><tr><td><img src="../images/tMSSqlLastInsertId_icon32.png" width="27"></td></tr></table></div><a name="Xaa1605643"></a><div class="section" title="tMysqlLastInsertId properties"><div class="titlepage"><div><div><h3 class="title"><a name="d41116e85550"></a>tMysqlLastInsertId properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top"><p><span class="emphasis"><strong>Component
                                family</strong></span></p>
                        </td><td valign="top"><p>Databases</p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Function</strong></span></p>
                        </td><td colspan="2" valign="top"><p><span class="emphasis"><strong>tMysqlLastInsertId </strong></span>fetches the last inserted ID from
                                a selected MySQL Connection.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Purpose</strong></span></p>
                        </td><td colspan="2" valign="top"><p><span class="emphasis"><strong>tMysqlLastInsertId</strong></span> obtains the primary key value of
                                the record that was last inserted in a Mysql table by a user.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Basic
                                settings</strong></span></p>
                        </td><td valign="top"><p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
                                    Schema</em></span></p>
                        </td><td valign="top"><p>A schema is a row description, i.e., it defines
                                the number of fields to be processed and passed on to the next
                                component. <span>The schema is either
                                        <span class="emphasis"><strong>Built-in</strong></span> or stored remotely
                                    in the <span class="emphasis"><strong>Repository</strong></span></span>.
                            </p>
                        </td></tr><tr><td><p>&nbsp;</p>
                        </td><td><p>&nbsp;</p>
                        </td><td valign="top"><p><span class="emphasis"><strong>Built-in</strong></span>: You
                                create and store the schema locally for this component only. Related
                                topic: see <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p>
                        </td></tr><tr><td><p>&nbsp;</p>
                        </td><td><p>&nbsp;</p>
                        </td><td valign="top"><p><span class="emphasis"><strong>Repository</strong></span>: You
                                have already created the schema and stored it in the Repository. You
                                can reuse it in various projects and job flow charts. Related topic:
                                see <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p>
                        </td></tr><tr><td><p>&nbsp;</p>
                        </td><td valign="top"><p><span class="emphasis"><em>Component list</em></span></p>
                        </td><td valign="top"><p>Select the relevant <span class="emphasis"><strong>tMysqlConnection</strong></span> component in the list if more than
                                one connection is planned for the current job.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Usage</strong></span></p>
                        </td><td colspan="2" valign="top"><p>This component is to be
                                used as an intermediary component. </p>
                            <div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em> If you use this component with
                                            <span class="emphasis"><strong>tMySqlOutput</strong></span>, verify
                                        that the <span class="emphasis"><strong>Extend Insert</strong></span>
                                        check box in the <span class="emphasis"><strong>Advanced
                                            Settings</strong></span> tab is not selected. <span class="emphasis"><strong>Extend Insert</strong></span> allows you to make
                                        a batch insertion, however, if the check box is selected,
                                        only the ID of the last line in the last batch will be
                                        returned.</em></span></p></div>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Limitation</strong></span></p>
                        </td><td colspan="2" valign="top"><p>n/a</p>
                        </td></tr></tbody></table></div></div><div class="section" title="Scenario: Get the ID for the last inserted record"><div class="titlepage"><div><div><h3 class="title"><a name="Raa19820"></a>Scenario: Get the ID for the last inserted record</h3></div></div></div><p>The following Java scenario creates a job that opens a connection to Mysql database,
            writes the defined data into the database, and finally fetches the last inserted ID on
            the existing connection.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Drop the following components from the <span class="emphasis"><strong>Palette</strong></span> onto the design workspace: <span class="emphasis"><strong>tMySqlConnection</strong></span>, <span class="emphasis"><strong>tMySqlCommit</strong></span>,
                        <span class="emphasis"><strong>tFileInputDelimited</strong></span>, <span class="emphasis"><strong>tMySqlOutput</strong></span>, <span class="emphasis"><strong>tMysqlLastInsertId</strong></span>, and <span class="emphasis"><strong>tLogRow</strong></span>.</p></li><li class="listitem"><p> Connect <span class="emphasis"><strong>tMySqlConnection</strong></span> to <span class="emphasis"><strong>tFileInputDelimited </strong></span>using an <span class="emphasis"><strong>OnSubjobOk </strong></span>link.</p></li><li class="listitem"><p> Connect <span class="emphasis"><strong>tFileInputDelimited </strong></span>to <span class="emphasis"><strong>tMySqlCommit</strong></span> using an <span class="emphasis"><strong>OnSubjobOk </strong></span>link.</p></li><li class="listitem"><p> Connect <span class="emphasis"><strong>tFileInputdelimited </strong></span>to the three
                    other components using <span class="emphasis"><strong>Row Main </strong></span>links.</p></li></ul></div><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="478"><tr><td><img src="../images/Use_Case_tMysqlLastInsertId.png" width="478"></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the design workspace, select <span class="emphasis"><strong>tMysqlConnection</strong></span>.</p></li><li class="listitem"><p> Click the <span class="emphasis"><strong>Component</strong></span> tab to define the basic
                    settings for <span class="emphasis"><strong>tMysqlConnection</strong></span>.</p></li><li class="listitem"><p> In the <span class="emphasis"><strong>Basic settings</strong></span> view, set the
                    connection details<span> manually or select them from
                        the context variable list, through a <span class="emphasis"><strong>Ctrl+Space</strong></span> click in the corresponding field if you stored
                        them locally as Metadata DB connection entries. For more information about
                        Metadata, see <span class="emphasis"><em>Talend Open Studio User Guide</em></span></span>.</p></li></ul></div><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="445"><tr><td><img src="../images/Use_Case_tMysqlLastInsertId1.png" width="445"></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the design workspace, select <span class="emphasis"><strong>tMysqlCommit</strong></span>
                    and click the <span class="emphasis"><strong>Component</strong></span> tab to define its basic
                    settings.</p></li><li class="listitem"><p> On the <span class="emphasis"><strong>Component List</strong></span>, select the relevant
                        <span class="emphasis"><strong>tMysqlConnection</strong></span> if more than one
                    connection is used.</p></li><li class="listitem"><p> In the design workspace, select <span class="emphasis"><strong>tFileInputDelimited</strong></span>.</p></li><li class="listitem"><p> Click the <span class="emphasis"><strong>Component</strong></span> tab to define the basic
                    settings of <span class="emphasis"><strong>tFileInputDelimited</strong></span>.</p></li></ul></div><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="453"><tr><td><img src="../images/Use_Case_tMysqlLastInsertId2.png" width="453"></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Fill in a path to the processed file in the <span class="emphasis"><strong>File
                        Name</strong></span> field. The file used in this example is
                        <span class="emphasis"><em>Customers</em></span>.</p></li><li class="listitem"><p> Define the <span class="emphasis"><strong>Row separator</strong></span> that allow to
                    identify the end of a row. Then define the <span class="emphasis"><strong>Field
                        separator</strong></span> used to delimit fields in a row.</p></li><li class="listitem"><p> Set the header, the footer and the number of processed rows as necessary. In
                    this scenario, we have one header.</p></li><li class="listitem"><p>Click
                    the three-dot button next to <span class="emphasis"><strong>Edit Schema </strong></span>to
                    define the data to pass on to the next component. </p></li></ul></div><p>Related topics: see <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="412"><tr><td><img src="../images/Use_Case_tMysqlLastInsertId3.png" width="412"></td></tr></table></div><p>In this scenario, the schema consists of two columns, <span class="emphasis"><em>name</em></span> and
                <span class="emphasis"><em>age</em></span>. The first holds three employees&#8217; names and the second
            holds the corresponding age for each.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the design workspace, select <span class="emphasis"><strong>tMySqlOutput</strong></span>.</p></li><li class="listitem"><p> Click the <span class="emphasis"><strong>Component</strong></span> tab to define the basic
                    settings of <span class="emphasis"><strong>tMySqlOuptput</strong></span>.</p></li></ul></div><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="467"><tr><td><img src="../images/Use_Case_tMysqlLastInsertId4.png" width="467"></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Select the <span class="emphasis"><strong>Use an existing connection</strong></span> check
                    box.</p></li><li class="listitem"><p> In the <span class="emphasis"><strong>Table</strong></span> field, enter the name of the
                    table where to write the employees&#8217; list, in this example:
                        <span class="emphasis"><em>employee</em></span>. </p></li><li class="listitem"><p> Select relevant actions on the <span class="emphasis"><strong>Action on table
                    </strong></span>and <span class="emphasis"><strong>Action on data</strong></span> lists. In this
                    example, no action is carried out on table, and the action carried out on data
                    is <span class="emphasis"><em>Insert</em></span>. </p></li><li class="listitem"><p>Click
                        <span class="emphasis"><strong>Sync columns</strong></span> to synchronize columns with
                    the previous component. In this example, the schema to be inserted into the
                    MySql database table consists of the two columns<span class="emphasis"><em> name</em></span>
                        and<span class="emphasis"><em> age</em></span>.</p></li></ul></div><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="508"><tr><td><img src="../images/Use_Case_tMysqlLastInsertId5.png" width="508"></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the design workspace, select <span class="emphasis"><strong>tMySqlLastInsertId</strong></span>.</p></li><li class="listitem"><p> Click the <span class="emphasis"><strong>Component</strong></span> tab to define the basic
                    settings of <span class="emphasis"><strong>tMySqlLastInserId</strong></span>.</p></li></ul></div><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="415"><tr><td><img src="../images/Use_Case_tMysqlLastInsertId6.png" width="415"></td></tr></table></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> On the <span class="emphasis"><strong>Component List</strong></span>, select the relevant
                        <span class="emphasis"><strong>tMysqlConnection</strong></span>, if more than one
                    connection is used.</p></li><li class="listitem"><p>Click <span class="emphasis"><strong>Sync columns
                    </strong></span>to synchronize columns with the previous component. In the output
                    schema of <span class="emphasis"><strong>tMySqlLastInsertId</strong></span>, you can see the
                    read-only column<span class="emphasis"><em> last_insert_id</em></span> that will fetch the last
                    inserted ID on the existing connection.</p></li></ul></div><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="../images/Use_Case_tMysqlLastInsertId7.png" height="360"></td></tr></table></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>You can select the data type <span class="emphasis"><em>Long</em></span> from the
                    <span class="emphasis"><strong>Type</strong></span> drop-down list in case of a huge number of
                entries.</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the design workspace, select <span class="emphasis"><strong>tLogRow</strong></span> and
                    click the <span class="emphasis"><strong>Component</strong></span> tab to define its basic
                    settings. For more information, see <a class="xref" href="tLogRow.html" title="tLogRow">the section called &#8220;tLogRow&#8221;</a>.</p></li><li class="listitem"><p> Save your job and press <span class="emphasis"><strong>F6</strong></span> to execute
                    it.</p></li></ul></div><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="390"><tr><td><img src="../images/Use_Case_tMysqlLastInsertId8.png" width="390"></td></tr></table></div><p><span class="emphasis"><strong>tMysqlLastInsertId </strong></span>fetched the last inserted ID for
            each line on the existing connection.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tMysqlInput.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-databases-traditional.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tMysqlOutput.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tMysqlInput&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tMysqlOutput</td></tr></table></div></body></html>