<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tBarChart</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-components-rg-en..html" title="Talend Open Studio"><link rel="up" href="ch-businessintelligence.html" title="Chapter&nbsp;3.&nbsp;Business Intelligence components"><link rel="prev" href="ch-businessintelligence.html" title="Chapter&nbsp;3.&nbsp;Business Intelligence components"><link rel="next" href="tDB2SCD.html" title="tDB2SCD"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tBarChart</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch-businessintelligence.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;3.&nbsp;Business Intelligence components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tDB2SCD.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tBarChart"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tBarChart"></a>tBarChart</h2></div></div></div><div class="mediaobject"><img src="../images/tBarChart_icon32_white.png"></div><div class="section" title="tBarChart properties"><div class="titlepage"><div><div><h3 class="title"><a name="d41342e22192"></a>tBarChart properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Component family</strong></span>
							</p>
						</td><td valign="top">
							<p>Business Intelligence/Charts</p>
						</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Function</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p><span class="emphasis"><strong>tBarChart</strong></span> reads data from an
								input flow and transforms the data into a bar chart in a PNG image
								file.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Purpose</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p><span class="emphasis"><strong>tBarChart</strong></span> generates a bar chart
								from the input data to ease technical analysis. </p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Basic settings</strong></span>
							</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
								schema</em></span></p>
						</td><td valign="top">
							<p>A schema is a row description, i.e., it defines the number of
								fields to be processed and passed on to the next component. The
								schema is either built-in or remotely stored in the Repository. </p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>The schema of <span class="emphasis"><strong>tBarChart</strong></span>
									contains three read-only columns named <span class="emphasis"><strong>series</strong></span> (string), <span class="emphasis"><strong>category</strong></span> (string), and <span class="emphasis"><strong>value</strong></span> (integer) respectively, in a fixed order.
									The data in any extra columns will be only passed to the next
									component, if any, without being presented in the bar
									chart.</p></div>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Built-in</strong></span>: The schema is created
								and stored locally for this component only. Related topic: see
										<span class="emphasis"><em>Talend Open Studio User Guide</em></span>. </p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Repository</strong></span>: The schema already
								exists and is stored in the Repository, hence can be reused. Related
								topic: see <span class="emphasis"><em>Talend Open Studio User Guide</em></span>. </p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Sync columns</em></span>
							</p>
						</td><td valign="top">
							<p>Click to synchronize the output file schema with the input file
								schema. The Sync function only displays once the <span class="emphasis"><strong>Row</strong></span> connection is linked with the output
								component.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Generated image path</em></span>
							</p>
						</td><td valign="top">
							<p>Name and path of the output image file. </p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Chart title</em></span>
							</p>
						</td><td valign="top">
							<p>Enter the title of the bar chart to be generated.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Include legend</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box if you want the bar chart to include a
								legend, indicating all series in different colors.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>3Dimensions</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to create an image with 3D effect. By
								default, this check box is selected and the bars representing the
								series of each category will be stacked one over another. If this
								check box is cleared, a 2D image will be created, with the bars
								displayed one besides another along the category axis. </p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Image width</em></span> and <span class="emphasis"><em>Image
									height</em></span>
							</p>
						</td><td valign="top">
							<p>Enter the width and height of the image file, in pixels.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Category axis name</em></span> and <span class="emphasis"><em>Value axis
									name</em></span></p>
						</td><td valign="top">
							<p>Enter the category axis name and value axis name.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Foreground alpha</em></span>
							</p>
						</td><td valign="top">
							<p>Enter an integer in the range of <span class="emphasis"><em>0</em></span> to
									<span class="emphasis"><em>100</em></span> to define the transparency of the
								image. The smaller the number you enter, the more transparent the
								image will be.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Plot orientation</em></span>
							</p>
						</td><td valign="top">
							<p>Select the plot orientation of the bar chart: <span class="emphasis"><strong>VERTICAL</strong></span> or <span class="emphasis"><strong>HORIZONTAL</strong></span>.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Advanced settings</strong></span>
							</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>tStat</em></span>
								<span class="emphasis"><em>Catcher Statistics</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to collect log data at the component
								level.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Usage</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>This component is mainly used as Output component. It requires an
								Input component and <span class="emphasis"><strong>Row</strong></span> main link
								as input.</p>
						</td></tr></tbody></table></div></div><div class="section" title="Scenario: Creating a bar chart from the input data"><div class="titlepage"><div><div><h3 class="title"><a name="d41342e22560"></a>Scenario: Creating a bar chart from the input data</h3></div></div></div><p>This scenario describes a Job that reads source data from a CSV file and transforms
			the data into a bar chart showing a comparison of several large cities. The input file
			is shown below:</p><pre class="programlisting">City;Population(x1000);LandArea(km2);PopulationDensity(people/km2)
Beijing;10233;1418;7620
Moscow;10452;1081;9644
Seoul;10422;605;17215
Tokyo;8731;617;14151
Jakarta;8490;664;12738
New York;8310;789;10452</pre><p>Because the input file has a different structure than the one required by the
				<span class="emphasis"><strong>tBarChart</strong></span> component, this use case uses the
				<span class="emphasis"><strong>tMap</strong></span> component to adapt the source data to the
			three-column schema of <span class="emphasis"><strong>tBarChart</strong></span> so that a temporary
			CSV file can be created as the input to the <span class="emphasis"><strong>tBarChart</strong></span>
			component.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>You will usually use the <span class="emphasis"><strong>tMap</strong></span> component to adjust
				the input schema in accordance with the schema structure of the <span class="emphasis"><strong>tBarChart</strong></span> component. For more information about how to
				use the <span class="emphasis"><strong>tMap</strong></span> component, see <span class="emphasis"><em>Talend Open Studio User
					Guide</em></span> and <a class="xref" href="tMap.html" title="tMap">the section called &#8220;tMap&#8221;</a>.</p></div><p>To ensure correct generation of the temporary input file, a pre-treatment subjob is used to
			delete the temporary file in case it already exists before the main Job is executed; as
			this temporary file serves this specific Job only, a post-treatment subjob is used to
			deleted it after the main Job is executed.</p><div class="section" title="Dropping and linking components"><div class="titlepage"><div><div><h4 class="title"><a name="d41342e22600"></a>Dropping and linking components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop the following components from the <span class="emphasis"><strong>Palette</strong></span> to the design workspace: a <span class="emphasis"><strong>tPrejob</strong></span>, a <span class="emphasis"><strong>tPostjob</strong></span>, two
							<span class="emphasis"><strong>tFileDelete</strong></span> components, two <span class="emphasis"><strong>tFileInputDelimited</strong></span> components, a <span class="emphasis"><strong>tMap</strong></span>, three <span class="emphasis"><strong>tFileOutputDelimited</strong></span> components, and a <span class="emphasis"><strong>tBarChart</strong></span>.</p></li><li class="step" title="Step 2"><p>Connect the <span class="emphasis"><strong>tPrejob</strong></span> component to one
							<span class="emphasis"><strong>tFileDelete</strong></span> component using a <span class="emphasis"><strong>Trigger</strong></span> &gt; <span class="emphasis"><strong>On Component
							Ok</strong></span> connection, and connect the <span class="emphasis"><strong>tPostjob</strong></span> component to the other <span class="emphasis"><strong>tFileDelete</strong></span> component using the same type of connection.
					</p></li><li class="step" title="Step 3"><p>Connect the first <span class="emphasis"><strong>tFileInputDelimited</strong></span> to
						the <span class="emphasis"><strong>tMap</strong></span> component using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span>
						connection.</p></li><li class="step" title="Step 4"><p>Connect the <span class="emphasis"><strong>tMap</strong></span> component to the first
							<span class="emphasis"><strong>tFileOutputDelimited</strong></span> component using a
							<span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> connection, and name the connection <span class="emphasis"><em>Population</em></span>.</p></li><li class="step" title="Step 5"><p>Repeat the step above to connect the <span class="emphasis"><strong>tMap</strong></span>
						component to the other two <span class="emphasis"><strong>tFileOutputDelimited</strong></span> components using <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> connections, and
						name the connections <span class="emphasis"><em>Area</em></span> and <span class="emphasis"><em>Density</em></span> respectively.</p></li><li class="step" title="Step 6"><p>Connect the section <span class="emphasis"><strong>tFileInputDelimited</strong></span>
						to the <span class="emphasis"><strong>tBarChart</strong></span> component using a
							<span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> connection. </p></li><li class="step" title="Step 7"><p>Connect the first <span class="emphasis"><strong>tFileInputDelimited</strong></span>
						component to the second <span class="emphasis"><strong>tFileInputDelimited</strong></span>
						component using a <span class="emphasis"><strong>Trigger</strong></span> &gt; <span class="emphasis"><strong>On Subjob Ok</strong></span> connection.</p></li><li class="step" title="Step 8"><p>Relabel the components to best describe their functionality.</p></li></ol></div><div class="mediaobject" align="center"><img src="../images/use_case_tbarchart02.png" align="middle"></div></div><div class="section" title="Reading the source data"><div class="titlepage"><div><div><h4 class="title"><a name="d41342e22742"></a>Reading the source data</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the first <span class="emphasis"><strong>tFileInputDelimited</strong></span> component, which is labelled <span class="emphasis"><em>Large_Cities</em></span>, to display its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case_tbarchart03.png"></div></li><li class="step" title="Step 2"><p>Fill in the <span class="emphasis"><strong>File name</strong></span> field by browsing
						to the input file.</p></li><li class="step" title="Step 3"><p>In the <span class="emphasis"><strong>Header</strong></span> field, specify the number
						of header rows. In this use case, you have only one header row.</p></li><li class="step" title="Step 4"><p>Click <span class="emphasis"><strong>Edit schema</strong></span> to describe the data
						structure of the input file. In this use case, the input schema is made of
						four columns: <span class="emphasis"><em>City</em></span>, <span class="emphasis"><em>Population</em></span>,
							<span class="emphasis"><em>Area</em></span>, and <span class="emphasis"><em>Density</em></span>. Upon
						defining the column names and data types, click <span class="emphasis"><strong>OK</strong></span> to close the schema dialog box.</p><div class="mediaobject" align="center"><img src="../images/use_case_tbarchart04.png" align="middle"></div></li></ol></div></div><div class="section" title="Adapting the source data to the tBarChart schema"><div class="titlepage"><div><div><h4 class="title"><a name="d41342e22797"></a>Adapting the source data to the tBarChart schema</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the <span class="emphasis"><strong>tMap</strong></span> to open the
							<span class="emphasis"><strong>Map Editor</strong></span>.</p><p>You can see an input table on the input panel, <span class="emphasis"><em>row1</em></span> in this example, and three empty output tables, named
							<span class="emphasis"><em>Population</em></span>, <span class="emphasis"><em>Area</em></span>, and <span class="emphasis"><em>Density</em></span> on the
						output panel. </p></li><li class="step" title="Step 2"><p>Use the <span class="emphasis"><strong>Schema editor</strong></span> to add three
						columns to each output table: <span class="emphasis"><em>series</em></span> (string),
							<span class="emphasis"><em>category</em></span> (string), and <span class="emphasis"><em>value</em></span>
						(integer).</p></li><li class="step" title="Step 3"><p>In the relevant <span class="emphasis"><strong>Expression</strong></span> field of the
						output tables, enter the text to be presented in the legend area of the bar
						chart, <code class="code">"Population (x1000 people)"</code>, <code class="code">"Land area
							(km2)"</code>, and <code class="code">"Population density (people/km2)"</code>
						respectively in this example. </p></li><li class="step" title="Step 4"><p>Drop the <span class="emphasis"><em>City</em></span> column of the input table onto the
							<span class="emphasis"><em>category</em></span> column of each output table. </p></li><li class="step" title="Step 5"><p>Drop the <span class="emphasis"><em>Population</em></span> column of the input table onto
						the <span class="emphasis"><em>value</em></span> column of the <span class="emphasis"><em>Population</em></span>
						table. </p></li><li class="step" title="Step 6"><p>Drop the <span class="emphasis"><em>Area</em></span> column of the input table onto the
							<span class="emphasis"><em>value</em></span> column of the <span class="emphasis"><em>Area</em></span>
						table. </p></li><li class="step" title="Step 7"><p>Drop the <span class="emphasis"><em>Density</em></span> column of the input table onto the
							<span class="emphasis"><em>value</em></span> column of the <span class="emphasis"><em>Density</em></span>
						table. </p><div class="mediaobject" align="center"><img src="../images/use_case_tbarchart05.png" align="middle"></div></li><li class="step" title="Step 8"><p>Click <span class="emphasis"><strong>OK</strong></span> to save the mappings and close
						the <span class="emphasis"><strong>Map Editor</strong></span> and propagate the output
						schemas to the output components.</p></li></ol></div></div><div class="section" title="Generating the temporary input file"><div class="titlepage"><div><div><h4 class="title"><a name="d41342e22911"></a>Generating the temporary input file</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the first <span class="emphasis"><strong>tFileOutputDelimited</strong></span> component to display its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case_tbarchart06.png"></div></li><li class="step" title="Step 2"><p>In the <span class="emphasis"><strong>File Name</strong></span> field, define a
						temporary CSV file to send the mapped data flows to. In this use case, we
						name this file <span class="emphasis"><em>Temp.csv</em></span>. This file will be used as the
						input to the <span class="emphasis"><strong>tBarChart</strong></span> component.</p></li><li class="step" title="Step 3"><p>Select the <span class="emphasis"><strong>Append</strong></span> check box.</p></li><li class="step" title="Step 4"><p>Repeat the steps above to define the properties of the other two <span class="emphasis"><strong>tFileOutputDelimited</strong></span> components, using exactly
						the same settings as in the first <span class="emphasis"><strong>tFileOutputDelimited</strong></span> component.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Note that the order of output flows from the <span class="emphasis"><strong>tMap</strong></span> component is not necessarily the actual order of
							writing data to the target file. To ensure the target file is correctly
							generated, delete the file by the same name if it already exists before
							Job execution and select the <span class="emphasis"><strong>Append</strong></span>
							check box in all the <span class="emphasis"><strong>tFileOutputDelimited</strong></span> components in this step.</p></div></li></ol></div></div><div class="section" title="Configuring bar chart generation"><div class="titlepage"><div><div><h4 class="title"><a name="d41342e22966"></a>Configuring bar chart generation</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the second <span class="emphasis"><strong>tFileInputDelimited</strong></span> component, which is labelled <span class="emphasis"><em>Temp_Input</em></span>, to display its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject" align="center"><img src="../images/use_case_tbarchart07.png" align="middle"></div></li><li class="step" title="Step 2"><p>Fill in the <span class="emphasis"><strong>File name</strong></span> field with the path
						to the temporary input file generated by the <span class="emphasis"><strong>tFileOutputDelimited</strong></span> components. In this use case, the
						temporary input file to the <span class="emphasis"><strong>tBarChart</strong></span> is
							<span class="emphasis"><em>Temp.csv</em></span>.</p></li><li class="step" title="Step 3"><p>Double-click the <span class="emphasis"><strong>tBarChart</strong></span> component to
						display its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject" align="center"><img src="../images/use_case_tbarchart08.png" align="middle"></div></li><li class="step" title="Step 4"><p>In the <span class="emphasis"><strong>Generated image path</strong></span> field, define
						the file path of the image file to be generated. </p></li><li class="step" title="Step 5"><p>In the <span class="emphasis"><strong>Chart title</strong></span> field, define a title
						for the bar chart. </p></li><li class="step" title="Step 6"><p>Define the category and series axis names. </p></li><li class="step" title="Step 7"><p>Define the size and transparency degree of the image if needed. In this
						use case, we simply use the default settings.</p></li><li class="step" title="Step 8"><p>Click <span class="emphasis"><strong>Edit schema</strong></span> to open the schema
						dialog box.</p><div class="mediaobject" align="center"><img src="../images/use_case_tbarchart09.png" align="middle"></div></li><li class="step" title="Step 9"><p>Copy all the columns from the output schema to the input schema by
						clicking the left-pointing double arrow button. Then, click <span class="emphasis"><strong>OK</strong></span> to close the schema dialog box.</p></li></ol></div></div><div class="section" title="Deleting the temporary file"><div class="titlepage"><div><div><h4 class="title"><a name="d41342e23045"></a>Deleting the temporary file</h4></div></div></div><p>As the <span class="emphasis"><strong>tPrejob</strong></span> and <span class="emphasis"><strong>tPostjob</strong></span> components simply trigger the connected subjobs and do not
				have any settings to define, all you need to do is to define the properties of the
				two <span class="emphasis"><strong>tFileDelete</strong></span> components. </p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the first <span class="emphasis"><strong>tFileDelete</strong></span>
						component to display its <span class="emphasis"><strong>Basic settings</strong></span>
						view.</p><div class="mediaobject" align="center"><img src="../images/use_case_tbarchart11.png" align="middle"></div></li><li class="step" title="Step 2"><p>Fill in the <span class="emphasis"><strong>File name</strong></span> field with the path
						to the temporary input file.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Failure of the pre-treatment subjob, for example, when the file to delete does not exist
							while the <span class="emphasis"><strong>Fail on error</strong></span> check box is
							selected, will not prevent the main subjob from being launched. You can
							clear the <span class="emphasis"><strong>Fail on error</strong></span> check box to
							avoid seeing error messages. </p></div></li><li class="step" title="Step 3"><p>Specify the same file path in the other <span class="emphasis"><strong>tFileDelete</strong></span> component.</p></li></ol></div></div><div class="section" title="Executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d41342e23093"></a>Executing the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Press <span class="emphasis"><strong>Ctrl+S</strong></span> to save your Job.</p></li><li class="step" title="Step 2"><p>Press <span class="emphasis"><strong>F6</strong></span> to launch it. </p><p> A bar chart is generated, showing a graphical comparison of the specified
						large cities. </p><div class="mediaobject" align="center"><img src="../images/use_case_tbarchart10.png" align="middle"></div></li></ol></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch-businessintelligence.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-businessintelligence.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tDB2SCD.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;3.&nbsp;Business Intelligence components&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tDB2SCD</td></tr></table></div></body></html>