<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Dynamic HTML">
    <meta name="LASTUPDATED" content="04/28/11 19:32:57">
    <title>Scenario 1: Fetching data through HTTP</title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tFileFetch_Prop.html"><img id="LongDescNotReq1" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="Components09-04.html"><img id="LongDescNotReq2" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp3661411"> </a><div style="color: #000000; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp3661418"> </a><h2 class="pHeading2">
Scenario 1: Fetching data through HTTP
</h2>
<a name="wp3661421"> </a><p class="pIndented1">
This scenario describes a three-component Job which retrieves data from an HTTP website and select data that will be stored in a delimited file. 
</p>
<a name="wp3661429"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFileFetch1.png" id="wp3661426" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3661443"> </a><div class="pSmartList2"><li>Drop a <b class="cBold">tFileFetch</b>, a <b class="cBold">tFileInputRegex</b> and a <b class="cBold">tFileOutputDelimited</b> onto your design workspace and connect them as preceding.</li></div>
<a name="wp3661453"> </a><div class="pSmartList2"><li>In the <b class="cBold">tFileFetch</b> <b class="cBold">Basic settings</b> panel, select the protocol you want to use from the list. Here, use the HTTP protocol.</li></div>
<a name="wp3661458"> </a><div class="pSmartList2"><li>Type in the URI where the file to be fetched can be retrieved from.</li></div>
<a name="wp3661465"> </a><div class="pSmartList2"><li>In the <b class="cBold">Destination directory</b> field, browse to the folder where the fetched file is to be stored. </li></div>
<a name="wp3661471"> </a><div class="pSmartList2"><li>In the <b class="cBold">Filename</b> field, type in a new name for the file if you want it to be changed. In this example, <em class="cEmphasis">filefetch.txt</em>.</li></div>
<a name="wp3661481"> </a><div class="pSmartList2"><li>If needed, select the <b class="cBold">Add header</b> check box and define one or more HTTP request headers as fetch conditions. For example, to fetch the file only if it has been modified since 19:43:31 GMT, October 29, 1994, fill in the <b class="cBold">Name</b> and <b class="cBold">Value</b> fields with &quot;If-Modified-Since&quot; and &quot;Sat, 29 Oct 1994 19:43:31 GMT&quot; respectivley in the <b class="cBold">Headers</b> table. For details about HTTP request header definitions, see <em class="cEmphasis"><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14">Header Field Definitions</a></em>. </li></div>
<a name="wp3661505"> </a><div class="pSmartList2"><li>Select the <b class="cBold">tFileInputRegex</b>, set the <b class="cBold">File name</b> so that it corresponds to the file fetched earlier.</li></div>
<a name="wp3661512"> </a><div class="pSmartList2"><li>Using a regular expression, in the <b class="cBold">Regex </b>field, select the relevant data from the fetched file. In this example: &lt;td(?: class=&quot;leftalign&quot;)?&gt; \s* (t\w+) \s* &lt;/td&gt; </li></div>
<a name="wp3661520"> </a><p class="pBodyRelative">
<br />
<img src="../Images/warning_smalljl.png" align="left" id="wp3661518" border="0" hspace="0" vspace="0"/><br />
Ensure that you use the correct Regex syntax, depending on the generation language in use as the syntax is different in Java <em style="font-style: italic" class="cEmphasis">and</em><span style="font-style: normal"> </span><em style="font-style: italic" class="cEmphasis">Perl</em>. Enter the Regex between double or single quotes accordingly.
</p>
<a name="wp3661542"> </a><div class="pSmartList2"><li>Define the <b class="cBold">header</b>, <b class="cBold">footer</b> and <b class="cBold">limit</b> if need be. In this case, ignore these fields.</li></div>
<a name="wp3661546"> </a><div class="pSmartList2"><li>Define also the schema describing the flow to be passed on to the final output.</li></div>
<a name="wp3661549"> </a><div class="pSmartList2"><li>The schema should be automatically propagated to the final output, but to be sure, check the schema in the <b class="cBold">Basic settings</b> panel of the <b class="cBold">tFileOutputDelimited </b>component.</li></div>
<a name="wp3661565"> </a><div class="pSmartList2"><li>Then press <b class="cBold">F6</b> to run the Job.</li></div>
</ul></div>
</ul></div>
<a name="wp3661571"> </a><h2 class="pHeading2">
Scenario 2: Reusing stored cookie to fetch files through HTTP
</h2>
<a name="wp3661574"> </a><p class="pIndented1">
This scenario describes a two-component Job which logs in a given HTTP website and then using cookie stored in a user-defined local directory, fetches data from this website. 
</p>
<a name="wp3661582"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFileFetch2.png" id="wp3661579" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3661593"> </a><div class="pSmartList2"><li>Drop two <b class="cBold">tFileFetch</b> onto your design workspace and connect them using the <b class="cBold">OnSubjobOk</b> link.</li></div>
<a name="wp3661602"> </a><div class="pSmartList2"><li>Double click <b class="cBold">tFileFetch_1</b> to open its component view.</li></div>
</ul></div>
</ul></div>
<a name="wp3661609"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFileFetch3.png" id="wp3661606" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3661620"> </a><div class="pSmartList2"><li>In the <b class="cBold">Procotol</b> field, select the protocol you want to use from the list. Here, we use the <em class="cEmphasis">HTTP</em> protocol.</li></div>
<a name="wp3661627"> </a><div class="pSmartList2"><li>In the <b class="cBold">URI</b> field, type in the URI through which you can log in the website and fetch the web page accordingly. In this example, the URI is <code class="cCode">http://www.codeproject.com/script/Membership/LogOn.aspx?rp=http%3a%2f%2fwww.codeproject.com%2fKB%2fcross-platform%2fjavacsharp.aspx&amp;download=true</code>.</li></div>
<a name="wp3661637"> </a><div class="pSmartList2"><li>In the <b class="cBold">Destination directory</b> field, browse to the folder where the fetched file is to be stored. This folder will be created on the fly if it does not exist. In this example, type in <em class="cEmphasis">C:/Logpage</em>.</li></div>
<a name="wp3661647"> </a><div class="pSmartList2"><li>In the <b class="cBold">Destination Filename</b> field, type in a new name for the file if you want it to be changed. In this example, <em class="cEmphasis">webpage.html</em>.</li></div>
<a name="wp3661658"> </a><div class="pSmartList2"><li>Under the <b class="cBold">Parameters</b> table, click the plus button to add two rows.</li></div>
<a name="wp3661667"> </a><div class="pSmartList2"><li>In the <b class="cBold">Name</b> column of the <b class="cBold">Parameters</b> table, type in a new name respectively for the two rows. In this example, they are <em class="cEmphasis">Email</em> and <em class="cEmphasis">Password</em>, which are required by the website you are logging in.</li></div>
<a name="wp3661681"> </a><div class="pSmartList2"><li>In the <b class="cBold">Value</b> column, type in the authentication information.</li></div>
<a name="wp3661691"> </a><div class="pSmartList2"><li>Select the <b class="cBold">Save cookie</b> check box to activate the <b class="cBold">Cookie directory</b> field.</li></div>
<a name="wp3661697"> </a><div class="pSmartList2"><li>In the <b class="cBold">Cookie directory</b> field, browse to the folder where you want to store cookie file and type in a name for the cookie to be saved. This folder must exist already. In this example, the directory is <em class="cEmphasis">C:/temp/Cookie</em>.</li></div>
<a name="wp3661712"> </a><div class="pSmartList2"><li>Double click <b class="cBold">tFileFetch_2</b> to open its <b class="cBold">Component</b> view.</li></div>
</ul></div>
</ul></div>
<a name="wp3661719"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFileFetch4.png" id="wp3661716" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3661731"> </a><div class="pSmartList2"><li>In the <b class="cBold">Procotol</b> list, select <b class="cBold">http</b>.</li></div>
<a name="wp3661737"> </a><div class="pSmartList2"><li>In the <b class="cBold">URI</b> field, type in the address from which you fetch the files of your interest. In this example, the address is <code class="cCode">http://www.codeproject.com/KB/java/RemoteShell/RemoteShell.zip</code>.</li></div>
<a name="wp3661747"> </a><div class="pSmartList2"><li>In the <b class="cBold">Destination directory</b> field, type in the directory or browse to the folder where you want to store the fetched files. This folder can be automatically created if it does not exist yet during the execution process. In this example, type in <em class="cEmphasis">C:/JavaProject</em>.</li></div>
<a name="wp3661757"> </a><div class="pSmartList2"><li>In the <b class="cBold">Destination Filename</b> field, type in a new name for the file if you want it to be changed. In this example, <em class="cEmphasis">RemoteShell.zip</em>.</li></div>
<a name="wp3661771"> </a><div class="pSmartList2"><li>Clear the <b class="cBold">Post method</b> check box to deactivate the <b class="cBold">Parameter</b> table.</li></div>
<a name="wp3661781"> </a><div class="pSmartList2"><li>Select the <b class="cBold">Read cookie</b> check box to activate the <b class="cBold">Cookie directory</b> field.</li></div>
<a name="wp3661787"> </a><div class="pSmartList2"><li>In the <b class="cBold">Cookie directory</b> field, type in the directory or browse to the cookie file you have saved and need to use. In this example, the directory is <em class="cEmphasis">C:/temp/Cookie</em>.</li></div>
<a name="wp3661798"> </a><div class="pSmartList2"><li>Then press <b class="cBold">F6</b> to run the Job.</li></div>
<a name="wp3661804"> </a><div class="pSmartList2"><li>Check each folder you have used to store the fetched files.</li></div>
</ul></div>
</ul></div>
<a name="wp3661810"> </a><h2 class="pHeading2">
Related scenario: Reading the data from a remote file in streaming mode
</h2>
<a name="wp3661816"> </a><p class="pIndented1">
For an example of transferring data in streaming mode, see <a href="tFileFetch_Scenario.html#wp3661810"><em class="cEmphasis">Related scenario: Reading the data from a remote file in streaming mode</em></a>
</p>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tFileFetch_Prop.html"><img id="LongDescNotReq3" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="Components09-04.html"><img id="LongDescNotReq4" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
