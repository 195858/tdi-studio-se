<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Dynamic HTML">
    <meta name="LASTUPDATED" content="04/30/09 15:23:55">
    <title>Scenario: Extracting data from an EBCDIC file and populating a database</title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tFileInputEBCDIC_Prop.html"><img id="LongDescNotReq1" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tFileInputFullRow_Prop.html"><img id="LongDescNotReq2" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp2090402"> </a><div style="color: #000000; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp2090407"> </a><h2 class="pHeading2">
Scenario: Extracting data from an EBCDIC file and populating a database
</h2>
<a name="wp2188631"> </a><p class="pBodyRelative">
</p>
<div><table border="0" cellpadding="0" cellspacing="0" align="left"><img src="images/bulb_small.png" align="left" id="wp2188629" border="0" hspace="0" vspace="0"/></table></div><p class="pBodyRelative">
This scenario uses the Copybook Connection wizard that guides users through the different steps to create a Copybook connection and to retrieve the EBCDIC schemas. This Copybook Connection wizard is available only for <b class="cBold">Talend Integration Suite </b>users. If you are using <b class="cBold">Talend Open Studio</b>, you need to set the basic settings for the <b class="cBold">tFileInputEBCDIC</b> component manually. 
</p>
<a name="wp2188808"> </a><p class="pIndented1">
The following scenario is a four-component job. The objective is to read an EBCDIC file which contains information concerning clients and their financial transactions, to extract and to transform this data. Two tables will then be created in a database, based on the two schemas, clients and transactions, extracted from the original EBCDIC file. 
</p>
<a name="wp2188816"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tFileInputEBCDIC1.png" id="wp2188813" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp2188950"> </a><p class="pIndented1">
This Java scenario uses the <b class="cBold">EBCDIC Connection</b> wizard to set up a connection to the Copybook file and to generate an xc2j file, which allows the retrieval and transformation of the different file schemas. 
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2188956"> </a><div class="pSmartList2"><li>Create a connection to the Copybook file, which describes the structure of your EBCDIC file. In this scenario, the Copybook connection is called <em class="cEmphasis">EBCDIC</em>. For more information on how to set up a Copybook connection, see&#160;<em class="cEmphasis">Setting up a Copybook connection.</em> of <b class="cBold">Talend Open Studio</b> User Guide.</li></div>
<a name="wp2189146"> </a><div class="pSmartList2"><li>Retrieve the file schemas. For more information on how to retrieve schemas from the Copybook file, see <em class="cEmphasis">Step&#160;4: collecting the schemas</em> of <b class="cBold">Talend Open Studio</b> User Guide.</li></div>
</ul></div>
</ul></div>
<a name="wp2189249"> </a><p class="pIndented1">
Once the Copybook connection has been created and the schemas retrieved, using the EBCDIC and Schema wizards, the new schemas appear under the node <b class="cBold">Metadata</b> &gt; <b class="cBold">Copybook</b>. They are called <em class="cEmphasis">01</em>, <em class="cEmphasis">04</em> and <em class="cEmphasis">05</em>.
</p>
<a name="wp2090492"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tFileInputEBCDIC2.png" id="wp2090489" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp2189377"> </a><p class="pIndented1">
In order to retrieve the different file structures and to use them in <b class="cBold">Talend Open Studio</b>:
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2189388"> </a><div class="pSmartList2"><li>In the <b class="cBold">Repository</b>, press <b class="cBold">Ctrl+Shift</b> and click schema <em class="cEmphasis">01</em>, then drop it into the workspace. This automatically creates the <b class="cBold">tFileInputEBCDIC </b>input component.</li></div>
<a name="wp2189517"> </a><div class="pSmartList2"><li>Click and Drop the <b class="cBold">tMysqlOutput </b>component.</li></div>
<a name="wp2189518"> </a><div class="pSmartList2"><li>Double-click  the <b class="cBold">tFileInputEBCDIC</b> to display the <b class="cBold">Basic settings </b>tab in the <b class="cBold">Component</b> view, then define the component properties:</li></div>
</ul></div>
</ul></div>
<a name="wp2090545"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tFileInputEBCDIC3.png" id="wp2090542" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2189914"> </a><div class="pSmartList2"><li>The metadata automatically fills in the <b class="cBold">Property Type</b>, <b class="cBold">Schema</b> and <b class="cBold">Xc2j file</b> fields. The <b class="cBold">Property Type </b>field shows which metadata has been used for the component. The <b class="cBold">Schema </b>field shows which schema will be transmitted to the following component. The <b class="cBold">Xc2j file </b>field shows the path to the file which enables to extract the schema describing the EBCDIC file structure. If you are in <b class="cBold">Built-In</b> mode, you have to fill these fields manually.</li></div>
<a name="wp2189607"> </a><div class="pSmartList2"><li>In the <b class="cBold">Data file</b> field, fill in the path to the EBCDIC data file.</li></div>
<a name="wp2190034"> </a><div class="pSmartList2"><li>In the workspace, right-click the <b class="cBold">tFileInputEBCDIC</b>, select <b class="cBold">Row</b> &gt; <b class="cBold">row_01_1</b> from the menu, then click the <b class="cBold">tMysqlOutput</b> to connect the components.</li></div>
<a name="wp2190991"> </a><div class="pSmartList2"><li>Double-click the <b class="cBold">tMysqlOutput</b> to display the <b class="cBold">Basic settings</b> tab in the <b class="cBold">Component</b> view, then define the component properties:</li></div>
</ul></div>
</ul></div>
<a name="wp2191000"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tFileInputEBCDIC4.png" id="wp2190997" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2191011"> </a><div class="pSmartList2"><li>In the <b class="cBold">Property Type</b> list, select <b class="cBold">Repository</b> and click the button <b class="cBold">[...]</b>. Select the database connection you want to use, which is centralized in the metadata of the <b class="cBold">Repository</b>. The <b class="cBold">Host</b>, <b class="cBold">Port</b>, <b class="cBold">Database</b>, <b class="cBold">Username</b> and <b class="cBold">Password</b> fields are automatically filled. If you are in <b class="cBold">Built-In</b> mode, you have to fill these fields manually.</li></div>
<a name="wp2191033"> </a><div class="pSmartList2"><li>In the <b class="cBold">Table</b> field, enter the name of the table to be created, which will contain the data extracted from the EBCDIC file.</li></div>
<a name="wp2191037"> </a><div class="pSmartList2"><li>In the <b class="cBold">Action on table </b>field, select the option <b class="cBold">Create table</b>.</li></div>
</ul></div>
</ul></div>
<a name="wp2191115"> </a><p class="pIndented1">
At this stage, the job retrieves the schema <em class="cEmphasis">01</em> from the EBCDIC file and transfers it, as well as the corresponding data, to the database. We now need to retrieve, from the EBCDIC file, the schema <em class="cEmphasis">04 </em>and its data, then transform and transmit the data to the same database. To do this:
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2191223"> </a><div class="pSmartList2"><li>Click and drop the <b class="cBold">tMap</b> and <b class="cBold">tMysqlOutputBulkExec</b> components into the workspace.</li></div>
<a name="wp2192064"> </a><div class="pSmartList2"><li>Double-click the <b class="cBold">tFileInputEBCDIC</b> to display the <b class="cBold">Basic settings</b> tab in the <b class="cBold">Component</b> view, then define the component properties:</li></div>
</ul></div>
</ul></div>
<a name="wp2192073"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tFileInputEBCDIC5.png" id="wp2192070" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2192086"> </a><div class="pSmartList2"><li>In the <b class="cBold">Schema(s)</b> field, click the <b class="cBold">(+)</b> button to add a line and click this line. The button <b class="cBold">[...]</b> appears at the end of the field, click it to open the wizard. Select <b class="cBold">Create schema from repository</b> from the wizard to retrieve the schema defined in the the EBCDIC metadata, then select <em class="cEmphasis">04</em> from the drop-down list. Click <b class="cBold">OK</b>.</li></div>
<a name="wp2192296"> </a><div class="pSmartList2"><li>If you did not retrieve the schema from the <b class="cBold">Repository</b>, select <b class="cBold">Create schema for built-in</b> and manually enter the name and description of your schema.</li></div>
<a name="wp2192300"> </a><div class="pSmartList2"><li>The two schemas <em class="cEmphasis">01</em> and <em class="cEmphasis">04</em> appear in the <b class="cBold">Schema(s)</b> field of the <b class="cBold">tFileInputEBCDIC</b> component.</li></div>
<a name="wp2192304"> </a><div class="pSmartList2"><li>In order to connect these two components, right-click the <b class="cBold">tFileInputEBCDIC</b>, select <b class="cBold">Row</b>&#160;&gt;&#160;<b class="cBold">row_04_1</b> in the menu and click the <b class="cBold">tMap</b> component. Then right-click the <b class="cBold">tMap</b>, drag a link over to the <b class="cBold">tMysqlOutputBulkExec</b> and release the right-click button. In the wizard that opens up, fill in the name of the <em class="cEmphasis">ebcdic_04 </em>output file. </li></div>
<a name="wp2192337"> </a><div class="pSmartList2"><li>Double-click the <b class="cBold">tMap</b> to open up the <b class="cBold">tMapEditor</b>. </li></div>
</ul></div>
</ul></div>
<a name="wp2090788"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tFileInputEBCDIC6.png" id="wp2090785" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2192471"> </a><div class="pSmartList2"><li>Select all the columns from the <b class="cBold">row_04_1</b> table and drag them towards the <b class="cBold">ebcdic_04</b> table.</li></div>
<a name="wp2192472"> </a><div class="pSmartList2"><li>In the table <b class="cBold">ebcdic_04</b>, located in the <b class="cBold">Schema editor</b> area at the bottom of the editor, click the <b class="cBold">(+)</b> button to add a column to the schema. Name this column <em class="cEmphasis">SUM_AG_NUMBER</em>.</li></div>
<a name="wp2192473"> </a><div class="pSmartList2"><li>In the table <b class="cBold">row_04_1</b>, to the left of the editor, press <b class="cBold">Ctrl</b> and select the <b class="cBold">CC01404_L_11_MENAG_1_1</b> and <b class="cBold">CC01404_AG_CAM_1_1 </b>columns. Drag them to the new column <em class="cEmphasis">SUM_AG_NUMBER</em> in table <b class="cBold">ebcdic_04</b>. Add the sign + between the two concatenated columns so that you have: <code class="cCode">row_04_1.CC01404_L_11_MENAG_1_1&#160;+&#160;row_04_1.CC01404_AG_CAM_1_1</code>.</li></div>
<a name="wp2192475"> </a><div class="pSmartList2"><li>Click <b class="cBold">OK</b>..</li></div>
<a name="wp2192476"> </a><div class="pSmartList2"><li>In the workspace, double-click the <b class="cBold">tMysqlOutputBulkExec</b> to display the <b class="cBold">Basic settings</b> tab in the <b class="cBold">Component</b> view, then define the component properties:</li></div>
</ul></div>
</ul></div>
<a name="wp2090866"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tFileInputEBCDIC7.png" id="wp2090863" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp2193433"> </a><div class="pSmartList2"><li>In the <b class="cBold">Property Type</b> list, select <b class="cBold">Repository</b> and click the button <b class="cBold">[...]</b>. You need to select the database connection you want to use, which is centralized in the metadata of the <b class="cBold">Repository</b>. The <b class="cBold">Host</b>, <b class="cBold">Port</b>, <b class="cBold">Database</b>, <b class="cBold">Username</b> and <b class="cBold">Password</b> fields are automatically filled. If you are in <b class="cBold">Built-In</b> mode, you have to fill these fields manually.</li></div>
<a name="wp2193457"> </a><div class="pSmartList2"><li>In the <b class="cBold">Table</b> field, enter the name of the table to be created, which will contain the data extracted from the EBCDIC file.</li></div>
<a name="wp2193462"> </a><div class="pSmartList2"><li>In the <b class="cBold">Action on table </b>field, select the option <b class="cBold">Create table</b>.</li></div>
<a name="wp2193466"> </a><div class="pSmartList2"><li>Press Ctrl+S to save your Job and click the <b class="cBold">Run</b> view. Tick the Statistics and Exec time boxes, then click <b class="cBold">Run</b> to execute the job.</li></div>
</ul></div>
</ul></div>
<a name="wp2193490"> </a><p class="pIndented1">
The two tables have been created in the database. They contain the structure, as well as the clients and transaction data, from the original EBCDIC file.                                              
</p>
<a name="wp2090947"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Components-09-20-077.jpg" height="227" width="626" id="wp2090941" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tFileInputEBCDIC_Prop.html"><img id="LongDescNotReq3" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tFileInputFullRow_Prop.html"><img id="LongDescNotReq4" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
