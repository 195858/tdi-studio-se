<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Dynamic HTML">
    <meta name="LASTUPDATED" content="04/28/11 19:31:31">
    <title>Scenario: Inserting data in parent/child tables</title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tAccessConnection_Prop.html"><img id="LongDescNotReq1" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tAccessInput_Prop.html"><img id="LongDescNotReq2" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp4194307"> </a><div style="color: #000000; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp4194312"> </a><h2 class="pHeading2">
Scenario: Inserting data in parent/child tables
</h2>
<a name="wp4194315"> </a><p class="pIndented1">
The following Job is dedicated to advanced database users, who want to carry out multiple table insertions using a parent table <em class="cEmphasis">Table1</em> to generate two child tables: <em class="cEmphasis">Name</em> and  <em class="cEmphasis">Birthday</em>.
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp4194327"> </a><div class="pSmartList2"><li>In Access 2007, create an Access database named <em class="cEmphasis">Database1</em>.</li></div>
<a name="wp4191672"> </a><div class="pSmartList2"><li>Once the Access database is created, create a table named <em class="cEmphasis">Table1</em> with two column headings: <em class="cEmphasis">Name</em> and <em class="cEmphasis">Birthday</em>. </li></div>
</ul></div>
</ul></div>
<a name="wp4191686"> </a><p class="pIndented1">
Back into <b class="cBold">Talend Integration Suite Studio</b>, the Job requires twelve components including <b class="cBold">tAccessConnection</b>, <b class="cBold">tAccessCommit</b>, <b class="cBold">tAccessInput</b>, <b class="cBold">tAccessOutput</b> and<b class="cBold"> tAccessClose</b>.
</p>
<a name="wp4193204"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tAccessConnection1.png" id="wp4191700" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp4191723"> </a><div class="pSmartList2"><li>Drop the following components from the <b class="cBold">Palette</b> to the design workspace: <b class="cBold">tFileList</b>, <b class="cBold">tFileInputDelimited</b>, <b class="cBold">tMap</b>, <b class="cBold">tAccessOutput</b> (x2), <b class="cBold">tAccessInput</b> (x2), <b class="cBold">tAccessCommit</b>,   <b class="cBold">tAccessClose</b> and <b class="cBold">tLogRow</b> (x2).</li></div>
<a name="wp4191744"> </a><div class="pSmartList2"><li>Connect the <b class="cBold">tFileList</b> component to the input file component using an <b class="cBold">Iterate</b> link. Thus, the name of the file to be processed will be dynamically filled in from the <b class="cBold">tFileList</b> directory using a global variable. </li></div>
<a name="wp4191761"> </a><div class="pSmartList2"><li>Connect the <b class="cBold">tFileInputDelimited</b> component to the <b class="cBold">tMap</b> component and dispatch the flow between the two output Access components. Use a <b class="cBold">Row</b> link for each of these connections representing the main data flow.</li></div>
<a name="wp4191774"> </a><div class="pSmartList2"><li>Set the <b class="cBold">tFileList</b> component properties, such as the directory where files will be fetched from.</li></div>
<a name="wp4288249"> </a><div class="pSmartList2"><li>Add a <b class="cBold">tAccessConnection</b> component and connect it to the starter component of this Job. In this example, the <b class="cBold">tFileList</b> component uses an <b class="cBold">OnComponentOk</b> link to define the execution order.</li></div>
<a name="wp4288640"> </a><div class="pSmartList2"><li>In the <b class="cBold">tAccessConnection</b> Component view, set the connection details manually or fetch them from the <b class="cBold">Repository</b> if you centrally store them as a Metadata DB connection entry. For more information about Metadata, see <em class="cEmphasis">How to centralize the Metadata items</em> in <b class="cBold">Talend Integration Suite Studio</b> <b class="cBold">User Guide</b>.</li></div>
<a name="wp4288665"> </a><div class="pSmartList2"><li>In the <b class="cBold">tFileInputDelimited</b> component&#39;s <b class="cBold">Basic settings</b> view, press <b class="cBold">Ctrl+Space</b> bar to access the variable list. Set the <b class="cBold">File Name</b> field to the global variable: <em class="cEmphasis">tFileList_1.CURRENT_FILEPATH</em>. For more information about using variables, see <em class="cEmphasis">How to use variables in a Job</em> in <b class="cBold">Talend Integration Suite Studio</b> <b class="cBold">User Guide</b>.</li></div>
</ul></div>
</ul></div>
<a name="wp4288683"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tAccessConnection2.png" id="wp4288680" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp4288687"> </a><div class="pSmartList2"><li>Set the rest of the fields as usual, defining the row and field separators according to your file structure.</li></div>
<a name="wp4191863"> </a><div class="pSmartList2"><li>Then set the schema manually through the<b class="cBold"> Edit schema</b> dialog box or select the schema from the <b class="cBold">Repository</b>. Make sure the data type is correctly set, in accordance with the nature of the data processed.</li></div>
<a name="wp4191872"> </a><div class="pSmartList2"><li>In the <b class="cBold">tMap</b> Output area, add two output tables, one called <em class="cEmphasis">Name</em> for the <em class="cEmphasis">Name</em> table, the second called <em class="cEmphasis">Birthday</em>, for the <em class="cEmphasis">Birthday</em> table. For more information about the <b class="cBold">tMap</b> component, see <em class="cEmphasis">tMap operation overview</em> in <b class="cBold">Talend Integration Suite Studio</b> <b class="cBold">User Guide</b>.</li></div>
<a name="wp4191886"> </a><div class="pSmartList2"><li>Drag the <em class="cEmphasis">Name</em> column from the <b class="cBold">Input</b> area, and drop it to the <em class="cEmphasis">Name</em> table.</li></div>
<a name="wp4191900"> </a><div class="pSmartList2"><li>Drag the <em class="cEmphasis">Birthday</em> column from the <b class="cBold">Input</b> area, and drop it to the <em class="cEmphasis">Birthday</em> table.</li></div>
</ul></div>
</ul></div>
<a name="wp4191909"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tAccessConnection3.png" id="wp4191905" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp4191921"> </a><div class="pSmartList2"><li>Then connect the output row links to distribute the flow correctly to the relevant DB output components.</li></div>
<a name="wp4191937"> </a><div class="pSmartList2"><li>In each of the <b class="cBold">tAccessOutput</b> components&#39; <b class="cBold">Basic settings</b> view, select the <b class="cBold">Use an existing connection</b> check box to retrieve the <b class="cBold">tAccessConnection</b> details. </li></div>
<a name="wp4195015"> </a><p class="pBodyRelative">
<br />
<img src="../Images/bulb_smalljj.png" align="left" id="wp4195007" border="0" hspace="0" vspace="0"/><br />
In Perl version, the Commit every field does not show anymore as you are supposed to use the tAccessCommit instead to manage the global transaction commit. In Java version, ignore the field as this command will get overridden by the tAccessCommit.
</p>
</ul></div>
</ul></div>
<a name="wp4195029"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tAccessConnection4.png" id="wp4195026" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp4195036"> </a><div class="pSmartList2"><li>Set the <b class="cBold">Table</b> name making sure it corresponds to the correct table, in this example either <em class="cEmphasis">Name</em> or <em class="cEmphasis">Birthday</em>.</li></div>
<a name="wp4191995"> </a><div class="pSmartList2"><li>There is no action on the table as they are already created.</li></div>
<a name="wp4192008"> </a><div class="pSmartList2"><li>Select <b class="cBold">Insert</b> as <b class="cBold">Action on data</b> for both output components.</li></div>
<a name="wp4192017"> </a><div class="pSmartList2"><li>Click on <b class="cBold">Sync columns</b> to retrieve the schema set in the <b class="cBold">tMap</b>.</li></div>
<a name="wp4192064"> </a><div class="pSmartList2"><li>Then connect the first <b class="cBold">tAccessOutput</b> component to the first <b class="cBold">tAccessInput</b> component using an <b class="cBold">OnComponentOk</b> link.</li></div>
<a name="wp4193730"> </a><div class="pSmartList2"><li>In each of the <b class="cBold">tAccessInput</b> components&#39; <b class="cBold">Basic settings</b> view, select the <b class="cBold">Use an existing connection</b> check box to retrieve the distributed data flow. Then set the schema manually through <b class="cBold">Edit schema</b> dialog box. </li></div>
<a name="wp4193739"> </a><div class="pSmartList2"><li>Then set the <b class="cBold">Table Name </b>accordingly. In <b class="cBold">tAccessInput_1</b>, this will be <em class="cEmphasis">Name</em>. </li></div>
<a name="wp4193839"> </a><div class="pSmartList2"><li>Click on the <b class="cBold">Guess Query</b>.</li></div>
<a name="wp4291088"> </a><div class="pSmartList2"><li>Connect each <b class="cBold">tAccessInput</b> component to <b class="cBold">tLogRow</b> component with a<b class="cBold"> Row</b> &gt; <b class="cBold">Main</b> link. In each of the <b class="cBold">tLogRow</b> components&#39; <b class="cBold">basic settings</b> view, select <b class="cBold">Table</b> in the <b class="cBold">Mode</b> field.</li></div>
<a name="wp4193886"> </a><div class="pSmartList2"><li>Add the <b class="cBold">tAccessCommit</b> component below the <b class="cBold">tFileList</b> component in the design workspace and connect them together using an <b class="cBold">OnComponentOk</b> link in order to terminate the Job with the transaction commit. </li></div>
<a name="wp4192086"> </a><div class="pSmartList2"><li>In the <b class="cBold">basic settings</b> view of <b class="cBold">tAccessCommit</b> component and from the <b class="cBold">Component list</b>, select the connection to be used, <b class="cBold">tAccessConnection_1</b> in this scenario.</li></div>
<a name="wp4192096"> </a><div class="pSmartList2"><li>Save your Job and press <b class="cBold">F6</b> to execute it.</li></div>
</ul></div>
</ul></div>
<a name="wp4192105"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tAccessConnection5.png" id="wp4192101" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp4192120"> </a><p class="pIndented1">
The parent table <em class="cEmphasis">Table1</em> is reused to generate the <em class="cEmphasis">Name</em> table and <em class="cEmphasis">Birthday</em> table.
</p>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tAccessConnection_Prop.html"><img id="LongDescNotReq3" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tAccessInput_Prop.html"><img id="LongDescNotReq4" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
