<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tJavaRow</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tdi-components-rg-en..html" title="Talend Components"><link rel="up" href="ch-customcode.html" title="Chapter&nbsp;5.&nbsp;Custom Code components"><link rel="prev" href="tJavaFlex.html" title="tJavaFlex"><link rel="next" href="tLibraryLoad.html" title="tLibraryLoad"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tJavaRow</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tJavaFlex.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;5.&nbsp;Custom Code components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tLibraryLoad.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tJavaRow"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tJavaRow"></a>tJavaRow</h2></div></div></div><div class="mediaobject"><img src="../images/tJavaRow_icon32.png"></div><div class="section" title="tJavaRow properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e85987"></a>tJavaRow properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
                            <p><span class="emphasis"><strong>Component Family</strong></span></p>
                        </td><td valign="top">
                            <p>Custom Code</p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Function</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p><span class="emphasis"><strong>tJavaRow</strong></span> allows you to enter
                                customized code which you can integrate in a Talend programme. With <span class="emphasis"><strong>tJavaRow</strong></span>, you can enter the Java code to
                                be applied to each row of the flow.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Purpose</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p><span class="emphasis"><strong>tJavaRow</strong></span> allows you to broaden
                                the functionality of <span class="emphasis"><strong>Talend</strong></span> Jobs, using
                                the Java language.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Basic settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
                                Schema</em></span></p>
                        </td><td valign="top">
                            <p>A schema is a row description, i.e., it defines the number of
                                fields to be processed and passed on to the next component. <span>The schema is either <span class="emphasis"><strong>Built-in</strong></span> or stored remotely in the
                                        <span class="emphasis"><strong>Repository</strong></span></span>.</p>
                            <p>Click <span class="emphasis"><strong>Edit Schema</strong></span> to make changes
                                to the schema. <span>Note that if you make
                                    changes, the schema automatically becomes <span class="emphasis"><strong>Built-in</strong></span>.</span></p>
                            <p>Click <span class="emphasis"><strong>Sync columns</strong></span> to retrieve
                                the schema from the previous component in the Job.</p>
                            <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This component offers the advantage of the dynamic schema
                                    feature. This allows you to retrieve unknown columns from source
                                    files or to copy batches of columns from a source without
                                    mapping each column individually. For further information about
                                    dynamic schemas, see <span class="emphasis"><em>Talend Data Integration Studio User
                                    Guide</em></span>.</p></div>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Built-in</strong></span>: The schema is created
                                and stored locally for this component only. Related topic: see
                                        <span class="emphasis"><em>Talend Data Integration Studio User Guide</em></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Repository</strong></span>: The schema already
                                exists and is stored in the Repository, hence can be reused. Related
                                topic: see <span class="emphasis"><em>Talend Data Integration Studio User Guide</em></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Code</em></span></p>
                        </td><td valign="top">
                            <p>Enter the Java code to be applied to each line of the data
                                flow.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Advanced settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Import</em></span></p>
                        </td><td valign="top">
                            <p>Enter the Java code required to import, if required, the external
                                library used in the <span class="emphasis"><strong>Main code</strong></span> field
                                of the <span class="emphasis"><strong>Basic settings</strong></span> tab.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>tStatCatcher Statistics</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to collect the log data at a component
                                level..</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Usage</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>This component is used as an intermediary between two other
                                components. It must be linked to both an input and an output
                                component.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Limitation</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>Knowledge of Java language is necessary.</p>
                        </td></tr></tbody></table></div></div><div class="section" title="Scenario 1: Transforming data line by line using tJavaRow"><div class="titlepage"><div><div><h3 class="title"><a name="d0e86220"></a>Scenario<span> 1</span>: Transforming data line by
            line using tJavaRow</h3></div></div></div><p>In this scenario, the information of a few cities read from an input delimited file is
            transformed using Java code through the <span class="emphasis"><strong>tJavaRow</strong></span>
            component and printed on the console.</p><div class="mediaobject"><img src="../images/use_case-tjavarow1-1.png"></div><div class="section" title="Setting up the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e86234"></a>Setting up the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop a <span class="emphasis"><strong>tFileInputDelimited</strong></span> component and
                        a <span class="emphasis"><strong>tJavaRow</strong></span> component from the <span class="emphasis"><strong>Palette</strong></span> onto the design workspace, and label them
                        to better identify their roles in the Job.</p></li><li class="step" title="Step 2"><p>Connect the two components using a <span class="emphasis"><strong>Row</strong></span> &gt;
                            <span class="emphasis"><strong>Main</strong></span> connection. </p></li></ol></div></div><div class="section" title="Configuring the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e86259"></a>Configuring the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the <span class="emphasis"><strong>tFileInputDelimited</strong></span>
                        component to display its <span class="emphasis"><strong>Basic settings</strong></span>
                        view in the <span class="emphasis"><strong>Component</strong></span> tab.</p><div class="mediaobject"><img src="../images/use_case-tjavarow1-2.png"></div></li><li class="step" title="Step 2"><p>In the <span class="emphasis"><strong>File name/Stream</strong></span> field, type in
                        the path to the input file in double quotation marks, or browse to the path
                        by clicking the <span class="emphasis"><strong>[...]</strong></span> button, and define
                        the first line of the file as the header.</p><p>In this example, the input file has the following content:</p><pre class="programlisting">City;Population;LandArea;PopDensity
Beijing;10233000;1418;7620
Moscow;10452000;1081;9644
Seoul;10422000;605;17215
Tokyo;8731000;617;14151
New York;8310000;789;10452</pre></li><li class="step" title="Step 3"><p>Click the <span class="emphasis"><strong>[...]</strong></span> button next to Edit
                        schema to open the <span class="emphasis"><strong>[Schema]</strong></span> dialog box, and
                        define the data structure of the input file. Then, click <span class="emphasis"><strong>OK</strong></span> to validate the schema setting and close the
                        dialog box.</p><div class="mediaobject"><img src="../images/use_case-tjavarow1-3.png"></div></li><li class="step" title="Step 4"><p>Double-click the <span class="emphasis"><strong>tJavaRow</strong></span> component to
                        display its <span class="emphasis"><strong>Basic settings</strong></span> view in the
                            <span class="emphasis"><strong>Component</strong></span> tab.</p><div class="mediaobject"><img src="../images/use_case-tjavarow1-4.png"></div></li><li class="step" title="Step 5"><p>Click <span class="emphasis"><strong>Sync columns</strong></span> to make sure that the
                        schema is correctly retrieved from the preceding component.</p></li><li class="step" title="Step 6"><p>In the <span class="emphasis"><strong>Code</strong></span> field, enter the code to be
                        applied on each line of data based on the defined schema columns.</p><p>In this example, we want to transform the city names to upper case, group
                        digits of numbers larger than 1000 using the thousands separator for ease of
                        reading, and print the data on the console:</p><pre class="programlisting">System.out.print("\n" + row1.City.toUpperCase() + ":");
System.out.print("\n  - Population: " 
+ FormatterUtils.format_Number(String.valueOf(row1.Population), ',', '.')
+ " people");
System.out.print("\n  - Land area: " 
+ FormatterUtils.format_Number(String.valueOf(row1.LandArea), ',', '.') 
+ " km2");
System.out.print("\n  - Population density: " 
+ FormatterUtils.format_Number(String.valueOf(row1.PopDensity), ',', '.') 
+ " people/km2\n");</pre><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>In the <span class="emphasis"><strong>Code</strong></span>
                                field, "row1" refers to the name of the link that connects to
                                    <span class="emphasis"><strong>tJavaRow</strong></span>. If you rename the
                                link, you have to modify the code.</em></span></p></div></li></ol></div></div><div class="section" title="Saving and executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e86347"></a>Saving and executing the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Press <span class="emphasis"><strong>Ctrl+S</strong></span> to save your Job.</p></li><li class="step" title="Step 2"><p>Press <span class="emphasis"><strong>F6</strong></span> or click <span class="emphasis"><strong>Run</strong></span> on the <span class="emphasis"><strong>Run</strong></span> tab to
                        execute the Job.</p><p>The city information is transformed by the Java code set through <span class="emphasis"><strong>tJavaRow</strong></span> and displayed on the console.</p><div class="mediaobject"><img src="../images/use_case-tjavarow1-5.png"></div></li></ol></div></div></div><div class="section" title="Scenario 2: Using tJavaRow to handle file content based on a dynamic schema"><div class="titlepage"><div><div><h3 class="title"><a name="d0e86377"></a>Scenario 2: Using tJavaRow to handle file content based on a dynamic schema </h3></div></div></div><p>This scenario describes a three-component Job that uses Java code through a <span class="emphasis"><strong>tJavaRow</strong></span> component to display the content of an input file
            and pass it to the output component. As all the components in this Job support the
            dynamic schema feature, we can leverage this feature to save the time of configuring
            each column of the schema.</p><div class="section" title="Setting up the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e86385"></a>Setting up the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop <span class="emphasis"><strong>tFileInputDelimited</strong></span>, <span class="emphasis"><strong>tJavaRow</strong></span>, and <span class="emphasis"><strong>tFileOutputDelimited</strong></span> from the <span class="emphasis"><strong>Palette</strong></span> onto the design workspace, and label them according
                        to their roles in the Job.</p></li><li class="step" title="Step 2"><p>Connect the components in a series using <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> links.</p><div class="mediaobject"><img src="../images/use_case-tjavarow2-1.png"></div></li></ol></div></div><div class="section" title="Configuring the input and output components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e86416"></a>Configuring the input and output components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the <span class="emphasis"><strong>tFileInputDelimited</strong></span>
                        component, which is labeled <span class="emphasis"><em>Source</em></span>, to
                        display its <span class="emphasis"><strong>Basic settings</strong></span> view. </p><div class="mediaobject"><img src="../images/use_case-tjavarow2-2.png"></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>The dynamic schema feature is only supported in <span class="emphasis"><strong>Built-In</strong></span> mode and requires the input file
                                to have a header row.</em></span></p></div></li><li class="step" title="Step 2"><p>In the <span class="emphasis"><strong>File name/Stream</strong></span> field, type in
                        the path to the input file in double quotation marks, or browse to the path
                        by clicking the <span class="emphasis"><strong>[...]</strong></span> button.</p></li><li class="step" title="Step 3"><p>In the <span class="emphasis"><strong>Header</strong></span> field, type in <span class="emphasis"><em>1</em></span> to define the first line of the file as the
                        header.</p></li><li class="step" title="Step 4"><p>Click the <span class="emphasis"><strong>[...]</strong></span> button next to <span class="emphasis"><strong>Edit schema</strong></span> to open the <span class="emphasis"><strong>[Schema]</strong></span> dialog box.</p><div class="mediaobject"><img src="../images/use_case-tjavarow2-3.png"></div></li><li class="step" title="Step 5"><p>Click the <span class="emphasis"><strong>[+]</strong></span> button to add a column,
                        give a name to the column, <span class="emphasis"><em>dyna</em></span> in this
                        example, and select <span class="emphasis"><strong>Dynamic</strong></span> from the
                            <span class="emphasis"><strong>Type</strong></span> list. This dynamic column will
                        retrieve the three columns, <span class="emphasis"><em>FirstName</em></span>,
                            <span class="emphasis"><em>LastName</em></span> and <span class="emphasis"><em>Address</em></span>, of the input file. </p></li><li class="step" title="Step 6"><p>Click <span class="emphasis"><strong>OK</strong></span> to validate the setting and
                        close the dialog box.</p></li><li class="step" title="Step 7"><p>Double-click the <span class="emphasis"><strong>tFileOutputDelimited</strong></span>
                        component, which is labeled <span class="emphasis"><em>Target</em></span>, to
                        display its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case-tjavarow2-4.png"></div></li><li class="step" title="Step 8"><p>Define the output file path in the <span class="emphasis"><strong>File
                            Name</strong></span> field.</p></li><li class="step" title="Step 9"><p>Select the <span class="emphasis"><strong>Include Header</strong></span> check box to
                        include the header in the output file. Leave all the other settings are they
                        are.</p></li></ol></div></div><div class="section" title="Configuring the tJavaRow component"><div class="titlepage"><div><div><h4 class="title"><a name="d0e86532"></a>Configuring the tJavaRow component</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tJavaRow</strong></span> to display its
                            <span class="emphasis"><strong>Basic settings</strong></span> view and define the
                        components properties.</p><div class="mediaobject"><img src="../images/use_case-tjavarow2-5.png"></div></li><li class="step" title="Step 2"><p>Click <span class="emphasis"><strong>Sync columns</strong></span> to make sure that the
                        schema is correctly retrieved from the preceding component.</p></li><li class="step" title="Step 3"><p>In the <span class="emphasis"><strong>Code</strong></span> field, enter the following
                        code to display the content of the input file and pass the data to the next
                        component based on the defined dynamic schema column:</p><pre class="programlisting">System.out.println(row1.dyna);
row2.dyna = row1.dyna;</pre><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>In the <span class="emphasis"><strong>Code</strong></span>
                                field, "row1" and "row2" correspond to the names of the links to and
                                from <span class="emphasis"><strong>tJavaRow</strong></span>. If you rename the
                                links, you have to modify the code.</em></span></p></div></li></ol></div></div><div class="section" title="Saving and executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e86572"></a>Saving and executing the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Press <span class="emphasis"><strong>Ctrl+S</strong></span> to save your Job.</p></li><li class="step" title="Step 2"><p>Pressing <span class="emphasis"><strong>F6</strong></span>, or click <span class="emphasis"><strong>Run</strong></span> on the <span class="emphasis"><strong>Run</strong></span>
                        tab to execute the Job.</p><p>The content of the input file is displayed on the console and written to
                        the output file.</p><div class="mediaobject"><img src="../images/use_case-tjavarow2-6.png"></div></li></ol></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tJavaFlex.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-customcode.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tLibraryLoad.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tJavaFlex&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tdi-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tLibraryLoad</td></tr></table></div></body></html>