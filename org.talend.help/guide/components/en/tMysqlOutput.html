<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tMysqlOutput</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-components-rg-en..html" title="Talend Open Studio Components"><link rel="up" href="ch-databases-traditional.html" title="Chapter&nbsp;7.&nbsp;Databases - traditional components"><link rel="prev" href="tMysqlLastInsertId.html" title="tMysqlLastInsertId"><link rel="next" href="tMysqlOutputBulk.html" title="tMysqlOutputBulk"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tMysqlOutput</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tMysqlLastInsertId.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;7.&nbsp;Databases - traditional components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tMysqlOutputBulk.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tMysqlOutput"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tMysqlOutput"></a>tMysqlOutput</h2></div></div></div><div class="mediaobject"><img src="../images/tMysqlOutput_icon32_white.png"></div><div class="section" title="tMysqlOutput properties"><div class="titlepage"><div><div><h3 class="title"><a name="Raa56766"></a>tMysqlOutput properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Component family</strong></span>
							</p>
						</td><td valign="top">
							<p>Databases/MySQL</p>
						</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Function</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p><span class="emphasis"><strong>tMysqlOutput</strong></span> writes, updates,
								makes changes or suppresses entries in a database. </p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Purpose</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p><span class="emphasis"><strong>tMysqlOutput</strong></span> executes the action
								defined on the table and/or on the data contained in the table,
								based on the flow incoming from the preceding component in the Job.
							</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Basic settings</strong></span>
							</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Property type</em></span>
							</p>
						</td><td valign="top">
							<p><span>Either <span class="emphasis"><strong>Built-in</strong></span> or <span class="emphasis"><strong>Repository</strong></span></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Built-in</strong></span>: No property data stored
								centrally.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Repository</strong></span>: Select the repository
								file in which the properties are stored. The fields that follow are
								completed automatically using the data retrieved.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>DB Version</em></span>
							</p>
						</td><td valign="top">
							<p>Select the MySQL version you are using.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<div class="mediaobject"><img src="../images/Save_Icon.png"></div>
						</td><td valign="top">
							<p>Click this icon to open a database connection wizard and store the
								database connection parameters you set in the component <span class="emphasis"><strong>Basic settings </strong></span>view.</p>
							<p> For more information about setting up and storing database
								connection parameters, see <span class="emphasis"><em>Talend Open Studio User
									Guide</em></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Use an existing connection</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box and in the <span class="emphasis"><strong>Component List</strong></span> click the
		relevant connection component to reuse the connection details you already defined.</p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>When a Job contains the parent Job and the child Job, if you need to share an existing
			connection between the two levels, for example, to share the connection created by the
			parent Job with the child Job, you have to: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>In the parent level, register the DB connection to be shared in the
							<span class="emphasis"><strong>Basic settings</strong></span> view of the connection
						component which creates that very DB connection.</p></li><li class="listitem"><p>In the child level, use a dedicated connection component to read that
						registered DB connection.</p></li></ol></div><p>For an example about how to share a DB connection across Job levels,see
					<span class="emphasis"><em>Talend Open Studio
				User Guide</em></span>.</p><p>Otherwise, you can as well deactivate the connection components and use <span class="emphasis"><strong>Dynamic settings</strong></span> of the component to specify the intended
			connection manually. In this case, make sure the connection name is unique and
			distinctive all over through the two Job levels. For more information about <span class="emphasis"><strong>Dynamic settings</strong></span>, see <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p></div>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Host</em></span>
							</p>
						</td><td valign="top">
							<p>Database server IP address.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Port</em></span>
							</p>
						</td><td valign="top">
							<p>Listening port number of DB server.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Database</em></span>
							</p>
						</td><td valign="top">
							<p>Name of the database.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Username</em></span> and
								<span class="emphasis"><em>Password</em></span></p>
						</td><td valign="top">
							<p>DB user authentication data.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Table</em></span>
							</p>
						</td><td valign="top">
							<p>Name of the table to be written. Note that only one table can be
								written at a time</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Action on table</em></span>
							</p>
						</td><td valign="top">
							<p>On the table defined, you can perform one of the following
								operations:</p>
							<p>
								<span class="emphasis"><strong>Default</strong></span>: No operation is carried
								out.</p>
							<p>
								<span class="emphasis"><strong>Drop and create a table</strong></span>: The table
								is removed and created again.</p>
							<p>
								<span class="emphasis"><strong>Create a table</strong></span>: The table does not
								exist and gets created.</p>
							<p>
								<span class="emphasis"><strong>Create a table if not exists</strong></span>: The
								table is created if it does not exist.</p>
							<p>
								<span class="emphasis"><strong>Drop a table if exists and create</strong></span>:
								The table is removed if it already exists and created again.</p>
							<p>
								<span class="emphasis"><strong>Clear a table</strong></span>: The table content is
								deleted.</p>
							<p>
								<span class="emphasis"><strong>Truncate table</strong></span>: The table content
								is quickly deleted. However, you will not be able to rollback the
								operation.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Action on data</em></span>
							</p>
						</td><td valign="top">
							<p>On the data of the table defined, you can perform:</p>
							<p>
								<span class="emphasis"><strong>Insert</strong></span>: Add new entries to the
								table. If duplicates are found, the job stops.</p>
							<p>
								<span class="emphasis"><strong>Update</strong></span>: Make changes to existing
								entries.</p>
							<p><span class="emphasis"><strong>Insert or update</strong></span>: inserts a new record.
		If the record with the given reference already exists, an update would be made.</p>
							<p>
		<span class="emphasis"><strong>Update or insert</strong></span>: updates the record with the given
		reference. If the record does not exist, a new record would be
		inserted.</p>
							<p>
								<span class="emphasis"><strong>Delete</strong></span>: Remove entries
								corresponding to the input flow.</p>
							<p>
								<span class="emphasis"><strong>Replace</strong></span>: Add new entries to the
								table. If an old row in the table has the same value as a new row
								for a PRIMARY KEY or a UNIQUE index, the old row is deleted before
								the new row is inserted. </p>
							<p>
								<span class="emphasis"><strong>Insert or update on duplicate key or unique
									index</strong></span>: Add entries if the inserted value does not
								exist or update entries if the inserted value already exists and
								there is a risk of violating a unique index or primary key. </p>
							<p>
								<span class="emphasis"><strong>Insert Ignore</strong></span>: Add only new rows to
								prevent duplicate key errors.</p>
							<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
									<span class="emphasis"><em> You must specify at least one column as
										a primary key on which the <span class="emphasis"><strong>Update</strong></span> and <span class="emphasis"><strong>Delete</strong></span> operations are based. You can do that
										by clicking <span class="emphasis"><strong>Edit Schema</strong></span> and
										selecting the check box(es) next to the column(s) you want
										to set as primary key(s). For an advanced use, click the
											<span class="emphasis"><strong>Advanced settings</strong></span> view
										where you can simultaneously define primary keys for the
										update and delete operations. To do that: Select the
											<span class="emphasis"><strong>Use field options</strong></span> check
										box and then in the <span class="emphasis"><strong>Key in
											update</strong></span> column, select the check boxes next to
										the column name on which you want to base the update
										operation. Do the same in the <span class="emphasis"><strong>Key in
											delete</strong></span> column for the deletion operation.
									</em></span>
								</p></div>
							
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
								schema</em></span></p>
						</td><td valign="top">
							<p>A schema is a row description, i.e., it defines the number of
								fields to be processed and passed on to the next component. <span>The schema is either <span class="emphasis"><strong>Built-in</strong></span> or stored remotely in the
										<span class="emphasis"><strong>Repository</strong></span></span>. </p>
							<p> </p>
							
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Built-in</strong></span>: The schema is created
								and stored locally for this component only. Related topic: see
										<span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Repository</strong></span>: The schema already
								exists and is stored in the Repository, hence can be reused. Related
								topic: see <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Die on error</em></span>
							</p>
						</td><td valign="top">
							<p>This check box is selected by default. Clear the check box to skip
								the row in error and complete the process for error-free rows. If
								needed, you can retrieve the rows in error via a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Rejects</strong></span> link.</p>
						</td></tr><tr><td>&nbsp;</td><td valign="top">
							<span class="emphasis"><em>Specify a data source alias</em></span>
						</td><td valign="top">
							<p>Select this check box and specify the alias of a data source created on the <span class="emphasis"><strong>Talend</strong></span>
		Runtime side to use the shared connection pool defined in the data source configuration.
		This option works only when you deploy and run your Job in <span class="emphasis"><strong>Talend</strong></span> Runtime. </p>
							<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>If you use the component's own DB configuration, your data source connection will be closed
			at the end of the component. To prevent this from happening, use a shared DB connection
			with the data source alias specified.</p></div>
							<p>This check box is not available when the <span class="emphasis"><strong>Use an existing
			connection</strong></span> check box is selected. </p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Advanced settings</strong></span>
							</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Additional JDBC parameters</em></span>
							</p>
						</td><td valign="top">
							<p>Specify additional connection properties for the DB connection you
								are creating. This option is not available if you have selected the
									<span class="emphasis"><strong>Use an existing connection</strong></span>
								check box in the <span class="emphasis"><strong>Basic
								settings</strong></span>.</p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p> You can press <span class="emphasis"><strong>Ctrl+Space</strong></span> to
									access a list of predefined global variables.</p></div>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Extend Insert</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to carry out a bulk insert of a defined set
								of lines instead of inserting lines one by one. The gain in system
								performance is considerable.</p>
							<p> </p>
							<p>
								<span class="emphasis"><strong>Number of rows per insert</strong></span>: enter
								the number of rows to be inserted per operation. Note that the
								higher the value specified, the lower performance levels shall be
								due to the increase in memory demands.</p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p> This option is not compatible with the <span class="emphasis"><strong>Reject</strong></span> link. You should therefore clear the
									check box if you are using a<span class="emphasis"><strong> Row &gt;
										Rejects</strong></span> link with this component.</p></div>
							<div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
									<span class="emphasis"><em> If you are using this component with
											<span class="emphasis"><strong>tMysqlLastInsertID</strong></span>,
										ensure that the <span class="emphasis"><strong>Extend
											Insert</strong></span> check box in <span class="emphasis"><strong>Advanced Settings</strong></span> is not selected. <span class="emphasis"><strong>Extend Insert</strong></span> allows for batch
										loading, however, if the check box is selected, only the ID
										of the last line of the last batch will be returned.
									</em></span>
								</p></div>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Use batch size</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to activate the batch mode for data
								processing. In the <span class="emphasis"><strong>Batch Size</strong></span> field
								that appears when this check box is selected, you can type in the
								number you need to define the batch size to be processed.</p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This check box is available only when you have selected, the
										<span class="emphasis"><strong>Update</strong></span> or the <span class="emphasis"><strong>Delete</strong></span> option in the <span class="emphasis"><strong>Action on data</strong></span> field.</p></div>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Commit every</em></span>
							</p>
						</td><td valign="top">
							<p>Number of rows to be included in the batch before it is committed
								to the DB. This option ensures transaction quality (but not
								rollback) and, above all, a higher performance level.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Additional Columns</em></span>
							</p>
						</td><td valign="top">
							<p>This option is not available if you have just created the DB table
								(even if you delete it beforehand). This option allows you to call
								SQL functions to perform actions on columns, provided that these are
								not insert, update or delete actions, or actions that require
								pre-processing. </p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Name:</strong></span> Type in the name of the
								schema column to be altered or inserted.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>SQL expression:</strong></span> Type in the SQL
								statement to be executed in order to alter or insert the data in the
								corrsponding column.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Position:</strong></span> Select <span class="emphasis"><strong>Before</strong></span>, <span class="emphasis"><strong>Replace</strong></span> or <span class="emphasis"><strong>After</strong></span>,
								depending on the action to be performed on the reference
								column.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Reference column:</strong></span> Type in a
								reference column that<span class="emphasis"><strong> tMySqlOutput</strong></span>
								can use to locate or replace the new column, or the column to be
								modified.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Use field option</em></span>s</p>
						</td><td valign="top">
							<p>Select this check box to customize a request, particularly if
								multiple actions are being carried out on the data.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Use Hint Options</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to activate the hint configuration area
								which helps you optimize a query&#8217;s execution. In this area,
								parameters are:</p>
							<p> - <span class="emphasis"><strong>HINT</strong></span>: specify the hint you
								need, using the syntax <code class="code">/*+ */</code>. </p>
							<p> - <span class="emphasis"><strong>POSITION</strong></span>: specify where you
								put the hint in a SQL statement.</p>
							<p> - <span class="emphasis"><strong>SQL STMT</strong></span>: select the SQL
								statement you need to use.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Enable debug mode</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to display each step involved in the process
								of writing data in the database.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Use duplicate key update mode insert</em></span>
							</p>
						</td><td valign="top">
							<p>Updates the values of the columns specified, in the event of
								duplicate primary keys.:</p>
							<p>
								<span class="emphasis"><strong>Column</strong></span>: Between double quotation
								marks, enter the name of the column to be updated.</p>
							<p>
								<span class="emphasis"><strong>Value</strong></span>: Enter the action you want to
								carry out on the column.</p>
							<p> </p>
							<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>To use this option you must first of all select the<span class="emphasis"><strong> Insert </strong></span>mode in the <span class="emphasis"><strong>Action on data</strong></span> list found in the
										<span class="emphasis"><strong>Basic Settings </strong></span>view.</p></div>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>tStatCatcher Statistics</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to collect log data at the component
								level.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Usage</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>This component offers the flexibility benefit of the DB query and
								covers all of the SQL queries possible.</p>
							<p> This component must be used as an output component. It allows you
								to carry out actions on a table or on the data of a table in a MySQL
								database. It also allows you to create a reject flow using a
									<span class="emphasis"><strong>Row &gt; Rejects</strong></span> link to filter
								data in error. For an example of <span class="emphasis"><strong>tMySqlOutput</strong></span> in use, see <a class="xref" href="tMysqlOutput.html#Raa73790" title="Scenario&nbsp;3: Retrieve data in error with a Reject link">the section called &#8220;Scenario&nbsp;3: Retrieve data in error with a Reject link&#8221;</a>.</p>
						</td></tr></tbody></table></div></div><div class="section" title="Scenario 1: Adding a new column and altering data in a DB table"><div class="titlepage"><div><div><h3 class="title"><a name="Raa81493"></a>Scenario 1: Adding a new column and altering data in a DB table</h3></div></div></div><p>This Java scenario is a three-component job that aims at creating random data using a
				<span class="emphasis"><strong>tRowGenerator</strong></span>, duplicating a column to be altered
			using the <span class="emphasis"><strong>tMap</strong></span> component, and eventually altering the
			data to be inserted based on an SQL expression using the <span class="emphasis"><strong>tMysqlOutput</strong></span> component.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Drop the following components from the <span class="emphasis"><strong>Palette</strong></span> onto the design workspace: <span class="emphasis"><strong>tRowGenerator</strong></span>, <span class="emphasis"><strong>tMap</strong></span> and
						<span class="emphasis"><strong>tMySQLOutput</strong></span>.</p></li><li class="listitem"><p> Connect <span class="emphasis"><strong>tRowGenerator</strong></span>, <span class="emphasis"><strong>tMap</strong></span>, and <span class="emphasis"><strong>tMysqlOutput</strong></span> using
					the <span class="emphasis"><strong>Row Main</strong></span> link.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the design workspace, select <span class="emphasis"><strong>tRowGenerator</strong></span> to display its <span class="emphasis"><strong>Basic
						settings</strong></span> view.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Click the <span class="emphasis"><strong>Edit schema</strong></span> three-dot button to
					define the data to pass on to the <span class="emphasis"><strong>tMap</strong></span>
					component, two columns in this scenario, <span class="emphasis"><em>name</em></span> and
						<span class="emphasis"><em>random_date</em></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Click <span class="emphasis"><strong>OK</strong></span> to close the dialog box.</p></li><li class="listitem"><p> Click the <span class="emphasis"><strong>RowGenerator Editor</strong></span> three-dot
					button to open the editor and define the data to be generated.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Click in the corresponding <span class="emphasis"><strong>Functions</strong></span> fields
					and select a function for each of the two columns, <code class="code">getFirstName</code> for
					the first column and <code class="code">getrandomDate</code> for the second column.</p></li><li class="listitem"><p> In the <span class="emphasis"><strong>Number of Rows for Rowgenerator</strong></span>
					field, enter 10 to generate ten first name rows and click <span class="emphasis"><strong>Ok</strong></span> to close the editor.</p></li><li class="listitem"><p> Double-click the <span class="emphasis"><strong>tMap</strong></span> component to open the
					Map editor. The Map editor opens displaying the input metadata of the <span class="emphasis"><strong>tRowGenerator</strong></span> component.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput5.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the <span class="emphasis"><strong>Schema editor</strong></span> panel of the Map
					editor, click the plus button of the output table to add two rows and define the
					first as <span class="emphasis"><em>random_date</em></span> and the second as
						<span class="emphasis"><em>random_date1</em></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput6.png"></div><p>In this scenario, we want to duplicate the <span class="emphasis"><em>random_date</em></span> column and
			adapt the schema in order to alter the data in the output component.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the Map editor, drag the <span class="emphasis"><em>random_date </em></span>row from the
					input table to the <span class="emphasis"><em>random_date</em></span> and <span class="emphasis"><em>random_date1
					</em></span>rows in the output table.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput7.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Click <span class="emphasis"><strong>OK</strong></span> to close the editor.</p></li><li class="listitem"><p> In the design workspace, double-click the <span class="emphasis"><strong>tMysqlOutput</strong></span> component to display its <span class="emphasis"><strong>Basic settings</strong></span> view and set its parameters.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput8.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Set <span class="emphasis"><strong>Property Type </strong></span>to <span class="emphasis"><strong>Repository</strong></span> and then click the three-dot button to open the
						<span class="emphasis"><strong>[Repository content] </strong></span>dialog box and select
					the correct DB connection. The connection details display automatically in the
					corresponding fields.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p> If you have not stored the DB connection details in the <span class="emphasis"><strong>Metadata</strong></span> entry in the <span class="emphasis"><strong>Repository</strong></span>, select <span class="emphasis"><strong>Built-in</strong></span>
						on the property type list and set the connection detail manually.</p></div></li><li class="listitem"><p> Click the three-dot button next to the <span class="emphasis"><strong>Table</strong></span>
					field and select the table to be altered, <span class="emphasis"><em>Dates</em></span> in this
					scenario. </p></li><li class="listitem"><p> On the <span class="emphasis"><strong>Action on table </strong></span>list, select
						<span class="emphasis"><strong>Drop table if exists and create</strong></span>, select
						<span class="emphasis"><em>Insert</em></span> on the <span class="emphasis"><strong>Action on
						data</strong></span> list. </p></li><li class="listitem"><p> If needed, click <span class="emphasis"><strong>Sync columns</strong></span> to synchronize
					with the columns coming from the <span class="emphasis"><strong>tMap</strong></span>
					component.</p></li><li class="listitem"><p> Click the <span class="emphasis"><strong>Advanced settings</strong></span> tab to display
					the corresponding view and set the advanced parameters. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput10.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the <span class="emphasis"><strong>Additional Columns</strong></span> area, set the
					alteration to be performed on columns.</p><p> In this scenario, the <span class="emphasis"><em>One_month_later</em></span> column replaces
						<span class="emphasis"><em>random_date_1</em></span>. Also, the data itself gets altered using
					an SQL expression that adds one month to the randomly picked-up date of the
						<span class="emphasis"><em>random_date_1</em></span> column. ex: 2007-08-12 becomes
					2007-09-12.</p><p> </p><p> -Enter <span class="emphasis"><em>One_Month_Later</em></span> in the <span class="emphasis"><strong>Name</strong></span> cell.</p><p> -In the <span class="emphasis"><strong>SQL expression</strong></span> cell, enter the
					relevant addition script to be performed, <code class="code">&#8220;adddate(Random_date, interval 1
						month)&#8221;</code> in this scenario.</p><p> -Select <span class="emphasis"><strong>Replace</strong></span> on the <span class="emphasis"><strong>Position</strong></span> list.</p><p> -Enter <span class="emphasis"><em>Random_date1</em></span> on the <span class="emphasis"><strong>Reference column </strong></span>list.</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>For this job we duplicated the <span class="emphasis"><em>random_date_1</em></span> column in the DB
				table before replacing one instance of it with the
					<span class="emphasis"><em>One_Month_Later</em></span> column. The aim of this workaround was to
				be able to view upfront the modification performed.</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Save your job and press <span class="emphasis"><strong>F6 </strong></span>to execute
					it.</p></li></ul></div><p>The new <span class="emphasis"><em>One_month_later</em></span> column replaces the
				<span class="emphasis"><em>random_date1</em></span> column in the DB table and adds one month to each
			of the randomly generated dates.</p><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput9.png"></div><p>Related topic: see <a class="xref" href="tDBOutput.html#Raa82909" title="tDBOutput properties">the section called &#8220;tDBOutput properties&#8221;</a>.</p></div><div class="section" title="Scenario 2: Updating data in a database table"><div class="titlepage"><div><div><h3 class="title"><a name="d0e90236"></a>Scenario 2: Updating data in a database table</h3></div></div></div><p>This Java scenario describes a two-component Job that updates data in a MySQL table
			according to that in a delimited file.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Drop <span class="emphasis"><strong>tFileInputDelimited</strong></span> and <span class="emphasis"><strong>tMysqlOutput</strong></span> from the <span class="emphasis"><strong>Palette</strong></span> onto the design workspace.</p></li><li class="listitem"><p> Connect the two components together using a <span class="emphasis"><strong>Row
						Main</strong></span> link.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput11.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Double-click <span class="emphasis"><strong>tFileInputDelimited</strong></span> to display
					its <span class="emphasis"><strong>Basic settings</strong></span> view and define the
					component properties.</p></li><li class="listitem"><p>From the <span class="emphasis"><strong>Property Type</strong></span> list, select <span class="emphasis"><strong>Repository</strong></span> if you have already stored the metadata of
					the delimited file in the <span class="emphasis"><strong>Metadata</strong></span> node in the
						<span class="emphasis"><strong>Repository</strong></span> tree view. Otherwise, select
						<span class="emphasis"><strong>Built-In</strong></span> to define manually the metadata of
					the delimited file. </p><p> For more information about storing metadata, see <span class="emphasis"><em>Talend Open Studio User
						Guide</em></span>.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput12.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the <span class="emphasis"><strong>File Name </strong></span>field, click the three-dot
					button and browse to the source delimited file that contains the modifications
					to propagate in the MySQL table. </p><p> In this example, we use the <span class="emphasis"><em>customer_update</em></span> file that
					holds four columns: <span class="emphasis"><em>id</em></span>, <span class="emphasis"><em>CustomerName</em></span>,
						<span class="emphasis"><em>CustomerAddress </em></span>and <span class="emphasis"><em>idState</em></span>. Some
					of the data in these four columns is different from that in the MySQL
					table.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMysqlOutput16.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Define the row and field separators used in the source file in the
					corresponding fields.</p></li><li class="listitem"><p>If needed, set <span class="emphasis"><strong>Header</strong></span>, <span class="emphasis"><strong>Footer</strong></span> and <span class="emphasis"><strong>Limit</strong></span>. </p><p>In this example, <span class="emphasis"><strong>Header</strong></span> is set to 1 since the
					first row holds the names of columns, therefore it should be ignored. Also, the
					number of processed lines is limited to 2000.</p></li><li class="listitem"><p>Click
					the three-dot button next to <span class="emphasis"><strong>Edit Schema </strong></span>to
					open a dialog box where you can describe the data structure of the source
					delimited file that you want to pass to the component that follows. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput13.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Select the <span class="emphasis"><strong>Key</strong></span> check box(es) next to the
					column name(s) you want to define as key column(s).</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>It is necessary to define at least one column as a key column for the Job to be
				executed correctly. Otherwise, the Job is automatically interrupted and an error
				message displays on the console. </p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the design workspace, double-click <span class="emphasis"><strong>tMysqlOutput</strong></span> to open its <span class="emphasis"><strong>Basic
						settings</strong></span> view where you can define its properties.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMysqlOutput15.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Click <span class="emphasis"><strong>Sync columns</strong></span> to retrieve the schema of
					the preceding component. If needed, click the three-dot button next to <span class="emphasis"><strong>Edit schema</strong></span> to open a dialog box where you can check
					the retrieved schema. </p></li><li class="listitem"><p>From the <span class="emphasis"><strong>Property Type</strong></span> list, select <span class="emphasis"><strong>Repository</strong></span> if you have already stored the connection
					metadata in the <span class="emphasis"><strong>Metadata</strong></span> node in the <span class="emphasis"><strong>Repository</strong></span> tree view. Otherwise, select <span class="emphasis"><strong>Built-In</strong></span> to define manually the connection
					information. </p><p> For more information about storing metadata, see <span class="emphasis"><em>Talend Open Studio User
						Guide</em></span>.</p></li><li class="listitem"><p>Fill in the database connection information in the corresponding
					fields.</p></li><li class="listitem"><p>In the <span class="emphasis"><strong>Table </strong></span>field, enter the name of the
					table to update.</p></li><li class="listitem"><p>From the <span class="emphasis"><strong>Action on table</strong></span> list, select the
					operation you want to perform, <span class="emphasis"><strong>None</strong></span> in this
					example since the table already exists.</p></li><li class="listitem"><p>From the <span class="emphasis"><strong>Action on data </strong></span>list, select the
					operation you want to perform on the data, <span class="emphasis"><strong>Update</strong></span> in this example.</p></li><li class="listitem"><p>Save your Job and press <span class="emphasis"><strong>F6</strong></span> to execute it.
				</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput20.png"></div><p>Using you DB browser, you can verify if the MySQL table, <span class="emphasis"><em>customers,
			</em></span>has been modified according to the delimited file. </p><p>In the above example, the database table has always the four columns
				<span class="emphasis"><em>id</em></span>, <span class="emphasis"><em>CustomerName</em></span>,
				<span class="emphasis"><em>CustomerAddress</em></span> and <span class="emphasis"><em>idState</em></span>, but certain
			fields have been modified according to the data in the delimited file used.</p></div><div class="section" title="Scenario&nbsp;3: Retrieve data in error with a Reject link"><div class="titlepage"><div><div><h3 class="title"><a name="Raa73790"></a>Scenario&nbsp;3: Retrieve data in error with a Reject link</h3></div></div></div><p>This scenario describes a four-component Job that carries out migration from a
			customer file to a MySQL database table and redirects data in error towards a CSV file
			using a <span class="emphasis"><strong>Reject</strong></span> link. </p><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput3_1.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>In the <span class="emphasis"><strong>Repository</strong></span>, select the customer file
					metadata that you want to migrate and drop it onto the workspace. In the
						<span class="emphasis"><strong>[Components]</strong></span> dialog box, select <span class="emphasis"><strong>tFileInputDelimited</strong></span> and click <span class="emphasis"><strong>OK</strong></span>. The component properties will be filled in
					automatically.</p></li><li class="listitem"><p><span>If you have not stored the information about
						your customer file under the <span class="emphasis"><strong>Metadata</strong></span> node
						in the <span class="emphasis"><strong>Repository</strong></span>. </span>Drop a
						<span class="emphasis"><strong>tFileInputDelimited</strong></span> component from the
					family <span class="emphasis"><strong>File</strong></span>&nbsp;&gt;&nbsp;<span class="emphasis"><strong>Input</strong></span>, in the <span class="emphasis"><strong>Palette</strong></span>, and fill
					in its properties manually in the <span class="emphasis"><strong>Component</strong></span>
					tab.</p></li><li class="listitem"><p>From the <span class="emphasis"><strong>Palette</strong></span>, drop a <span class="emphasis"><strong>tMap</strong></span> from the <span class="emphasis"><strong>Processing</strong></span> family onto the workspace.</p></li><li class="listitem"><p>In the <span class="emphasis"><strong>Repository</strong></span>, expand the <span class="emphasis"><strong>Metadata</strong></span> node, followed by the <span class="emphasis"><strong>Db Connections</strong></span> node and select the connection required to
					migrate your data to the appropriate database. Drop it onto the workspace. In
					the <span class="emphasis"><strong>[Components]</strong></span> dialog box, select <span class="emphasis"><strong>tMysqlOutput</strong></span> and click <span class="emphasis"><strong>OK</strong></span>. The database connection properties will be automatically
					filled in.</p></li><li class="listitem"><p><span>If you have not stored the database connection
						details under the <span class="emphasis"><strong>Db Connections</strong></span> node in
						the <span class="emphasis"><strong>Repository</strong></span>, drop</span> a <span class="emphasis"><strong>tMysqlOutput</strong></span> from the <span class="emphasis"><strong>Databases</strong></span>
					family in the <span class="emphasis"><strong>Palette</strong></span> and fill in its
					properties manually in the <span class="emphasis"><strong>Component </strong></span>tab.
				</p></li></ul></div><p>For more information, see <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> From the <span class="emphasis"><strong>Palette</strong></span>, select a <span class="emphasis"><strong>tFileOutputDelimited</strong></span> from the <span class="emphasis"><strong>File</strong></span>&nbsp;&gt;&nbsp;<span class="emphasis"><strong>Output</strong></span> family, and
					drop it onto the workspace.</p></li><li class="listitem"><p> Link the <span class="emphasis"><strong>customers</strong></span> component to the
						<span class="emphasis"><strong>tMap</strong></span> component, and the <span class="emphasis"><strong>tMap</strong></span> and <span class="emphasis"><strong>Localhost</strong></span>
					with a <span class="emphasis"><strong>Row Main</strong></span> link. Name this second link
						<span class="emphasis"><em>out</em></span>.</p></li><li class="listitem"><p> Link the <span class="emphasis"><strong>Localhost</strong></span> to the <span class="emphasis"><strong>tFileOutputDelimited</strong></span> using a <span class="emphasis"><strong>Row</strong></span>&nbsp;&gt;&nbsp;<span class="emphasis"><strong>Reject</strong></span> link. </p></li><li class="listitem"><p> Double-click the <span class="emphasis"><strong>customers</strong></span> component to
					display the <span class="emphasis"><strong>Component</strong></span> view. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput3_2.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the <span class="emphasis"><strong>Property Type </strong></span>list, select <span class="emphasis"><strong>Repository</strong></span> and click the <span class="emphasis"><strong>[...]
						button </strong></span> in order to select the metadata containing the connection
					to your file. You can also select the <span class="emphasis"><strong>Built-in</strong></span>
					mode and fill in the fields manually.</p></li><li class="listitem"><p> Click the <span class="emphasis"><strong>[...]</strong></span> button next to the <span class="emphasis"><strong>File Name </strong></span>field, and fill in the path and the name of
					the file you want to use.</p></li><li class="listitem"><p> In the <span class="emphasis"><strong>Row</strong></span> and <span class="emphasis"><strong>Field
						Separator</strong></span> fields, type in between inverted commas the row and
					field separator used in the file.</p></li><li class="listitem"><p> In the <span class="emphasis"><strong>Header</strong></span>, <span class="emphasis"><strong>Footer</strong></span> and <span class="emphasis"><strong>Limit</strong></span> fields, type
					in the number of headers and footers to ignore, and the number of rows to which
					processing should be limited.</p></li><li class="listitem"><p><span> In the <span class="emphasis"><strong>Schema</strong></span>
						list, select <span class="emphasis"><strong>Repository</strong></span> and click the
							<span class="emphasis"><strong>[...] button</strong></span> in order to select the
						schema of your file, if it is stored under the <span class="emphasis"><strong>Metadata</strong></span> node in the <span class="emphasis"><strong>Repository</strong></span>. You can also click</span> the <span class="emphasis"><strong>[...]</strong></span> button next to the <span class="emphasis"><strong>Edit
						schema</strong></span> field, and set the schema manually. </p></li></ul></div><p>The schema is as follows:</p><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput3_3.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Double-click the <span class="emphasis"><strong>tMap</strong></span> component to open its
					editor. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput3_4.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Select the <span class="emphasis"><em>id</em></span>, <span class="emphasis"><em>CustomerName</em></span>,
						<span class="emphasis"><em>CustomerAddress</em></span>, <span class="emphasis"><em>idSate</em></span>,
						<span class="emphasis"><em>id2</em></span>, <span class="emphasis"><em>RegTime</em></span> and
						<span class="emphasis"><em>RegisterTime </em></span>columns on the table on the left and drop
					them on the <span class="emphasis"><strong>out</strong></span> table, on the right.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput3_5.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> In the <span class="emphasis"><strong>Schema editor</strong></span> area, at the bottom of
					the <span class="emphasis"><strong>tMap</strong></span> editor, in the right table, change the
					length of the <span class="emphasis"><strong>CustomerName</strong></span> column to
						<span class="emphasis"><em>28</em></span> to create an error. Thus, any data for which the
					length is greater than 28 will create errors, retrieved with the <span class="emphasis"><strong>Reject </strong></span>link.</p></li><li class="listitem"><p> Click <span class="emphasis"><strong>OK</strong></span>.</p></li><li class="listitem"><p> In the workspace, double-click the output <span class="emphasis"><strong>Localhost</strong></span> component to display its <span class="emphasis"><strong>Component </strong></span> view. </p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput3_6.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span> In the <span class="emphasis"><strong>Property Type
						</strong></span>list, select <span class="emphasis"><strong>Repository</strong></span> and
						click the <span class="emphasis"><strong>[...]</strong></span> button to select the
						connection to the database metadata. The connection details will be
						automatically filled in. You can also select the <span class="emphasis"><strong>Built-in</strong></span> mode and set the fields manually</span>.</p></li><li class="listitem"><p> In the <span class="emphasis"><strong>Table</strong></span> field, type in the name of the
					table to be created. In this scenario, we call it
						<span class="emphasis"><em>customers_data</em></span>.</p></li><li class="listitem"><p> In the <span class="emphasis"><strong>Action on data </strong></span>list, select the
						<span class="emphasis"><strong>Create table </strong></span>option. </p></li><li class="listitem"><p> Click the <span class="emphasis"><strong>Sync columns</strong></span> button to retrieve
					the schema from the previous component.</p></li><li class="listitem"><p> Make sure the <span class="emphasis"><strong>Die on error</strong></span> check box isn&#8217;t
					selected, so that the Job can be executed despite the error you just
					created.</p></li><li class="listitem"><p> Click the <span class="emphasis"><strong>Advanced settings</strong></span> tab of the
						<span class="emphasis"><strong>Component</strong></span> view to set the advanced
					parameters of the component.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput3_7.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Deselect the <span class="emphasis"><strong>Extend Insert</strong></span> check box which
					enables you to insert rows in batch, because this option is not compatible with
					the <span class="emphasis"><strong>Reject</strong></span> link.</p></li><li class="listitem"><p> Double-click the <span class="emphasis"><strong>tFileOutputDelimited
					</strong></span>component to set its properties in the <span class="emphasis"><strong>Component</strong></span> view.</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput3_8.png"></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p> Click the <span class="emphasis"><strong>[...]</strong></span> button next to the <span class="emphasis"><strong>File Name</strong></span> field to fill in the path and name of the
					output file.</p></li><li class="listitem"><p> Click the <span class="emphasis"><strong>Sync columns</strong></span> button to retrieve
					the schema of the previous component.</p></li><li class="listitem"><p> Save your Job and press <span class="emphasis"><strong>F6</strong></span> to execute it.
				</p></li></ul></div><div class="mediaobject"><img src="../images/Use_Case_tMySQLOutput3_9.png"></div><p>The data in error are sent to the delimited file, as well as the error type met. Here,
			we have: <span class="emphasis"><strong>Data truncation</strong></span>.</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tMysqlLastInsertId.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-databases-traditional.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tMysqlOutputBulk.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tMysqlLastInsertId&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tMysqlOutputBulk</td></tr></table></div></body></html>