<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tUniqRow</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tdi-components-rg-en..html" title="Talend Components"><link rel="up" href="ch-dataquality.html" title="Chapter&nbsp;6.&nbsp;Data Quality components"><link rel="prev" href="tThresholdViolationAlert.html" title="tThresholdViolationAlert"><link rel="next" href="tUniservBTGeneric.html" title="tUniservBTGeneric"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tUniqRow</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tThresholdViolationAlert.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;6.&nbsp;Data Quality components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tUniservBTGeneric.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tUniqRow"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tUniqRow"></a>tUniqRow</h2></div></div></div><div class="mediaobject"><img src="../images/tUniqueRow.png"></div><div class="section" title="tUniqRow Properties"><div class="titlepage"><div><div><h3 class="title"><a name="Raa85359"></a>tUniqRow Properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
                            <p><span class="emphasis"><strong>Component family</strong></span></p>
                        </td><td valign="top">
                            <p>Data Quality</p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Function</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>Compares entries and sorts out duplicate entries from the input
                                flow. </p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Purpose</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>Ensures data quality of input or output flow in a Job. </p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Basic settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
                                schema</em></span></p>
                        </td><td valign="top">
                            <p>A schema is a row description, i.e., it defines the number of
                                fields that will be processed and passed on to the next component.
                                The schema is either built-in or remote in the Repository. </p>
                            <p>If you are using <span class="emphasis"><em>Talend Open Studio for Big Data</em></span>, only the <span class="emphasis"><strong>Built-in</strong></span> mode is available.</p>
                            <p>Click <span class="emphasis"><strong>Edit Schema</strong></span> to make changes
                                to the schema. Note that if you make changes, the schema
                                automatically becomes built-in.</p>
                            <p>Click <span class="emphasis"><strong>Sync columns</strong></span> to retrieve
                                the schema from the previous component connected in the Job.</p>
                            <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This component offers the advantage of the dynamic schema
                                    feature. This allows you to retrieve unknown columns from source
                                    files or to copy batches of columns from a source without
                                    mapping each column individually. For further information about
                                    dynamic schemas, see <span class="emphasis"><em>Talend Data Integration Studio User
                                    Guide</em></span>.</p></div>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Built-in</strong></span>: The schema will be
                                created and stored locally for this component only. Related topic:
                                see <span class="emphasis"><em>Talend Data Integration Studio User Guide</em></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Repository</strong></span>: The schema already
                                exists and is stored in the Repository, hence can be reused in
                                various projects and job flowcharts. Related topic: see
                                        <span class="emphasis"><em>Talend Data Integration Studio User Guide</em></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Unique key</em></span></p>
                        </td><td valign="top">
                            <p>In this area, select one or more columns to carry out
                                deduplication on the particular column(s)</p>
                            <p> - Select the <span class="emphasis"><strong>Key attribute</strong></span> check
                                box to carry out deduplication on all the columns</p>
                            <p> - Select the <span class="emphasis"><strong>Case sensitive</strong></span>
                                check box to differentiate upper case and lower case</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Advanced settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Only once each duplicated key</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box if you want to have only the first
                                duplicated entry in the column(s) defined as key(s) sent to the
                                output flow for duplicates.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Use of disk (suitable for processing large row
                                    set)</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to enable generating temporary files on the
                                hard disk when processing a large amount of data. This helps to
                                prevent Job execution failure caused by memory overflow. With this
                                check box selected, you need also to define:</p>
                            <p> - <span class="emphasis"><strong>Buffer size in memory</strong></span>: Select
                                the number of rows that can be buffered in the memory before a
                                temporary file is to be generated on the hard disk. </p>
                            <p> - <span class="emphasis"><strong>Directory for temp files</strong></span>: Set
                                the location where the temporary files should be stored. </p>
                            <div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>Make sure that you specify an existing directory for
                                        temporary files; otherwise your Job execution will
                                        fail.</em></span></p></div>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>tStatCatcher Statistics</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to gather the job processing metadata at a
                                job level as well as at each component level.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Usage</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>This component handles flow of data therefore it requires input
                                and output, hence is defined as an intermediary step. </p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Limitation</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>n/a</p>
                        </td></tr></tbody></table></div></div><div class="section" title="Scenario 1: Deduplicating entries"><div class="titlepage"><div><div><h3 class="title"><a name="d0e119700"></a>Scenario 1: Deduplicating entries</h3></div></div></div><p>In this five-component Job, we will sort entries on an input name list, find out
            duplicated names, and display the unique names and the duplicated names on the <span class="emphasis"><strong>Run</strong></span> console. </p><div class="mediaobject"><img src="../images/Use_Case_tUniqRow1.png"></div><div class="section" title="Setting up the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e119711"></a>Setting up the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop a <span class="emphasis"><strong>tFileInputDelimited</strong></span>, a <span class="emphasis"><strong>tSortRow</strong></span>, a <span class="emphasis"><strong>tUniqRow</strong></span>, and two <span class="emphasis"><strong>tLogRow</strong></span>
                        components from the <span class="emphasis"><strong>Palette</strong></span> to the design
                        workspace, and name the components as shown above. </p></li><li class="step" title="Step 2"><p>Connect the <span class="emphasis"><strong>tFileInputDelimited</strong></span>
                        component, the <span class="emphasis"><strong>tSortRow</strong></span> component, and the
                            <span class="emphasis"><strong>tUniqRow</strong></span> component using <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span>
                        connections.</p></li><li class="step" title="Step 3"><p> Connect the <span class="emphasis"><strong>tUniqRow</strong></span> component and the
                        first <span class="emphasis"><strong>tLogRow</strong></span> component using a <span class="emphasis"><strong>Main</strong></span> &gt; <span class="emphasis"><strong>Uniques</strong></span> connection.</p></li><li class="step" title="Step 4"><p>Connect the <span class="emphasis"><strong>tUniqRow</strong></span> component and the
                        second <span class="emphasis"><strong>tLogRow</strong></span> component using a <span class="emphasis"><strong>Main</strong></span> &gt; <span class="emphasis"><strong>Duplicates</strong></span> connection.</p></li></ol></div></div><div class="section" title="Configuring the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e119781"></a>Configuring the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the <span class="emphasis"><strong>tFileInputDelimited</strong></span>
                        component to display its <span class="emphasis"><strong>Basic settings</strong></span>
                        view. </p><div class="mediaobject"><img src="../images/Use_Case_tUniqRow2.png"></div></li><li class="step" title="Step 2"><p>Click the <span class="emphasis"><strong>[...]</strong></span> button next to the
                            <span class="emphasis"><strong>File Name</strong></span> field to browse to your input
                        file. </p></li><li class="step" title="Step 3"><p>Define the header and footer rows. In this use case, the first row of the
                        input file is the header row.</p></li><li class="step" title="Step 4"><p>Click <span class="emphasis"><strong>Edit schema</strong></span> to define the schema
                        for this component. In this use case, the input file has five columns:
                            <span class="emphasis"><em>Id</em></span>, <span class="emphasis"><em>FirstName</em></span>,
                            <span class="emphasis"><em>LastName</em></span>, <span class="emphasis"><em>Age</em></span>, and
                            <span class="emphasis"><em>City</em></span>. Then click <span class="emphasis"><strong>OK</strong></span> to propagate the schema and close the schema
                        editor.</p></li><li class="step" title="Step 5"><p>Double-click the <span class="emphasis"><strong>tSortRow</strong></span> component to
                        display its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/Use_Case_tUniqRow3.png"></div></li><li class="step" title="Step 6"><p>To rearrange the entries in the alphabetic order of the names, add two
                        rows in the <span class="emphasis"><strong>Criteria</strong></span> table by clicking the
                        plus button, select the <span class="emphasis"><em>FirstName</em></span> and
                            <span class="emphasis"><em>LastName</em></span> columns under <span class="emphasis"><strong>Schema
                            column</strong></span>, select <span class="emphasis"><em>alpha</em></span> as the sorting
                        type, and select the sorting order.</p></li><li class="step" title="Step 7"><p>Double-click the <span class="emphasis"><strong>tUniqRow</strong></span> component to
                        display its <span class="emphasis"><strong>Basic settings</strong></span> view.</p><div class="mediaobject"><img src="../images/Use_Case_tUniqRow4.png"></div></li><li class="step" title="Step 8"><p>In the <span class="emphasis"><strong>Unique key</strong></span> area, select the
                        columns on which you want deduplication to be carried out. In this use case,
                        you will sort out duplicated names.</p></li><li class="step" title="Step 9"><p>In the <span class="emphasis"><strong>Basic settings</strong></span> view of each of the
                            <span class="emphasis"><strong>tLogRow</strong></span> components, select the
                            <span class="emphasis"><strong>Table</strong></span> option to view the Job execution
                        result in table mode.</p></li></ol></div></div><div class="section" title="Saving and executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e119893"></a>Saving and executing the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Press <span class="emphasis"><strong>Ctrl+S</strong></span> to save your Job. </p></li><li class="step" title="Step 2"><p>Run the Job by pressing <span class="emphasis"><strong>F6</strong></span> or clicking
                        the <span class="emphasis"><strong>Run</strong></span> button on the <span class="emphasis"><strong>Run</strong></span> tab.</p><p>The unique names and duplicated names are displayed in different tables on
                        the <span class="emphasis"><strong>Run</strong></span> console.</p><div class="mediaobject"><img src="../images/Use_Case_tUniqRow5.png"></div></li></ol></div></div></div><div class="section" title="Scenario 2: Deduplicating entries based on dynamic schema"><div class="titlepage"><div><div><h3 class="title"><a name="jzhang-20120409-dataquality-tuniqrow_dynamicschema"></a>Scenario 2: Deduplicating entries based on dynamic schema</h3></div></div></div><p>In this use case, we will use a Job similar to the one in the previous scenario to
            deduplicate the input entries about several families, so that only one person per family
            stays on the name list. As all the components in this Job support the dynamic schema
            feature, we will leverage this feature to save the time of configuring individual
            columns of the schemas. </p><div class="mediaobject"><img src="../images/use_case-tuniqrow2-1.png"></div><div class="section" title="Setting up the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e119931"></a>Setting up the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop these components from the <span class="emphasis"><strong>Palette</strong></span> to
                        the design workspace: <span class="emphasis"><strong>tFileInputDelimited</strong></span>,
                            <span class="emphasis"><strong>tExtractDynamicFields</strong></span>, <span class="emphasis"><strong>tUniqRow</strong></span>, <span class="emphasis"><strong>tFileOutputDelimited</strong></span>, and <span class="emphasis"><strong>tLogRow</strong></span>, and name the components as shown above to better
                        identify their roles in the Job. </p></li><li class="step" title="Step 2"><p>Connect the component labelled <span class="emphasis"><em>People</em></span>,
                        the component labelled <span class="emphasis"><em>Split_Column</em></span>, and
                        the component labelled <span class="emphasis"><em>Deduplicate</em></span> using
                            <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> connections.</p></li><li class="step" title="Step 3"><p>Connect the component labelled <span class="emphasis"><em>Deduplicate</em></span> and the component labelled <span class="emphasis"><em>Unique_Families</em></span> using a <span class="emphasis"><strong>Main</strong></span> &gt; <span class="emphasis"><strong>Uniques</strong></span>
                        connection.</p></li><li class="step" title="Step 4"><p>Connect the component labelled <span class="emphasis"><em>Deduplicate</em></span> and the component labelled <span class="emphasis"><em>Duplicated_Families</em></span> using a <span class="emphasis"><strong>Main</strong></span> &gt; <span class="emphasis"><strong>Duplicates</strong></span> connection.</p></li></ol></div></div><div class="section" title="Configuring the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e120004"></a>Configuring the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the component labelled <span class="emphasis"><em>People</em></span> to display its <span class="emphasis"><strong>Basic
                            settings</strong></span> view. </p><div class="mediaobject"><img src="../images/use_case-tuniqrow2-2.png"></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>The dynamic schema feature is only supported in <span class="emphasis"><strong>Built-In</strong></span> mode and requires the input file
                                to have a header row.</em></span></p></div></li><li class="step" title="Step 2"><p>Click the <span class="emphasis"><strong>[...]</strong></span> button next to the
                            <span class="emphasis"><strong>File Name/Stream</strong></span> field to browse to
                        your input file. </p></li><li class="step" title="Step 3"><p>Define the header and footer rows. In this use case, the first row of the
                        input file is the header row.</p></li><li class="step" title="Step 4"><p>Click <span class="emphasis"><strong>Edit schema</strong></span> to define the schema
                        for this component. </p><p>In this use case, the input file has five columns:
                            <span class="emphasis"><em>FirstName</em></span>, <span class="emphasis"><em>LastName</em></span>,
                            <span class="emphasis"><em>HouseNo</em></span>, <span class="emphasis"><em>Street</em></span>,
                        and <span class="emphasis"><em>City</em></span>. However, as we can leverage the advantage of
                        the dynamic schema feature, we simply define one dynamic column in the
                        schema, <span class="emphasis"><em>Dyna</em></span> in this example. </p><p>To do so :</p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 4.1"><p>Add a new line by clicking the <span class="emphasis"><strong>[+]</strong></span> button.</p></li><li class="step" title="Step 4.2"><p>Type <span class="emphasis"><em>Dyna</em></span> in the <span class="emphasis"><strong>Column</strong></span> field.</p></li><li class="step" title="Step 4.3"><p>Select <span class="emphasis"><strong>Dynamic</strong></span> from the <span class="emphasis"><strong>Type</strong></span> list. </p><div class="mediaobject"><img src="../images/use_case-tuniqrow2-3.png"></div></li><li class="step" title="Step 4.4"><p>Then, click <span class="emphasis"><strong>OK</strong></span> to propagate the
                                schema and close the <span class="emphasis"><strong>[Schema]</strong></span>
                                dialog box.</p></li></ol></div></li><li class="step" title="Step 5"><p>Double-click the component labelled <span class="emphasis"><em>Split_Column</em></span> to display its <span class="emphasis"><strong>Basic
                            settings</strong></span> view. </p><p>We will use this component to split the dynamic column of the input schema
                        into two columns, one for the first name and the other for the family
                        related information. To do so: </p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 5.1"><p>Click <span class="emphasis"><strong>Edit schema</strong></span> to open the
                                    <span class="emphasis"><strong>[Schema]</strong></span> dialog box. </p><div class="mediaobject"><img src="../images/use_case-tuniqrow2-4.png"></div></li><li class="step" title="Step 5.2"><p>In the output panel, click the <span class="emphasis"><strong>[+]</strong></span> button to add two columns for the output schema,
                                and name them <span class="emphasis"><em>FirstName</em></span> and
                                    <span class="emphasis"><em>FamilyInfo</em></span>
                                respectively.</p></li><li class="step" title="Step 5.3"><p>Select <span class="emphasis"><strong>String</strong></span> from the <span class="emphasis"><strong>Type</strong></span> list for the <span class="emphasis"><em>FirstName</em></span> column to extract this column from the
                                input schema to carry the first name of each person on the name
                                list.</p></li><li class="step" title="Step 5.4"><p>Select <span class="emphasis"><strong>Dynamic</strong></span> from the <span class="emphasis"><strong>Type</strong></span> list for the <span class="emphasis"><em>FamilyInfo</em></span> column so that this column will carry the
                                rest information of each person on the name list: the last name,
                                house number, street and city, which all together will identify a
                                family.</p></li><li class="step" title="Step 5.5"><p>Then, click <span class="emphasis"><strong>OK</strong></span> to propagate the
                                schema and close the <span class="emphasis"><strong>[Schema]</strong></span>
                                dialog box.</p></li></ol></div></li><li class="step" title="Step 6"><p>Double-click the component labelled <span class="emphasis"><em>Deduplicate</em></span> to display its <span class="emphasis"><strong>Basic
                            settings</strong></span> view.</p><div class="mediaobject"><img src="../images/use_case-tuniqrow2-5.png"></div></li><li class="step" title="Step 7"><p>In the <span class="emphasis"><strong>Unique key</strong></span> area, select the
                            <span class="emphasis"><strong>Key attribute</strong></span> check box for the
                            <span class="emphasis"><em>FamilyInfo</em></span> column to carry out
                        deduplication on the family information.</p></li><li class="step" title="Step 8"><p>In the <span class="emphasis"><strong>Basic settings</strong></span> view of the
                            <span class="emphasis"><strong>tFileOutputDelimited</strong></span> component, which
                        is labelled <span class="emphasis"><em>Deduplicated_Families</em></span>, define
                        the output file path, select the <span class="emphasis"><strong>Include
                            header</strong></span> check box, and leave the other settings as they
                        are.</p><div class="mediaobject"><img src="../images/use_case-tuniqrow2-6.png"></div></li><li class="step" title="Step 9"><p>In the <span class="emphasis"><strong>Basic settings</strong></span> view of the
                            <span class="emphasis"><strong>tLogRow</strong></span> component, which is labelled
                            <span class="emphasis"><em>Duplicated_Families</em></span>, select the
                            <span class="emphasis"><strong>Table</strong></span> option to view the Job execution
                        result in table mode.</p></li></ol></div></div><div class="section" title="Saving and executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e120230"></a>Saving and executing the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Press <span class="emphasis"><strong>Ctrl+S</strong></span> to save your Job. </p></li><li class="step" title="Step 2"><p>Run the Job by pressing <span class="emphasis"><strong>F6</strong></span> or clicking
                        the <span class="emphasis"><strong>Run</strong></span> button on the <span class="emphasis"><strong>Run</strong></span> tab.</p><p>The information of duplicated families is displayed on the <span class="emphasis"><strong>Run</strong></span> console, and only one person per family stays
                        on the name list in the output file.</p><div class="mediaobject"><img src="../images/use_case-tuniqrow2-7.png"></div></li></ol></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tThresholdViolationAlert.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-dataquality.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tUniservBTGeneric.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tThresholdViolationAlert&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tdi-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tUniservBTGeneric</td></tr></table></div></body></html>