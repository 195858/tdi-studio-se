<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tSchemaComplianceCheck</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-components-rg-en..html" title="Talend Open Studio Components"><link rel="up" href="ch-dataquality.html" title="Chapter&nbsp;6.&nbsp;Data Quality components"><link rel="prev" href="tReplaceList.html" title="tReplaceList"><link rel="next" href="tUniqRow.html" title="tUniqRow"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tSchemaComplianceCheck</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tReplaceList.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;6.&nbsp;Data Quality components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tUniqRow.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tSchemaComplianceCheck"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tSchemaComplianceCheck"></a>tSchemaComplianceCheck</h2></div></div></div><div class="mediaobject"><img src="../images/tSchemaComplianceCheck_icon32_white.png"></div><div class="section" title="tSchemaComplianceCheck Properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e59350"></a>tSchemaComplianceCheck Properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
                            <p>
                                <span class="emphasis"><strong>Component family</strong></span>
                            </p>
                        </td><td valign="top">
                            <p>Data Quality</p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
                            <p>
                                <span class="emphasis"><strong>Function</strong></span>
                            </p>
                        </td><td colspan="2" valign="top">
                            <p>Validates all input rows against a reference schema or check
                                types, nullability, length of rows against reference values. The
                                validation can be carried out in full or partly.</p>
                        </td></tr><tr><td valign="top">
                            <p>
                                <span class="emphasis"><strong>Purpose</strong></span>
                            </p>
                        </td><td colspan="2" valign="top">
                            <p>Helps to ensure the data quality of any source data against a
                                reference data source. </p>
                        </td></tr><tr><td valign="top">
                            <p>
                                <span class="emphasis"><strong>Basic settings</strong></span>
                            </p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Base Schema</em></span> and <span class="emphasis"><em>Edit
                                    schema</em></span></p>
                        </td><td valign="top">
                            <p>A schema is a row description, i.e., it defines the number of
                                fields that will be processed and passed on to the next component.
                                The schema is either built-in or remote in the Repository. </p>
                            <p> Describe the structure and nature of your data to be processed as
                                it is.</p>
                            <p>If you are using <span class="emphasis"><em>Talend Open Studio for Big Data</em></span>, only the <span class="emphasis"><strong>Built-in</strong></span> mode is available.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Built-in</strong></span>: The schema will be
                                created and stored locally for this component only. Related topic:
                                see <span class="emphasis"><em>Talend Open Studio User
                                    Guide</em></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Repository</strong></span>: The schema already
                                exists and is stored in the Repository, hence can be reused in
                                various projects and Job designs. Related topic: see <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Check all columns from schema</em></span>
                            </p>
                        </td><td valign="top">
                            <p>Select this option to carry out all checks on all columns against
                                the base schema. </p>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Custom defined</em></span>
                            </p>
                        </td><td valign="top">
                            <p>Select this option to carry out particular checks on particular
                                columns. When this option is selected, the <span class="emphasis"><strong>Checked Columns</strong></span> table shows.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Checked Columns</em></span>
                            </p>
                        </td><td valign="top">
                            <p>In this table, define what checks are to be carried out on which
                                columns. </p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Column</strong></span>: Displays the columns
                                names.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Type</strong></span>: Select the type of data
                                each column is supposed to contain. This validation is mandatory for
                                all columns.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">&nbsp;</td><td valign="top">
                            <p><span class="emphasis"><strong>Date pattern</strong></span>: Define the expected
                                date format for each column with the data type of
                                    <span class="emphasis"><em>Date</em></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">&nbsp;</td><td valign="top">
                            <p><span class="emphasis"><strong>Nullable</strong></span>: Select the check box in
                                an individual column to define the column to be nullable, that is,
                                to allow empty rows in this column to go to the output flow
                                regardless of the base schema definition. To define all columns to
                                be nullable, select the check box in the table header.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">&nbsp;</td><td valign="top">
                            <p><span class="emphasis"><strong>Undefined or empty</strong></span>: Select the
                                check box in an individual column to reject empty rows in this
                                column while the column is not nullable in the base schema
                                definition. To carry out this verification on all the columns,
                                select the check box in the table header.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Max length</strong></span>: Select the check box
                                in an individual column to verify the data length of the column
                                against the length definition of the base schema. To carry out this
                                verification on all the columns, select the check box in the table
                                header.</p>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Use another schema for compliance check</em></span>
                            </p>
                        </td><td valign="top">
                            <p>Define a reference schema as you expect the data to be, in order
                                to reject the non-compliant data.</p>
                            <p>It can be restrictive on data type, null values, and/or
                                length.</p>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Trim the excess content of column when length checking
                                    chosen and the length is greater than defined length</em></span>
                            </p>
                        </td><td valign="top">
                            <p>With any of the three modes of <span class="emphasis"><strong>tSchemaComplianceCheck</strong></span>, select this check box to
                                truncate the data that exceeds the length specified rather than
                                reject it.</p>
                            <div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>This option is applicable only on data of <span class="emphasis"><strong>String</strong></span> type.</p></div>
                        </td></tr><tr><td valign="top">
                            <p>
                                <span class="emphasis"><strong>Advanced settings</strong></span>
                            </p>
                        </td><td valign="top">
                            <p>
                                <span class="emphasis"><em>tStatCatcher Statistics</em></span>
                            </p>
                        </td><td valign="top">
                            <p>Select this check box to collect log data at the component
                                level.</p>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Use Fastest Date Check</em></span>
                            </p>
                        </td><td valign="top">
                            <p>Select this check box to perform a fast date format check using
                                the <span class="emphasis"><em>TalendDate.isDate()</em></span> method of the
                                        <span class="emphasis"><em>TalendDate</em></span> system routine if
                                    <span class="emphasis"><em>Date pattern</em></span> is not defined. For more
                                information about routines, see <span class="emphasis"><em>Talend Open Studio User
                                    Guide</em></span>.</p>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
                            <p>
                                <span class="emphasis"><em>Treat all empty string as NULL</em></span>
                            </p>
                        </td><td valign="top">
                            <p>Select this check box to treat any empty fields in any columns as
                                null values, instead of empty strings.</p>
                            <p> By default, this check box is selected. When it is cleared, the
                                    <span class="emphasis"><strong>Choose Column(s)</strong></span> table shows to
                                let you select individual columns.</p>
                        </td></tr><tr><td valign="top">
                            <p>
                                <span class="emphasis"><strong>Usage</strong></span>
                            </p>
                        </td><td colspan="2" valign="top">
                            <p>This component is an intermediary step in the flow allowing to
                                exclude from the main flow the non-compliant data. This component
                                cannot be a start component as it requires an input flow. It also
                                requires at least one output component to gather the validated flow,
                                and possibly a second output component for rejected data using
                                Rejects link. For more information, see <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p>
                        </td></tr></tbody></table></div></div><div class="section" title="Scenario: Validating data against schema"><div class="titlepage"><div><div><h3 class="title"><a name="d0e59764"></a>Scenario: Validating data against schema</h3></div></div></div><p>This scenario a Job that checks the type, nullability and length of data from an
            incoming flow against a defined reference schema, and displays the validation results on
            the <span class="emphasis"><strong>Run</strong></span> console. </p><p>The incoming flow comes from a simple CSV file that contains heterogeneous data
            including wrong data type, data exceeding the maximum length, wrong ID and null values
            in non-nullable columns, as shown below:</p><pre class="programlisting">ID;Name;BirthDate;State;City
1;Dwight;06-04-2008;Delaware;Concord
2;Warren;25-10-2008;Montana
3;Benjamin;17-08-2008;Washington;Austin
4;Harry;14-04-2008;Kansas;Annapolis
5;Ulysses;2007-04-12;Michigan;Raleigh
6;James;19-08-2007;Delaware;Charleston
.7;Bill;20-04-2007;Illinois;Bismarck
8;Ulysses;04-12-2008;;Saint Paul
9;Thomas;09-05-2008;Maryland;Albany
10;Ronald;11-02-2008;Florida;Hartford</pre><div class="section" title="Setting up the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e59776"></a>Setting up the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop the following components: a <span class="emphasis"><strong>tFileInputDelimited</strong></span>, a <span class="emphasis"><strong>tSchemaComplianceCheck</strong></span>, and two <span class="emphasis"><strong>tLogRow</strong></span> components from the <span class="emphasis"><strong>Palette</strong></span> to the design workspace.</p></li><li class="step" title="Step 2"><p>Connect the <span class="emphasis"><strong>tFileInputDelimited</strong></span> component
                        to the <span class="emphasis"><strong>tSchemaComplianceCheck</strong></span> component
                        using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> connection.</p></li><li class="step" title="Step 3"><p>Connect the <span class="emphasis"><strong>tSchemaComplianceCheck</strong></span>
                        component to the first <span class="emphasis"><strong>tLogRow</strong></span> component
                        using a <span class="emphasis"><strong>Row &gt; Main</strong></span> connection. This
                        output flow will gather the valid data.</p></li><li class="step" title="Step 4"><p>Connect the <span class="emphasis"><strong>tSchemaComplianceCheck</strong></span>
                        component to the second <span class="emphasis"><strong>tLogRow</strong></span> component
                        using a <span class="emphasis"><strong>Row &gt; Rejects</strong></span> connection. This
                        second output flow will gather the non-compliant data. It passes two
                        additional columns to the next component: <span class="emphasis"><em>ErrorCode</em></span> and
                            <span class="emphasis"><em>ErrorMessage</em></span>. These two read-only columns provide
                        information about the rejected data to ease error handling and
                        troubleshooting if needed.</p><div class="mediaobject"><img src="../images/Use_Case_tSchemaComplianceCheck1.png"></div></li></ol></div></div><div class="section" title="Configuring the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e59843"></a>Configuring the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the <span class="emphasis"><strong>tFileInputDelimited</strong></span>
                        component to display its <span class="emphasis"><strong>Basic settings</strong></span>
                        view and define the basic parameters including the input file name and the
                        number of header rows to skip.</p><div class="mediaobject"><img src="../images/Use_Case_tSchemaComplianceCheck2.png"></div></li><li class="step" title="Step 2"><p>Click the <span class="emphasis"><strong>[...]</strong></span> button next to <span class="emphasis"><strong>Edit schema</strong></span> to describe the data structure of the
                        input file. In this use case, the schema is made of five columns:
                            <span class="emphasis"><em>ID</em></span>, <span class="emphasis"><em>Name</em></span>,
                            <span class="emphasis"><em>BirthDate</em></span>, <span class="emphasis"><em>State</em></span>, and
                            <span class="emphasis"><em>City</em></span>.</p><div class="mediaobject"><img src="../images/Use_Case_tSchemaComplianceCheck3.png"></div></li><li class="step" title="Step 3"><p>Fill the <span class="emphasis"><strong>Length</strong></span> field for the
                            <span class="emphasis"><em>Name</em></span>, <span class="emphasis"><em>State</em></span> and
                            <span class="emphasis"><em>City</em></span> columns with <span class="emphasis"><em>7</em></span>,
                            <span class="emphasis"><em>10</em></span> and <span class="emphasis"><em>10</em></span> respectively. Then
                        click <span class="emphasis"><strong>OK</strong></span> to close the schema dialog box and
                        propagate the schema.</p></li><li class="step" title="Step 4"><p>Double-click the <span class="emphasis"><strong>tSchemaComplianceCheck</strong></span>
                        component to display its <span class="emphasis"><strong>Basic settings</strong></span>
                        view, wherein you will define most of the validation parameters.</p><div class="mediaobject"><img src="../images/Use_Case_tSchemaComplianceCheck4.png"></div></li><li class="step" title="Step 5"><p>Select the <span class="emphasis"><strong>Custom defined</strong></span> option in the
                            <span class="emphasis"><strong>Mode</strong></span> area to perform custom defined
                        checks. </p><p> In this example, we use the <span class="emphasis"><strong>Checked
                            columns</strong></span> table to set the validation parameters. However, you
                        can also select the <span class="emphasis"><strong>Check all columns from
                            schema</strong></span> check box if you want to perform all the checks (type,
                        nullability and length) on all the columns against the base schema, or
                        select the <span class="emphasis"><strong>Use another schema for compliance
                            check</strong></span> option and define a new schema as the expected
                        structure of the data.</p></li><li class="step" title="Step 6"><p>In the <span class="emphasis"><strong>Checked Columns</strong></span> table, define the
                        checks to be performed. In this use case:</p><p> - The type of the <span class="emphasis"><em>ID</em></span> column should be <span class="emphasis"><strong>Int</strong></span>.</p><p> - The length of the <span class="emphasis"><em>Name</em></span>, <span class="emphasis"><em>State</em></span>
                        and <span class="emphasis"><em>City</em></span> columns should be checked.</p><p> - The type of the <span class="emphasis"><em>BirthDate</em></span> column should be
                            <span class="emphasis"><strong>Date</strong></span>, and the expected date pattern is
                            <span class="emphasis"><em>dd-MM-yyyy</em></span>. </p><p> - All the columns should be checked for null values, so clear the
                            <span class="emphasis"><strong>Nullable</strong></span> check box for all the
                        columns.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>To send rows containing fields exceeding the defined maximum length to
                            the reject flow, make sure that the <span class="emphasis"><strong>Trim the
                                excess content of column when length checking chosen and the length
                                is greater than defined length</strong></span> check box is cleared.
                        </p></div></li><li class="step" title="Step 7"><p>In the <span class="emphasis"><strong>Advanced settings</strong></span> view of the
                            <span class="emphasis"><strong>tSchemaComplianceCheck </strong></span>component,
                        select the <span class="emphasis"><strong>Treat all empty string as NULL</strong></span>
                        option to sent any rows containing empty fields to the reject flow.</p></li><li class="step" title="Step 8"><p>To view the validation result in tables on the <span class="emphasis"><strong>Run</strong></span> console, double-click each <span class="emphasis"><strong>tLogRow</strong></span> component and select the <span class="emphasis"><strong>Table</strong></span> option in the <span class="emphasis"><strong>Basic
                            settings</strong></span> view.</p></li></ol></div></div><div class="section" title="Executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e60019"></a>Executing the Job</h4></div></div></div><div class="procedure"><ul class="procedure"><li class="step" title="Step 1"><p>Save your Job and press <span class="emphasis"><strong>F6</strong></span> to launch it. </p><p> Two tables are displayed on the console, showing the valid data and
                        rejected data respectively.</p><div class="mediaobject"><img src="../images/Use_Case_tSchemaComplianceCheck6.png"></div></li></ul></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tReplaceList.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-dataquality.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tUniqRow.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tReplaceList&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tUniqRow</td></tr></table></div></body></html>