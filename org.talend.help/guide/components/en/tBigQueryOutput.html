<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tBigQueryOutput</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tdi-components-rg-en..html" title="Talend Components"><link rel="up" href="ch-bigdata.html" title="Chapter&nbsp;1.&nbsp;Big Data components"><link rel="prev" href="tBigQueryInput.html" title="tBigQueryInput"><link rel="next" href="tBigQueryOutputBulk.html" title="tBigQueryOutputBulk"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tBigQueryOutput</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tBigQueryInput.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;1.&nbsp;Big Data components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tBigQueryOutputBulk.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tBigQueryOutput"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tBigQueryOutput"></a>tBigQueryOutput</h2></div></div></div><div class="mediaobject"><img src="../images/tBigQueryOutput_icon32_white.png"></div><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>
			<span class="emphasis"><em>This component will be available in the <span class="emphasis"><strong>Palette</strong></span> of the studio on the condition that you have subscribed to
				the relevant edition of <span class="emphasis"><em>Talend Big Data Studio</em></span>.</em></span>
		</p></div><div class="section" title="tBigQueryOutput Properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e1152"></a>tBigQueryOutput Properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Component family</strong></span>
							</p>
						</td><td valign="top">
							<p>Big Data / Google BigQuery</p>
						</td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Function</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>This component writes the data it receives in a user-specified
								directory and transfers the data to Google BigQuery via Google Cloud
								Storage.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Purpose</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>This component transfers the data provided by its preceding
								component to Google BigQuery.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Basic settings</strong></span>
							</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
								Schema</em></span></p>
						</td><td valign="top">
							<p>A schema is a row description, i.e., it defines the number of
								fields that will be processed and passed on to the next component.
									<span>The schema is either <span class="emphasis"><strong>Built-in</strong></span> or stored remotely in the
										<span class="emphasis"><strong>Repository</strong></span></span></p>
							<p>If you are using <span class="emphasis"><em>Talend Open Studio for Big Data</em></span>, only the <span class="emphasis"><strong>Built-in</strong></span> mode is available.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>
								<span class="emphasis"><em>Property type</em></span>
							</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Built-in</strong></span>: The schema will be
								created and stored locally for this component only. Related topic:
								see <span class="emphasis"><em>Talend Data Integration Studio User Guide</em></span>.</p>
						</td></tr><tr><td>
							<p>&nbsp;</p>
						</td><td>
							<p>&nbsp;</p>
						</td><td valign="top">
							<p><span class="emphasis"><strong>Repository</strong></span>: The schema already
								exists and is stored in the Repository, hence can be reused in
								various projects and Job designs. Related topic: see
										<span class="emphasis"><em>Talend Data Integration Studio User Guide</em></span>.</p>
							<p>If you are using <span class="emphasis"><em>Talend Open Studio for Big Data</em></span>, only the <span class="emphasis"><strong>Built-in</strong></span> mode is available.</p>
						</td></tr><tr><td>&nbsp;</td><td>
							<p>
								<span class="emphasis"><em>Local filename</em></span>
							</p>
						</td><td valign="top">
							<p>Browse to, or enter the path to the file you want to write the
								received data in.</p>
						</td></tr><tr><td>&nbsp;</td><td>
							<p>
								<span class="emphasis"><em>Append</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to add rows to the existing data in the file
								specified in <span class="emphasis"><strong>Local filename</strong></span>.</p>
						</td></tr><tr><td>
							<p>
								<span class="emphasis"><em>Connection</em></span>
							</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Client ID</em></span> and <span class="emphasis"><em>Client
									secret</em></span></p>
						</td><td valign="top">
							<p>Paste the client ID and the client secret created and viewable on
								the API Access tab view of the project hosting the BigQuery service
								and the Cloud Storage service you need to use.</p>
						</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Project ID</em></span>
							</p>
						</td><td valign="top">
							<p>Paste the ID of the project you need to use. </p>
							<p>The default ID of this project can be found in the URL of the
								Google API Console, or by hovering your mouse pointer over the name
								of the project in the BigQuery Browser Tool. </p>
						</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Authorization code</em></span>
							</p>
						</td><td valign="top">
							<p>Paste the authorization code provided by Google for the access you
								are building.</p>
							<p>To obtain the authorization code, you need to execute the Job
								using this component and when this Job pauses execution to print out
								an URL address, you navigate to this address to copy the
								authorization code displayed.</p>
						</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Dataset</em></span>
							</p>
						</td><td valign="top">
							<p>Enter the name of the dataset you need to transfer data to.</p>
						</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Table</em></span>
							</p>
						</td><td valign="top">
							<p>Enter the name of the table you need to transfer data to.</p>
							<p>If this table does not exist, select the <span class="emphasis"><strong>Create the table if it doesn't exist</strong></span> check
								box.</p>
						</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Action on table</em></span>
							</p>
						</td><td valign="top">
							<p>Select the action to be performed from the drop-down list when
								transferring data to the target table. The action may be: </p>
							<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><span class="emphasis"><strong>Truncate</strong></span>: it empties the
										contents of the table and repopulates it with the
										transferred data.</p></li><li class="listitem"><p><span class="emphasis"><strong>Append</strong></span>: it adds rows to
										the existing data in the table.</p></li><li class="listitem"><p><span class="emphasis"><strong>Empty</strong></span>: it populates the
										empty table.</p></li></ul></div>
						</td></tr><tr><td>
							<p>
								<span class="emphasis"><em> Google storage configuration </em></span>
							</p>
						</td><td valign="top">
							<p><span class="emphasis"><em>Access key</em></span> and <span class="emphasis"><em>Access secret</em></span></p>
						</td><td valign="top">
							<p>Paste the authentication information obtained from Google for
								making requests to Google Cloud Storage.</p>
							<p>These keys can be consulted on the Interoperable Access tab view
								under the Google Cloud Storage tab of the project.</p>
						</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Bucket</em></span>
							</p>
						</td><td valign="top">
							<p>Enter the name of the bucket, the Google Cloud Storage container,
								that holds the data to be transferred to Google BigQuery.</p>
						</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>File</em></span>
							</p>
						</td><td valign="top">
							<p>Enter the directory of the data stored on Google Cloud Storage and
								to be transferred to BigQuery .</p>
							<p>If the data is not on Google Cloud Storage, this directory is used
								as the intermediate destination before the data is transferred to
								BigQuery.</p>
						</td></tr><tr><td>&nbsp;</td><td valign="top">
							<span class="emphasis"><em>Header</em></span>
						</td><td valign="top">
							<p>Set values to ignore the header of the transferred data. For
								example, enter <span class="emphasis"><em>0</em></span> to ignore no
								rows for the data without header and set <span class="emphasis"><em>1</em></span> for the data with header at the first row.</p>
						</td></tr><tr><td>&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Die on error</em></span>
							</p>
						</td><td valign="top">
							<p>This check box is cleared by default, meaning to skip the row on
								error and to complete the process for error-free rows.</p>
						</td></tr><tr><td>
							<span class="emphasis"><strong>Advanced settings</strong></span>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Field Separator</em></span>
							</p>
						</td><td valign="top">
							<p>Enter character, string or regular expression to separate fields
								for the transfered data.</p>
						</td></tr><tr><td>&nbsp;</td><td valign="top">
							<span class="emphasis"><em>Create directory if not exists</em></span>
						</td><td valign="top">
							<p>Select this check box to create the directory you defined in the
									<span class="emphasis"><strong>File</strong></span> field for Google Cloud
								Storage, if it does not exist.</p>
						</td></tr><tr><td valign="top">
							<p> </p>
						</td><td valign="top">
							<p>
								<span class="emphasis"><em>Custom the flush buffer size</em></span>
							</p>
						</td><td valign="top">
							<p>Customize the amount of memory used to temporarily store output
								data. In the <span class="emphasis"><strong>Row number</strong></span> field,
								enter the number of rows after which the memory is to be freed
								again.</p>
						</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Check disk space</em></span>
							</p>
						</td><td valign="top">
							<p>Select the this check box to throw an exception during execution
								if the disk is full.</p>
						</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>Encoding</em></span>
							</p>
						</td><td valign="top">
							<p>Select the encoding from the list or select <span class="emphasis"><strong>Custom</strong></span> and define it manually.</p>
						</td></tr><tr><td valign="top">&nbsp;</td><td valign="top">
							<p>
								<span class="emphasis"><em>tStatCatcher Statistics</em></span>
							</p>
						</td><td valign="top">
							<p>Select this check box to collect the log data at the component
								level.</p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Usage</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>This is an output component used at the end of a Job. It receives
								data from its preceding component such as <span class="emphasis"><strong>tFileInputDelimited</strong></span>, <span class="emphasis"><strong>tMap</strong></span> or <span class="emphasis"><strong>tMysqlInput</strong></span>. </p>
						</td></tr><tr><td valign="top">
							<p>
								<span class="emphasis"><strong>Limitation</strong></span>
							</p>
						</td><td colspan="2" valign="top">
							<p>N/A</p>
						</td></tr></tbody></table></div></div><div class="section" title="Scenario: Writing data in BigQuery"><div class="titlepage"><div><div><h3 class="title"><a name="ychen-20120801-tbigqueryoutput-scenario"></a>Scenario: Writing data in BigQuery</h3></div></div></div><p>This scenario uses two components to write data in Google BigQuery.</p><div class="mediaobject" align="center"><img src="../images/use_case-tbigqueryoutput1.png" align="middle"></div><div class="section" title="Linking the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1698"></a>Linking the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the Integration perspective of the Studio, create an empty Job, named
						WriteBigQuery for example, from the<span class="emphasis"><strong> Job
							Designs</strong></span> node in the <span class="emphasis"><strong>Repository</strong></span> tree view.</p><p>For further information about how to create a Job, see the user guide of
						the Studio for integration.</p></li><li class="step" title="Step 2"><p>Drop<span class="emphasis"><strong> tRowGenerator</strong></span> and <span class="emphasis"><strong>tBigQueryOutput</strong></span> onto the workspace.</p><p>The <span class="emphasis"><strong>tRowGenerator</strong></span> component generates the
						data to be transferred to Google BigQuery in this scenario. In the
						real-world case, you can use other components such as <span class="emphasis"><strong>tMysqlInput</strong></span> or <span class="emphasis"><strong>tMap</strong></span> in the
						place of <span class="emphasis"><strong>tRowGenerator</strong></span> to design a
						sophisticated process to prepare your data to be transferred.</p></li><li class="step" title="Step 3"><p>Connect them using the <span class="emphasis"><strong>Row &gt; Main</strong></span>
						link.</p></li></ol></div></div><div class="section" title="Preparing the data to be transferred"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1742"></a>Preparing the data to be transferred</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tRowGenerator</strong></span> to open its
							<span class="emphasis"><strong>Component</strong></span> view.</p><div class="mediaobject" align="center"><img src="../images/use_case-tbigqueryoutput2.png" align="middle"></div></li><li class="step" title="Step 2"><p>Click <span class="emphasis"><strong>RowGenerator Editor</strong></span> to open the
						editor.</p></li><li class="step" title="Step 3"><p>Click <span class="inlinemediaobject"><img src="../images/Button_Plus.png"></span> three times to add three rows in the <span class="emphasis"><strong>Schema</strong></span> table.</p></li><li class="step" title="Step 4"><p>In the <span class="emphasis"><strong>Column</strong></span> column, enter the name of
						your choice for each of the new rows. For example, <span class="emphasis"><em>fname</em></span>, <span class="emphasis"><em>lname</em></span> and
							<span class="emphasis"><em>States</em></span>.</p></li><li class="step" title="Step 5"><p>In the <span class="emphasis"><strong>Functions</strong></span> column, select <span class="emphasis"><em>TalendDataGenerator.getFirstName</em></span> for the
							<span class="emphasis"><em>fname</em></span> row, <span class="emphasis"><em>TalendDataGenerator.getLastName</em></span> for the <span class="emphasis"><em>lname</em></span> row and <span class="emphasis"><em>TalendDataGenerator.getUsState</em></span> for the <span class="emphasis"><em>States</em></span> row.</p></li><li class="step" title="Step 6"><p>In the <span class="emphasis"><strong>Number of Rows for RowGenerator</strong></span>
						field, enter, for example, <span class="emphasis"><em>100</em></span> to define
						the number of rows to be generated.</p></li><li class="step" title="Step 7"><p>Click <span class="emphasis"><strong>OK</strong></span> to validate these
						changes.</p></li></ol></div></div><div class="section" title="Configuring the access to BigQuery and Cloud Storage"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1828"></a>Configuring the access to BigQuery and Cloud Storage</h4></div></div></div><div class="procedure" title="Procedure&nbsp;1.4.&nbsp;Building access to BigQuery"><a name="d0e1831"></a><p class="title"><b>Procedure&nbsp;1.4.&nbsp;Building access to BigQuery</b></p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tBigQueryOutput</strong></span> to open its
							<span class="emphasis"><strong>Component</strong></span> view.</p><div class="mediaobject" align="center"><img src="../images/use_case-tbigqueryoutput3.png" align="middle"></div></li><li class="step" title="Step 2"><p>Click <span class="emphasis"><strong>Sync columns</strong></span> to retrieve the schema
						from its preceding component.</p></li><li class="step" title="Step 3"><p>In the<span class="emphasis"><strong> Local filename</strong></span> field, enter the
						directory where you need to create the file to be transferred to
						BigQuery.</p></li><li class="step" title="Step 4"><p>Navigate to the Google APIs Console in your web browser to access the
						Google project hosting the BigQuery and the Cloud Storage services you need
						to use.</p></li><li class="step" title="Step 5"><p>Click the API Access tab to open its view</p></li><li class="step" title="Step 6"><p>In the <span class="emphasis"><strong>Component</strong></span> view of the Studio,
						paste Client ID, Client secret and Project ID from the API Access tab view
						to the corresponding fields, respectively.</p></li><li class="step" title="Step 7"><p>In the <span class="emphasis"><strong>Dataset</strong></span> field, enter the dataset
						you need to transfer data in. In this scenario, it is <span class="emphasis"><em>documentation</em></span>.</p><p>This dataset must exist in BigQuery. The following figure shows the
						dataset used by this scenario.</p><div class="mediaobject" align="center"><img src="../images/use_case-tbigqueryoutput4.png" align="middle"></div></li><li class="step" title="Step 8"><p>In the <span class="emphasis"><strong>Table</strong></span> field, enter the name of the
						table you need to write data in, for example, <span class="emphasis"><em>UScustomer</em></span>.</p><p>If this table does not exist in BigQuery you are using, select <span class="emphasis"><strong>Create the table if it doesn't exist</strong></span>.</p></li><li class="step" title="Step 9"><p>In the <span class="emphasis"><strong>Action on data</strong></span> field, select the
						action. In this example, select <span class="emphasis"><strong>Truncate</strong></span> to
						empty the contents, if there are any, of target table and to repopulate it
						with the transferred data.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;1.5.&nbsp;Building access to Cloud Storage"><a name="d0e1907"></a><p class="title"><b>Procedure&nbsp;1.5.&nbsp;Building access to Cloud Storage</b></p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Navigate to the Google APIs Console in your web browser to access the
						Google project hosting the BigQuery and the Cloud Storage services you need
						to use.</p></li><li class="step" title="Step 2"><p>Click Google Cloud Storage &gt; Interoperable Access to open its view</p></li><li class="step" title="Step 3"><p>In the <span class="emphasis"><strong>Component</strong></span> view of the Studio,
						paste Access key, Access secret from the Interoperable Access tab view to
						the corresponding fields, respectively.</p></li><li class="step" title="Step 4"><p>In the <span class="emphasis"><strong>Bucket</strong></span> field, enter the path to
						the bucket you want to store the transferred data in. In this example, it is
							<span class="emphasis"><em>talend/documentation</em></span>
					</p><p>This bucket must exist in the directory in Cloud Storage</p><div class="mediaobject" align="center"><img src="../images/use_case-tbigqueryoutput5.png" align="middle"></div></li><li class="step" title="Step 5"><p>In the <span class="emphasis"><strong>File</strong></span> field, enter the directory
						where in Google Clould Storage you receive and create the file to be
						transferred to BigQuery. In this example, it is <span class="emphasis"><em>gs://talend/documentation/biquery_UScustomer.csv</em></span>. The file
						name must be the same as the one you defined in the <span class="emphasis"><strong>Local filename</strong></span> field.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>Troubleshooting: if you encounter issues such as <span class="emphasis"><em>Unable to read source URI</em></span> of the file
							stored in Google Cloud Storage, check whether you put the same file name
							in these two fields.</p></div></li><li class="step" title="Step 6"><p>Enter <span class="emphasis"><em>0</em></span> in the <span class="emphasis"><strong>Header</strong></span> field to ignore no rows in the transferred
						data.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;1.6.&nbsp;Getting Authorization code"><a name="d0e1963"></a><p class="title"><b>Procedure&nbsp;1.6.&nbsp;Getting Authorization code</b></p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the <span class="emphasis"><strong>Run</strong></span> view of the Studio, click
							<span class="emphasis"><strong>Run</strong></span> to execute this Job. The execution
						will pause at a given moment to print out in the console the URL address
						used to get the authorization code.</p></li><li class="step" title="Step 2"><p>Navigate to this address in your web browser and copy the authorization
						code displayed.</p></li><li class="step" title="Step 3"><p>In the <span class="emphasis"><strong>Component</strong></span> view of <span class="emphasis"><strong>tBigQueryOutput</strong></span>, paste the authorization code in
						the <span class="emphasis"><strong>Authorization Code</strong></span> field.</p></li></ol></div></div><div class="section" title="Executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e1990"></a>Executing the Job </h4></div></div></div><div class="procedure"><ul class="procedure"><li class="step" title="Step 1"><p>Press <span class="emphasis"><strong>F6</strong></span>.</p></li></ul></div><p>Once done, the <span class="emphasis"><strong>Run</strong></span> view is opened automatically,
				where you can check the execution result.</p><div class="mediaobject" align="center"><img src="../images/use_case-tbigqueryoutput-result.png" align="middle"></div><p>The data is transferred to Google BigQuery.</p><div class="mediaobject" align="center"><img src="../images/use_case-tbigqueryoutput-result2.png" align="middle"></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tBigQueryInput.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-bigdata.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tBigQueryOutputBulk.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tBigQueryInput&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tdi-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tBigQueryOutputBulk</td></tr></table></div></body></html>