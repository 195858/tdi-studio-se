<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tJava</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-components-rg-en..html" title="Talend Open Studio Components"><link rel="up" href="ch-customcode.html" title="Chapter&nbsp;5.&nbsp;Custom Code components"><link rel="prev" href="tGroovyFile.html" title="tGroovyFile"><link rel="next" href="tJavaFlex.html" title="tJavaFlex"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tJava</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tGroovyFile.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;5.&nbsp;Custom Code components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tJavaFlex.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tJava"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tJava"></a>tJava</h2></div></div></div><div class="mediaobject"><img src="../images/tJava_icon32.png"></div><div class="section" title="tJava properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e54336"></a>tJava properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top"><p><span class="emphasis"><strong>Component
                                family</strong></span></p>
                        </td><td valign="top"><p>Custom Code</p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Function</strong></span></p>
                        </td><td colspan="2" valign="top"><p><span class="emphasis"><strong>tJava</strong></span> enables you to enter personalized code in
                                order to integrate it in <span class="emphasis"><strong>Talend</strong></span> program. You can execute this code
                                only once.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Purpose</strong></span></p>
                        </td><td colspan="2" valign="top"><p><span class="emphasis"><strong>tJava</strong></span> makes it possible to extend the
                                functionalities of a <span class="emphasis"><strong>Talend</strong></span> Job through
                                using Java commands.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Basic
                                settings</strong></span></p>
                        </td><td valign="top"><p><span class="emphasis"><em>Code</em></span></p>
                        </td><td valign="top"><p>Type in the Java code you want to execute
                                according to the task you need to perform. For further information
                                about Java functions syntax specific to <span class="emphasis"><strong>Talend</strong></span>, see <span class="emphasis"><em>Talend Open Studio</em></span> Online Help (Help Contents &gt;
                                Developer Guide &gt; API Reference).</p><p> For a complete
                                Java reference, check <a class="link" href="http://docs.oracle.com/javaee/6/api/" target="_top">http://docs.oracle.com/javaee/6/api/</a></p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Advanced
                                settings</strong></span></p>
                        </td><td valign="top"><p><span class="emphasis"><em>Import</em></span></p>
                        </td><td valign="top"><p>Enter the Java code that helps to import, if
                                necessary, external libraries used in the <span class="emphasis"><strong>Main
                                    code</strong></span> box of the <span class="emphasis"><strong>Basic
                                    settings</strong></span> view.</p>
                        </td></tr><tr><td><p>&nbsp;</p>
                        </td><td valign="top"><p><span class="emphasis"><em>tStatCatcher
                                Statistics</em></span></p>
                        </td><td valign="top"><p>Select this check box to gather the Job processing
                                metadata at a Job level as well as at each component level.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Usage</strong></span></p>
                        </td><td colspan="2" valign="top"><p>This component is
                                generally used as a one-component subjob.</p>
                        </td></tr><tr><td valign="top"><p><span class="emphasis"><strong>Limitation</strong></span></p>
                        </td><td colspan="2" valign="top"><p>You should know Java
                                language.</p>
                        </td></tr></tbody></table></div></div><div class="section" title="Scenario: Printing out a variable content"><div class="titlepage"><div><div><h3 class="title"><a name="Raa39082"></a>Scenario: Printing out a variable content</h3></div></div></div><p>The following scenario is a simple demo of the extended application of the <span class="emphasis"><strong>tJava</strong></span> component. The Job aims at printing out the number of
            lines being processed using a Java command and the global variable provided in <span class="emphasis"><em>Talend Open Studio</em></span>.</p><div class="mediaobject"><img src="../images/Use_Case_tJava1.png"></div><div class="section" title="Setting up the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e54480"></a>Setting up the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Select and drop the following components from the <span class="emphasis"><strong>Palette</strong></span> onto the design workspace: <span class="emphasis"><strong>tFileInputDelimited</strong></span>, <span class="emphasis"><strong>tFileOutputExcel</strong></span>, <span class="emphasis"><strong>tJava</strong></span>.</p></li><li class="step" title="Step 2"><p>Connect the <span class="emphasis"><strong>tFileInputDelimited</strong></span> to the
                            <span class="emphasis"><strong>tFileOutputExcel</strong></span> using a <span class="emphasis"><strong>Row Main</strong></span> connection. The content from a delimited
                        txt file will be passed on through the connection to an xls-type of file
                        without further transformation.</p></li><li class="step" title="Step 3"><p>Then connect the <span class="emphasis"><strong>tFileInputDelimited</strong></span>
                        component to the <span class="emphasis"><strong>tJava</strong></span> component using a
                            <span class="emphasis"><strong>Trigger</strong></span> &gt; <span class="emphasis"><strong>On
                            Subjob Ok</strong></span> link. This link sets a sequence ordering <span class="emphasis"><strong>tJava</strong></span> to be executed at the end of the main
                        process.</p></li></ol></div></div><div class="section" title="Configuring the input component"><div class="titlepage"><div><div><h4 class="title"><a name="d0e54529"></a>Configuring the input component</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Set the <span class="emphasis"><strong>Basic settings</strong></span> of the <span class="emphasis"><strong>tFileInputDelimited</strong></span> component.
                        </p><div class="mediaobject"><img src="../images/Use_Case_tJava2.png"></div></li><li class="step" title="Step 2"><p>Define the path to the input file in the <span class="emphasis"><strong>File
                            name</strong></span> field.</p><p>The input file used in this example is a simple text file made of two
                        columns: <span class="emphasis"><em>Names</em></span> and their respective
                            <span class="emphasis"><em>Emails</em></span>.</p></li><li class="step" title="Step 3"><p>Click the <span class="emphasis"><strong>Edit Schema</strong></span> button, and set the
                        two-column schema. Then click <span class="emphasis"><strong>OK</strong></span> to close
                        the dialog box.</p><div class="mediaobject"><img src="../images/Use_Case_tJava3.png"></div></li><li class="step" title="Step 4"><p>When prompted, click <span class="emphasis"><strong>OK</strong></span> to accept the
                        propagation, so that the <span class="emphasis"><strong>tFileOutputExcel</strong></span>
                        component gets automatically set with the input schema.
                        </p></li></ol></div></div><div class="section" title="Configuring the output component"><div class="titlepage"><div><div><h4 class="title"><a name="d0e54583"></a>Configuring the output component</h4></div></div></div><p>Set the output file to receive the input content without changes. If the file does
                not exist already, it will get created.</p><div class="mediaobject"><img src="../images/Use_Case_tJava4.png"></div><p>In this example, the <span class="emphasis"><strong>Sheet name</strong></span> is
                    <span class="emphasis"><em>Email</em></span> and the <span class="emphasis"><strong>Include
                    Header</strong></span> box is selected.</p></div><div class="section" title="Configuring the tJava component"><div class="titlepage"><div><div><h4 class="title"><a name="d0e54602"></a>Configuring the tJava component</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Then select the <span class="emphasis"><strong>tJava</strong></span> component to set
                        the Java command to execute.</p><div class="mediaobject"><img src="../images/Use_Case_tJava5.png"></div></li><li class="step" title="Step 2"><p>In the <span class="emphasis"><strong>Code</strong></span> area, type in the following
                        command:</p><p>
                        </p><pre class="programlisting">String var = "Nb of line processed: ";<span></span>
var = var + globalMap.get("tFileInputDelimited_1_NB_LINE");<span></span>
System.out.println(var);</pre><p>In this use case, we use the <span class="emphasis"><em>NB_Line</em></span> variable. To
                        access the global variable list, press Ctrl + Space bar on your keyboard and
                        select the relevant global parameter.</p></li></ol></div></div><div class="section" title="Job execution"><div class="titlepage"><div><div><h4 class="title"><a name="d0e54634"></a>Job execution</h4></div></div></div><p>Save your Job and press <span class="emphasis"><strong>F6</strong></span> to execute it. </p><div class="mediaobject"><img src="../images/Use_Case_tJava6.png"></div><p>The content gets passed on to the Excel file defined and the Number of lines
                processed are displayed on the <span class="emphasis"><strong>Run</strong></span> console.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tGroovyFile.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-customcode.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tJavaFlex.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tGroovyFile&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tJavaFlex</td></tr></table></div></body></html>