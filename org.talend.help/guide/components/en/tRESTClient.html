<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tRESTClient</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-components-rg-en..html" title="Talend Open Studio Components"><link rel="up" href="ch-esb.html" title="Chapter&nbsp;12.&nbsp;ESB components"><link rel="prev" href="tESBProviderResponse.html" title="tESBProviderResponse"><link rel="next" href="tRESTRequest.html" title="tRESTRequest"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tRESTClient</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tESBProviderResponse.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;12.&nbsp;ESB components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tRESTRequest.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tRESTClient"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tRESTClient"></a>tRESTClient</h2></div></div></div><div class="mediaobject"><img src="../images/tRESTClient_icon32_white.png"></div><div class="section" title="tRESTClient properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e207025"></a>tRESTClient properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
                            <p><span class="emphasis"><strong>Component family</strong></span></p>
                        </td><td valign="top">
                            <p>ESB/REST </p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Function</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>The <span class="emphasis"><strong>tRESTClient</strong></span> component sends
                                HTTP and HTTPS requests to a REpresentational State Transfer (REST)
                                Web service provider and gets the corresponding responses. This
                                component integrates well with <span class="emphasis"><strong>Talend</strong></span> Runtime to get HTTPS support, with
                                more QoS features to be supported in time.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Purpose</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>The <span class="emphasis"><strong>tRESTClient</strong></span> component is used
                                to interact with RESTful Web service providers by sending HTTP and
                                HTTPS requests using CXF (JAX-RS). </p>
                        </td></tr><tr><td>
                            <p><span class="emphasis"><strong>Basic settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>URL</em></span></p>
                        </td><td valign="top">
                            <p>Type in the URL address of the REST server to be invoked. </p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>HTTP Method</em></span></p>
                        </td><td valign="top">
                            <p>From this list, select an HTTP method that describes the desired
                                action. The specific meanings of the HTTP methods are subject to
                                definitions of your Web service provider. Listed below are the
                                generally accepted HTTP method definitions: </p>
                            <p>
                                <span class="emphasis"><strong>- GET</strong></span>: retrieves data from the
                                server end based on the given parameters.</p>
                            <p>
                                <span class="emphasis"><strong>- POST</strong></span>: uploads data to the server
                                end based on the given parameters.</p>
                            <p>
                                <span class="emphasis"><strong>- PUT</strong></span>: updates data based on the
                                given parameters, or if the data does not exist, creates it.</p>
                            <p>
                                <span class="emphasis"><strong>- DELETE</strong></span>: removes data based on the
                                given parameters. </p>
                        </td></tr><tr><td>&nbsp;</td><td valign="top"><span class="emphasis"><em>Content Type</em></span></td><td valign="top"><p>Select <span class="emphasis"><strong>XML</strong></span>, <span class="emphasis"><strong>JSON</strong></span>, or
                                    <span class="emphasis"><strong>FORM</strong></span> according to the media
                                type of the content to be uploaded to the server end. </p>
                            <p>This list appears only when you select the <span class="emphasis"><strong>POST</strong></span> or <span class="emphasis"><strong>PUT</strong></span> HTTP
                                method.</p></td></tr><tr><td>&nbsp;</td><td valign="top"><span class="emphasis"><em>Accept Type</em></span></td><td valign="top"><p>Select the media type the client end is prepared to accept for the response from the server
                                end.</p>
                            <p>Available options are <span class="emphasis"><strong>XML</strong></span>,
                                    <span class="emphasis"><strong>JSON</strong></span>, and <span class="emphasis"><strong>ANY</strong></span>. When <span class="emphasis"><strong>ANY</strong></span> is
                                selected, the response message can be of any type and will be
                                transformed into a string.</p></td></tr><tr><td>&nbsp;</td><td valign="top"><span class="emphasis"><em>Query
                            parameters</em></span></td><td valign="top"><p>Specify the URI query parameters in the form of name-value pairs. </p>
                            <p>This option is mostly used with the GET method.</p></td></tr><tr><td>&nbsp;</td><td valign="top"><span class="emphasis"><em>Use
                            Authentication</em></span></td><td valign="top"><p>Select this check box if authentication is
                                required on the REST server end. Once selected, you need to provide
                                your username and password.</p>
                            <p>Currently only basic HTTP authentication is supported and more
                                options will be provided. </p></td></tr><tr><td valign="top">
                            <p> </p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
                                Schema</em></span></p>
                        </td><td valign="top">
                            <p>A schema is a row description, i.e., it defines the number of
                                fields that will be processed and passed on to the next component. </p>
                            <p>This component uses three built-in, read-only schemas.</p>
                            <p> </p>
                            <p>Click <span class="emphasis"><strong>Edit Schema</strong></span> to view the
                                schema structure. </p>
                            <div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>Changing the schema type may result in loss of the
                                        schema structure and therefore failure of the
                                        component.</em></span></p></div>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top"><span class="emphasis"><em>Input Schema</em></span></td><td valign="top">
                            <p>Schema for the input data. This schema contains two
                                columns:</p>
                            <p> - <span class="emphasis"><strong>body</strong></span>: stores the content of
                                structured input data</p>
                            <p>- <span class="emphasis"><strong>string</strong></span>: stores the input
                                content when it is, or is handled as, a string. </p>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top"><span class="emphasis"><em>Response
                            Schema</em></span></td><td valign="top">
                            <p>Schema for server response. This schema is passed onto the next
                                component via a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Response</strong></span> link, and it contains three
                                columns:</p>
                            <p>- <span class="emphasis"><strong>statusCode</strong></span>: stores the HTTP
                                status code from the server end.</p>
                            <p>- <span class="emphasis"><strong>body</strong></span>: stores the content of a
                                structured response from the server end. </p>
                            <p>- <span class="emphasis"><strong>string</strong></span>: stores the response
                                content from the server end when it is, or is handled as, a string. </p>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top"><span class="emphasis"><em>Error Schema</em></span></td><td valign="top">
                            <p>Schema for error information. This schema is passed onto the next
                                component via a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Error</strong></span> link, and it contains two
                                columns:</p>
                            <p>- <span class="emphasis"><strong>errorCode</strong></span>: stores the HTTP
                                status code from the server end when an error occurs during the
                                invocation process. The specific meanings of the errors codes are
                                subject to definitions of your Web service provider. For reference
                                information, visit <a class="link" href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes" target="_top">en.wikipedia.org/wiki/List_of_HTTP_status_codes</a>.</p>
                            <p>- <span class="emphasis"><strong>errorMessage</strong></span>: stores the error
                                message corresponding the error code.</p>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top"><span class="emphasis"><em>Die on error</em></span></td><td valign="top">This check box is selected to kill the Job when an error
                            occurs. Clear the check box to skip the row on error and complete the
                            process for error-free rows. </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Advanced settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Connection timeout</em></span></p>
                        </td><td valign="top">
                            <p>Set the amount of time, in seconds, that the client will attempt
                                to establish a connection before it times out. If set to <span class="emphasis"><em>0</em></span>, the client will continue to attempt
                                to open a connection indefinitely. (default: 30)</p>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top"><span class="emphasis"><em>Receive
                            timeout</em></span></td><td valign="top">Set the amount of time, in seconds, that the client will
                            wait for a response before it times out. If set to <span class="emphasis"><em>0</em></span>, the client will wait indefinitely.
                            (default: 60)</td></tr><tr><td valign="top">&nbsp;</td><td valign="top"><span class="emphasis"><em>HTTP Headers</em></span></td><td valign="top">
                            <p>Type in the name-value pair(s) for HTTP headers to define the
                                parameters of the requested HTTP operation.</p>
                            <p>For the specific definitions of HTTP headers, consult your REST
                                Web service provider. For reference information, visit <a class="link" href="http://en.wikipedia.org/wiki/List_of_HTTP_headers" target="_top">en.wikipedia.org/wiki/List_of_HTTP_headers</a>.</p>
                        </td></tr><tr><td valign="top">&nbsp;</td><td valign="top"><span class="emphasis"><em>Use HTTP
                            proxy</em></span></td><td valign="top">Select this check box if you are using a proxy server.
                            Once selected, you need to provide the connection details: host, port,
                            username and password. </td></tr><tr><td valign="top">&nbsp;</td><td valign="top"><span class="emphasis"><em>tStatCatcher Statistics</em></span></td><td valign="top">Select this check box to gather the Job processing
                            metadata at the Job level as well as at each component level.</td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Usage</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>This component is used as a RESTful Web service client to
                                communicate with a RESTful service provider, with the ability to
                                input a request to a service into a Job and return the Job result as
                                a service response. Depending on the actions to perform, it usually
                                works as a start or middle component in a Job or subjob.</p>
                        </td></tr><tr><td valign="top"><span class="emphasis"><strong>Connections</strong></span></td><td colspan="2" valign="top">
                            <p>Outgoing links: </p>
                            <p><span class="emphasis"><strong>Row</strong></span>: Response; Error. </p>
                            <p><span class="emphasis"><strong>Trigger</strong></span>: On Subjob Ok; On Subjob
                                Error; Run if; On Component Ok; On Component Error. </p>
                            <p> </p>
                            <p>Incoming links: </p>
                            <p><span class="emphasis"><strong>Row</strong></span>: Main; Reject. </p>
                            <p><span class="emphasis"><strong>Trigger</strong></span>: Run if; On Subjob Ok; On
                                Subjob Error; On component Ok; On Component Error. </p>
                            <p>For further information regarding connections, see
                                        <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Limitation</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>n/a</p>
                        </td></tr></tbody></table></div></div><div class="section" title="Scenario: Sending and retrieving data by interacting with a RESTful service"><div class="titlepage"><div><div><h3 class="title"><a name="jzhang-20121013-esb-trestclient-sceanrio1"></a>Scenario: Sending and retrieving data by interacting with a RESTful service</h3></div></div></div><p>This scenario describes a Job composed of two subjobs: a four-component subjob that
            adds a customer record to a RESTful Web service, and a two-component subjob that
            retrieves the customer information from the server end. When executed, the Job displays
            relevant information on the <span class="emphasis"><strong>Run</strong></span> console.</p><p>In this scenario, the Web service used as an example has the following XML tree
            structure, where only the content of <span class="emphasis"><em>name</em></span> nodes is
            user updatable: </p><pre class="programlisting">&lt;Customers&gt;
    &lt;Customer&gt;
        &lt;id&gt;id1&lt;/id&gt;
        &lt;name&gt;<span class="emphasis"><em>Name1</em></span>&lt;/name&gt;
    &lt;/Customer&gt;
    &lt;Customer&gt;
        &lt;id&gt;id2&lt;/id&gt;
        &lt;name&gt;<span class="emphasis"><em>Name2</em></span>&lt;/name&gt;
    &lt;/Customer&gt;
    ...
&lt;/Customers&gt;</pre><p>In the first subjob, a <span class="emphasis"><strong>tXMLMap</strong></span> component is used to
            adapt the input data structure to the tree structure of the RESTful Web service.</p><div class="section" title="Setting up the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e207493"></a>Setting up the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop the following components from the <span class="emphasis"><strong>Palette</strong></span> onto the design workspace: a <span class="emphasis"><strong>tFixedFlowInput</strong></span>, a <span class="emphasis"><strong>tXMLMap</strong></span>,
                        two <span class="emphasis"><strong>tRESTClient</strong></span> components and two
                            <span class="emphasis"><strong>tLogRow</strong></span> components.</p></li><li class="step" title="Step 2"><p>Connect the <span class="emphasis"><strong>tFixedFlowInput</strong></span> to the
                            <span class="emphasis"><strong>tXMLMap</strong></span> component using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span>
                        connection.</p></li><li class="step" title="Step 3"><p>Connect the <span class="emphasis"><strong>tXMLMap</strong></span> component to the
                        first <span class="emphasis"><strong>tRESTClient</strong></span> component using a
                            <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> connection, and give it a name, <span class="emphasis"><em>out</em></span> in this example.</p></li><li class="step" title="Step 4"><p>Connect the first <span class="emphasis"><strong>tRESTClient</strong></span> to first
                            <span class="emphasis"><strong>tLogRow</strong></span> using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Response</strong></span>
                        connection to complete the first subjob, which will upload a customer record
                        to the server end and display the response information from the server end.
                    </p></li><li class="step" title="Step 5"><p>Connect the second <span class="emphasis"><strong>tRESTClient</strong></span> to the
                        second <span class="emphasis"><strong>tLogRow</strong></span> using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Response</strong></span>
                        connection to complete the second subjob, which will retrieve and display
                        customer information from the server end.</p></li><li class="step" title="Step 6"><p>Connect the two subjobs using a <span class="emphasis"><strong>Trigger</strong></span>
                        &gt; <span class="emphasis"><strong>OnSubjobOK</strong></span> connection.</p></li><li class="step" title="Step 7"><p>Label the components to best describe the actions to perform.</p><div class="mediaobject"><img src="../images/use_case-trestclient01.png"></div></li></ol></div></div><div class="section" title="Configuring the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e207593"></a>Configuring the components</h4></div></div></div><div class="procedure" title="Procedure&nbsp;12.5.&nbsp;Setting up data input and structure mapping"><a name="d0e207596"></a><p class="title"><b>Procedure&nbsp;12.5.&nbsp;Setting up data input and structure mapping</b></p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the <span class="emphasis"><strong>tFixedFlowInput</strong></span>
                        component to open its <span class="emphasis"><strong>Basic settings</strong></span>
                        view.</p><div class="mediaobject"><img src="../images/use_case-trestclient02.png"></div></li><li class="step" title="Step 2"><p>Click the <span class="emphasis"><strong>[...]</strong></span> button next to <span class="emphasis"><strong>Edit schema</strong></span> and then set up the schema of the
                        input data in the <span class="emphasis"><strong>[Schema]</strong></span> dialog box, and
                        click <span class="emphasis"><strong>OK</strong></span> to close the <span class="emphasis"><strong>[Schema]</strong></span> dialog box.</p><p>In this example, the input schema has only one column, <span class="emphasis"><em>name</em></span>.</p></li><li class="step" title="Step 3"><p>In the <span class="emphasis"><strong>Values</strong></span> table under the <span class="emphasis"><strong>Use Single Table</strong></span> option, fill the <span class="emphasis"><strong>Value</strong></span> field with a customer name, <span class="emphasis"><em>Gerald Wilson</em></span> for example, between double
                        quotation marks.</p></li><li class="step" title="Step 4"><p>Fill the <span class="emphasis"><strong>Number of rows</strong></span> field with
                            <span class="emphasis"><em>1</em></span>.</p></li><li class="step" title="Step 5"><p>Double-click the <span class="emphasis"><strong>tXMLMap</strong></span> component to
                        open the Map Editor.</p><div class="mediaobject"><img src="../images/use_case-trestclient03.png"></div></li><li class="step" title="Step 6"><p>In the output table, right-click the default <span class="emphasis"><em>root</em></span> node of the <span class="emphasis"><em>body</em></span>
                        column, select <span class="emphasis"><strong>Rename</strong></span> from the contextual
                        menu, and rename it to <span class="emphasis"><em>Customer</em></span>. Make
                        sure <span class="emphasis"><em>Customer</em></span> is the loop element because
                        the XML structure of the Web service to be invoked is looped on this
                        element.</p></li><li class="step" title="Step 7"><p>Right-click the <span class="emphasis"><em>Customer</em></span> node, select
                            <span class="emphasis"><strong>Create Sub-Element</strong></span> from the contextual
                        menu, and create sub-element named <span class="emphasis"><em>name</em></span>.
                    </p></li><li class="step" title="Step 8"><p>Drop the <span class="emphasis"><em>name</em></span> column in the input table
                        to the <span class="emphasis"><em>name</em></span> node in the output table, and
                        then click <span class="emphasis"><strong>OK</strong></span> to validate the mapping and
                        close the Map Editor.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;12.6.&nbsp;Setting up REST actions and console display"><a name="d0e207709"></a><p class="title"><b>Procedure&nbsp;12.6.&nbsp;Setting up REST actions and console display</b></p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click the first <span class="emphasis"><strong>tRESTClient</strong></span>
                        component to open its <span class="emphasis"><strong>Basic settings</strong></span>
                        view.</p><div class="mediaobject"><img src="../images/use_case-trestclient04.png"></div></li><li class="step" title="Step 2"><p>Fill the <span class="emphasis"><strong>URL</strong></span> field with the URL of the
                        Web service you are going to invoke. Note that the URL provided in this use
                        case is for demonstration purpose only and is not a live address.</p></li><li class="step" title="Step 3"><p>From the <span class="emphasis"><strong>HTTP Method</strong></span> list, select
                            <span class="emphasis"><strong>POST</strong></span> to send an HTTP request for
                        creating a new record.</p></li><li class="step" title="Step 4"><p>From the <span class="emphasis"><strong>Content Type</strong></span> list, select the
                        type of the content to be uploaded to the server end, <span class="emphasis"><strong>XML</strong></span> in this example. </p></li><li class="step" title="Step 5"><p>From the <span class="emphasis"><strong>Accept Type</strong></span> list, select the
                        type the client end is prepared to accept for the response from the server
                        end, <span class="emphasis"><strong>XML</strong></span> in this example. Leave the rest of
                        the settings as they are.</p></li><li class="step" title="Step 6"><p>Double-click the second <span class="emphasis"><strong>tRESTClient</strong></span>
                        component to open its <span class="emphasis"><strong>Basic settings</strong></span>
                        view.</p><div class="mediaobject"><img src="../images/use_case-trestclient05.png"></div></li><li class="step" title="Step 7"><p>Fill the <span class="emphasis"><strong>URL</strong></span> field with the same URL as
                        in the first <span class="emphasis"><strong>tRESTClient</strong></span> component.</p></li><li class="step" title="Step 8"><p>From the <span class="emphasis"><strong>HTTP Method</strong></span> list, select
                            <span class="emphasis"><strong>GET</strong></span> to send an HTTP request for
                        retrieving the existing records, and select <span class="emphasis"><strong>XML</strong></span> from the <span class="emphasis"><strong>Accept Type</strong></span>
                        list. Leave the rest of the settings as they are.</p></li><li class="step" title="Step 9"><p>In the <span class="emphasis"><strong>Basic settings</strong></span> view of each
                            <span class="emphasis"><strong>tLogRow</strong></span>, select the <span class="emphasis"><strong>Print component unique name in front of each output
                            row</strong></span> and <span class="emphasis"><strong>Print schema column name in
                            front of each value</strong></span> check boxes for better identification of
                        the output flows.</p><div class="mediaobject"><img src="../images/use_case-trestclient06.png"></div></li></ol></div></div><div class="section" title="Saving and executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e207811"></a>Saving and executing the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Press <span class="emphasis"><strong>Ctrl+S</strong></span> to save your Job. </p></li><li class="step" title="Step 2"><p>Press <span class="emphasis"><strong>F6</strong></span> or click <span class="emphasis"><strong>Run</strong></span> on the <span class="emphasis"><strong>Run</strong></span> console to
                        launch the Job. </p><p>The console shows that the first <span class="emphasis"><strong>tRESTClient</strong></span> component sends an HTTP request to the server
                        end to create a new customer named <span class="emphasis"><em>Gerald Wilson</em></span>, and
                        the second <span class="emphasis"><strong>tRESTClient</strong></span> component
                        successfully reads data from the server end, which includes the information
                        of the new customer you just created.</p><div class="mediaobject"><img src="../images/use_case-trestclient07.png"></div></li></ol></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tESBProviderResponse.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-esb.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tRESTRequest.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tESBProviderResponse&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tRESTRequest</td></tr></table></div></body></html>