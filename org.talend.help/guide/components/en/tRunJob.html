<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tRunJob</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-components-rg-en..html" title="Talend Open Studio"><link rel="up" href="ch-system.html" title="Chapter&nbsp;19.&nbsp;System components"><link rel="prev" href="ch-system.html" title="Chapter&nbsp;19.&nbsp;System components"><link rel="next" href="tSetEnv.html" title="tSetEnv"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tRunJob</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch-system.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;19.&nbsp;System components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tSetEnv.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tRunJob"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tRunJob"></a>tRunJob</h2></div></div></div><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="27"><tr><td><img src="../images/tRunJob.png" width="27"></td></tr></table></div><div class="section" title="tRunJob Properties"><div class="titlepage"><div><div><h3 class="title"><a name="d41116e257237"></a>tRunJob Properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
                            <p><span class="emphasis"><strong>Component family</strong></span></p>
                        </td><td valign="top">
                            <p>System</p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Function</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p><span class="emphasis"><strong>tRunJob</strong></span> executes the Job called
                                in the component&#8217;s properties, in the frame of the context
                                defined.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Purpose</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p><span class="emphasis"><strong>tRunJob</strong></span> helps mastering complex
                                Job systems which need to execute one Job after another.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Basic settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
                                Schema</em></span></p>
                        </td><td valign="top">
                            <p>A schema is a row description, i.e., it defines the number of fields to be processed and
		passed on to the next component. <span>The schema is either
				<span class="emphasis"><strong>Built-in</strong></span> or stored remotely in the <span class="emphasis"><strong>Repository</strong></span></span>.</p>
                            <p>Click <span class="emphasis"><strong>Edit Schema</strong></span> to make changes to the schema. <span>Note that if you make changes, the schema automatically becomes
			built-in.</span></p>
                            <p>If you are using <span class="emphasis"><em>Talend Open Studio for Big Data</em></span>, the
		schema is always <span class="emphasis"><strong>Built-in</strong></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Built-in</strong></span>: You create and store the schema locally for
		this component only. Related topic: see <span class="emphasis"><em>Talend Open Studio</em></span>
		<span class="emphasis"><em>User Guide</em></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Repository</strong></span>: You have already created the schema and
		stored it in the Repository. You can reuse it in various projects and Job designs. Related
		topic: see the user guide of the Studio for integration.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Use dynamic job</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to allow multiple Jobs to be called and
                                processed. When this option is enabled, only the latest version of
                                the Jobs can be called and processed. An independent process will be
                                used to run the subjob. The <span class="emphasis"><strong>Context</strong></span>
                                and the <span class="emphasis"><strong>Use an independent process to run
                                    subjob</strong></span> options disappear.</p>
                            <div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>The <span class="emphasis"><strong>Use dynamic job</strong></span> option is
                                    not compatible with the Jobserver cache. Therefore, the
                                    execution may fail if you run a Job that contains <span class="emphasis"><strong>tRunjob</strong></span> with this check box selected
                                    in .</p></div>
                            <div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This option is incompatible with the <span class="emphasis"><strong>Use
                                        or register a shared DB Connection</strong></span> option of
                                    database connection components. When <span class="emphasis"><strong>tRunJob</strong></span> works together with a database
                                    connection component, enabling both options will cause your Job
                                    to fail.</p></div>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Context job</em></span></p>
                        </td><td valign="top">
                            <p>This field is visible only when the <span class="emphasis"><strong>Use
                                    dynamic job</strong></span> option is selected. Enter the name of the
                                Job that you want to call from the list of Jobs selected.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>CopyChild Job Schema</em></span></p>
                        </td><td valign="top">
                            <p>Click to fetch the child Job schema.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Job</em></span></p>
                        </td><td valign="top">
                            <p>Select the Job to be called in and processed. Make sure you
                                already executed once the Job called, beforehand, in order to ensure
                                a smooth run through <span class="emphasis"><strong>tRunJob</strong></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Version</em></span></p>
                        </td><td valign="top">
                            <p>Select the child Job version that you want to use.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Context</em></span></p>
                        </td><td valign="top">
                            <p>If you defined contexts and variables for the Job to be run by the
                                    <span class="emphasis"><strong>tRunJob</strong></span>, select the applicable
                                context entry on the list.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Use an independent process to run
                                subjob</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to use an independent process to run the
                                subjob. This helps in solving issues related to memory
                                limits.</p>
                            <div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This option is not compatible with the Jobserver cache.
                                    Therefore, the execution may fail if you run a Job that contains
                                        <span class="emphasis"><strong>tRunjob</strong></span> with this check box
                                    selected in . </p></div>
                            <div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This option is incompatible with the <span class="emphasis"><strong>Use
                                        or register a shared DB Connection</strong></span> option of
                                    database connection components. When <span class="emphasis"><strong>tRunJob</strong></span> works together with a database
                                    connection component, enabling both options will cause your Job
                                    to fail.</p></div>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Die on child error</em></span></p>
                        </td><td valign="top">
                            <p>Clear this check box to execute the parent Job even though there
                                is an error when executing the child Job.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Transmit whole context</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to get all the context variables from the
                                parent Job. Deselect it to get all the context variables from the
                                child Job.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Context Param</em></span></p>
                        </td><td valign="top">
                            <p>You can change the selected context parameters. Click the plus
                                button to add the parameters as defined in the Context of the child
                                Job. For more information on context parameters, see
                                        <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Advanced settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Print Parameters</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to display the internal and external
                                parameters in the <span class="emphasis"><strong>Console</strong></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>tStatCatcher Statistics</em></span></p>
                        </td><td valign="top">
                            <p>Select this check box to gather the processing metadata at the Job
                                level as well as at each component level.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Usage</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>This component can be used as a standalone Job or can help
                                clarifying complex Job by avoiding having too many sub-jobs all
                                together in one Job.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Global Variables</strong></span></p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Child return code</strong></span>: Indicates the
                                Java return code of the child Job. This is available as an <span class="emphasis"><strong>After</strong></span> variable.</p>
                            <p> Returns an integer: </p>
                            <p> - if no errors &gt; the code value is 0. </p>
                            <p> - if errors &gt; an exception message shows.</p>
                            <p> </p>
                            <p>
                                <span class="emphasis"><strong>Child exception stack trace</strong></span>:
                                Returns a Java stack trace from a child Job. This is available as an
                                    <span class="emphasis"><strong>After</strong></span> variable. </p>
                            <p> Returns a string.</p>
                            <p> </p>
                            <p> For further information about variables, see <span class="emphasis"><em>Talend Open Studio User Guide</em></span>. </p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p>Outgoing links (from one component to another):</p>
                            <p>
                                <span class="emphasis"><strong>Row</strong></span>: Main.</p>
                            <p>
                                <span class="emphasis"><strong>Trigger</strong></span>: On Subjob Ok; On Subjob
                                Error; Run if; On Component Ok; On Component Error</p>
                            <p> </p>
                            <p> Incoming links (from one component to another):</p>
                            <p>
                                <span class="emphasis"><strong>Row</strong></span>: Main; Reject; Iterate.</p>
                            <p>
                                <span class="emphasis"><strong>Trigger</strong></span>: On Subjob Ok; On Subjob
                                Error; Run if; On Component Ok; On Component Error; Synchronize;
                                Parallelize.</p>
                            <p> </p>
                            <p> For further information regarding connections, see
                                        <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Limitation</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>n/a</p>
                        </td></tr></tbody></table></div></div><div class="section" title="Scenario: Executing a child Job"><div class="titlepage"><div><div><h3 class="title"><a name="d41116e257772"></a>Scenario: Executing a child Job</h3></div></div></div><p>This scenario describes a two-component Job that calls another Job, which is the child
            Job, to display the content of files specified in the parent Job on the <span class="emphasis"><strong>Run</strong></span> log console. </p><div class="mediaobject"><img src="../images/use_case_trunjob1.png"></div><div class="section" title="Creating the child Job"><div class="titlepage"><div><div><h4 class="title"><a name="d41116e257783"></a>Creating the child Job</h4></div></div></div><div class="procedure" title="Procedure&nbsp;19.1.&nbsp;Dropping and linking components"><a name="d41116e257786"></a><p class="title"><b>Procedure&nbsp;19.1.&nbsp;Dropping and linking components</b></p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop a <span class="emphasis"><strong>tFileInputDelimited</strong></span> and a
                            <span class="emphasis"><strong>tLogRow</strong></span> from the <span class="emphasis"><strong>Palette</strong></span> to the design workspace.</p></li><li class="step" title="Step 2"><p>Connect the two components together using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> link.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;19.2.&nbsp;Configuring the components"><a name="d41116e257810"></a><p class="title"><b>Procedure&nbsp;19.2.&nbsp;Configuring the components</b></p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tFileInputDelimited</strong></span> to open
                        its <span class="emphasis"><strong>Basic settings</strong></span> view and define its
                        properties.</p><div class="mediaobject"><img src="../images/use_case_trunjob3.png"></div></li><li class="step" title="Step 2"><p>Click in the <span class="emphasis"><strong>File Name</strong></span> field and then
                        press <span class="emphasis"><strong>F5</strong></span> to open the <span class="emphasis"><strong>[New Context Parameter] </strong></span>dialog box and configure the context
                        variable.</p><div class="mediaobject"><img src="../images/use_case_trunjob4.png"></div></li><li class="step" title="Step 3"><p>In the <span class="emphasis"><strong>Name</strong></span> field, enter a name for this
                        new context variable, <span class="emphasis"><em>File</em></span> in this example.</p></li><li class="step" title="Step 4"><p>In the <span class="emphasis"><strong>Default value</strong></span> field, enter the
                        full path to the default input file.</p></li><li class="step" title="Step 5"><p>Click <span class="emphasis"><strong>Finish</strong></span> to validate the context
                        parameter setup and fill the <span class="emphasis"><strong>File Name</strong></span>
                        field with the context variable.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>You can also create or edit a context parameter in the <span class="emphasis"><strong>Context</strong></span> tab view beneath the design
                            workspace. For more information, see <span class="emphasis"><em>Talend Open Studio User
                                Guide</em></span>. </p></div></li><li class="step" title="Step 6"><p>Click the <span class="emphasis"><strong>[...]</strong></span> button next to <span class="emphasis"><strong>Edit schema</strong></span> to open the <span class="emphasis"><strong>[Schema]</strong></span> dialog box where you can configure the schema
                        manually.</p></li><li class="step" title="Step 7"><p>In the dialog box, click the <span class="emphasis"><strong>[+]</strong></span> button
                        to add columns and name them according to the input file structure. </p><p>In this example, this component will actually read files defined in the
                        parent Job, and these files contain up to five columns. Therefore, add five
                        string type columns and name them <span class="emphasis"><em>col_1</em></span>,
                            <span class="emphasis"><em>col_2</em></span>, <span class="emphasis"><em>col_3</em></span>, <span class="emphasis"><em>col_4</em></span>, and
                            <span class="emphasis"><em>col_5</em></span> respectively, and then click
                            <span class="emphasis"><strong>OK</strong></span> to validate the schema configuration
                        and close the <span class="emphasis"><strong>[Schema]</strong></span> dialog box. </p></li><li class="step" title="Step 8"><p>Double-click <span class="emphasis"><strong>tLogRow </strong></span>to display its
                            <span class="emphasis"><strong>Basic settings</strong></span> view and define its
                        properties.</p></li><li class="step" title="Step 9"><p>Select the <span class="emphasis"><strong>Table</strong></span> option to view displayed
                        content in table cells. </p></li></ol></div></div><div class="section" title="Creating the parent Job"><div class="titlepage"><div><div><h4 class="title"><a name="d41116e257929"></a>Creating the parent Job</h4></div></div></div><div class="procedure" title="Procedure&nbsp;19.3.&nbsp;Dropping and linking components"><a name="d41116e257932"></a><p class="title"><b>Procedure&nbsp;19.3.&nbsp;Dropping and linking components</b></p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drop a <span class="emphasis"><strong>tFileList</strong></span> and a <span class="emphasis"><strong>tRunJob</strong></span> from the <span class="emphasis"><strong>Palette</strong></span> to the design workspace.</p></li><li class="step" title="Step 2"><p>Connect the two components together using an <span class="emphasis"><strong>Iterate</strong></span> link.</p></li></ol></div><div class="procedure" title="Procedure&nbsp;19.4.&nbsp;Configuring the components"><a name="d41116e257953"></a><p class="title"><b>Procedure&nbsp;19.4.&nbsp;Configuring the components</b></p><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Double-click <span class="emphasis"><strong>tFileList</strong></span> to open its
                            <span class="emphasis"><strong>Basic settings</strong></span> view and define its
                        properties.</p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="../images/use_case_trunjob5.png" height="360"></td></tr></table></div></li><li class="step" title="Step 2"><p>In the <span class="emphasis"><strong>Directory</strong></span> field, specify the path
                        to the directory that holds the files to be processed, or click the
                            <span class="emphasis"><strong>[...]</strong></span> button next to the field to
                        browse to the directory. </p><p>In this example, the directory is called <span class="emphasis"><em>tRunJob</em></span> and
                        it holds three delimited files with up to five columns. </p></li><li class="step" title="Step 3"><p>In the <span class="emphasis"><strong>FileList Type</strong></span> list, select
                            <span class="emphasis"><strong>Files</strong></span>. </p></li><li class="step" title="Step 4"><p>Check that the <span class="emphasis"><strong>Use Glob Expressions as
                            Filemask</strong></span> check box is selected, and then click the <span class="emphasis"><strong>[+]</strong></span> button to add a line in the <span class="emphasis"><strong>Files</strong></span> area and define a filter to match files. In
                        this example, enter <code class="code">&#8220;*.csv&#8221;</code> to retrieve all delimited files.
                    </p></li><li class="step" title="Step 5"><p>Double-click <span class="emphasis"><strong>tRunJob</strong></span> to display its
                            <span class="emphasis"><strong>Basic settings</strong></span> view and define its
                        properties.</p><div class="mediaobject"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="100%"><tr><td><img src="../images/use_case_trunjob7.png" height="360"></td></tr></table></div></li><li class="step" title="Step 6"><p>Click the <span class="emphasis"><strong>[...]</strong></span> button next to the
                            <span class="emphasis"><strong>Job</strong></span> field to open the <span class="emphasis"><strong>[Find a Job] </strong></span>dialog box. </p><div class="mediaobject"><img src="../images/use_case_trunjob2.png"></div></li><li class="step" title="Step 7"><p>Select the child Job you want to execute and click <span class="emphasis"><strong>OK</strong></span> to close the dialog box. The name of the selected Job
                        appears in the <span class="emphasis"><strong>Job</strong></span> field.</p></li><li class="step" title="Step 8"><p>In the <span class="emphasis"><strong>Context Param</strong></span> area, click the plus
                        button to add a line and define the context parameter. The only context
                        parameter defined in the child Job, named <span class="emphasis"><em>File</em></span>, appears in the <span class="emphasis"><strong>Parameter</strong></span> cell.</p></li><li class="step" title="Step 9"><p>Click in the <span class="emphasis"><strong>Values</strong></span> cell, press <span class="emphasis"><strong>Ctrl+Space</strong></span> on your keyboard to access the list of
                        context variables, and select
                            <span class="emphasis"><em>tFileList-1.CURRENT_FILEPATH</em></span>. </p><p>The corresponding context variable appears in the <span class="emphasis"><strong>Values</strong></span> cell:
                            <code class="code">((String)globalMap.get(&#8220;tFileList-1.CURRENT_FILEPATH&#8221;))</code>. </p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p> For more information on context variables, see <span class="emphasis"><em>Talend Open Studio
                                User Guide</em></span>. </p></div></li></ol></div></div><div class="section" title="Executing the parent Job"><div class="titlepage"><div><div><h4 class="title"><a name="d41116e258080"></a>Executing the parent Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Press <span class="emphasis"><strong>Ctrl+S</strong></span> to save your Job.</p></li><li class="step" title="Step 2"><p>Press <span class="emphasis"><strong>F6</strong></span> to execute the Job.</p><div class="mediaobject"><img src="../images/use_case_trunjob6.png"></div><p>The parent Job calls the child Job, which reads the files defined in the
                        parent Job, and the content of the files is displayed on the <span class="emphasis"><strong>Run</strong></span> console.</p></li></ol></div><p>Related topic: <a class="xref" href="tLoop.html" title="tLoop">the section called &#8220;tLoop&#8221;</a>, and <a class="xref" href="tBufferOutput.html#Raa80778" title="Scenario&nbsp;1: Buffering data (Java)">the section called &#8220;Scenario&nbsp;1: Buffering data (Java)&#8221;</a> of the
                    <span class="emphasis"><strong>tBufferOutput</strong></span> component.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch-system.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-system.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tSetEnv.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;19.&nbsp;System components&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tSetEnv</td></tr></table></div></body></html>