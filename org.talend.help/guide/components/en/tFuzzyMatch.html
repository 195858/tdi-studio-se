<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>tFuzzyMatch</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.75.2"><link rel="home" href="bk-tos-components-rg-en..html" title="Talend Open Studio Components"><link rel="up" href="ch-dataquality.html" title="Chapter&nbsp;6.&nbsp;Data Quality components"><link rel="prev" href="tAddCRCRow.html" title="tAddCRCRow"><link rel="next" href="tIntervalMatch.html" title="tIntervalMatch"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tFuzzyMatch</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tAddCRCRow.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;6.&nbsp;Data Quality components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tIntervalMatch.html">Next</a></td></tr></table><hr></div><div lang="EN" class="section" title="tFuzzyMatch"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tFuzzyMatch"></a>tFuzzyMatch</h2></div></div></div><div class="mediaobject"><img src="../images/tFuzzyMatch.png"></div><div class="section" title="tFuzzyMatch properties"><div class="titlepage"><div><div><h3 class="title"><a name="d0e57984"></a>tFuzzyMatch properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col></colgroup><tbody><tr><td valign="top">
                            <p><span class="emphasis"><strong>Component family</strong></span></p>
                        </td><td valign="top">
                            <p>Data Quality</p>
                        </td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Function</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>Compares a column from the main flow with a reference column from
                                the lookup flow and outputs the main flow data displaying the
                                distance </p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Purpose</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>Helps ensuring the data quality of any source data against a
                                reference data source.</p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Basic settings</strong></span></p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit
                                schema</em></span></p>
                        </td><td valign="top">
                            <p>A schema is a row description, i.e., it defines the number of
                                fields that will be processed and passed on to the next component.
                                The schema is either built-in or remote in the Repository. </p>
                            <p> Two read-only columns, Value and Match are added to the output
                                schema automatically. </p>
                            <p>If you are using <span class="emphasis"><em>Talend Open Studio for Big Data</em></span>, only the <span class="emphasis"><strong>Built-in</strong></span> mode is available.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Built-in</strong></span>: The schema will be
                                created and stored locally for this component only. Related topic:
                                see <span class="emphasis"><em>Talend Open Studio User
                                    Guide</em></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><strong>Repository</strong></span>: The schema already
                                exists and is stored in the Repository, hence can be reused in
                                various projects and job designs. Related topic: see
                                        <span class="emphasis"><em>Talend Open Studio User Guide</em></span>.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Matching type</em></span></p>
                        </td><td valign="top">
                            <p>Select the relevant matching algorithm among:</p>
                            <p>
                                <span class="emphasis"><strong>Levenshtein</strong></span>: Based on the edit
                                distance theory. It calculates the number of insertion, deletion or
                                substitution required for an entry to match the reference entry. </p>
                            <p>
                                <span class="emphasis"><strong>Metaphone</strong></span>: Based on a phonetic
                                algorithm for indexing entries by their pronunciation. It first
                                loads the phonetics of all entries of the lookup reference and
                                checks all entries of the main flow against the entries of the
                                reference flow.</p>
                            <p>
                                <span class="emphasis"><strong>Double Metaphone</strong></span>: a new version of
                                the Metaphone phonetic algorithm, that produces more accurate
                                results than the original algorithm. It can return both a primary
                                and a secondary code for a string. This accounts for some ambiguous
                                cases as well as for multiple variants of surnames with common
                                ancestry.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Min distance</em></span></p>
                        </td><td valign="top">
                            <p>(Levenshtein only) Set the minimum number of changes allowed to
                                match the reference. If set to 0, only perfect matches are returned.
                            </p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Max distance</em></span></p>
                        </td><td valign="top">
                            <p>(Levenshtein only) Set the maximum number of changes allowed to
                                match the reference.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Matching column</em></span></p>
                        </td><td valign="top">
                            <p>Select the column of the main flow that needs to be checked
                                against the reference (lookup) key column</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Unique matching</em></span></p>
                        </td><td valign="top">
                            <p> Select this check box if you want to get the best match possible,
                                in case several matches are available.</p>
                        </td></tr><tr><td>
                            <p>&nbsp;</p>
                        </td><td valign="top">
                            <p><span class="emphasis"><em>Matching item separator</em></span></p>
                        </td><td valign="top">
                            <p>In case several matches are available, all of them are displayed
                                unless the unique match box is selected. Define the delimiter
                                between all matches. </p>
                        </td></tr><tr><td valign="top">
                            <p><span class="emphasis"><strong>Usage</strong></span></p>
                        </td><td colspan="2" valign="top">
                            <p>This component is not startable (green background) and it requires
                                two input components and an output component.</p>
                        </td></tr></tbody></table></div></div><div class="section" title="Scenario 1: Levenshtein distance of 0 in first names"><div class="titlepage"><div><div><h3 class="title"><a name="d0e58237"></a>Scenario 1: Levenshtein distance of 0 in first names</h3></div></div></div><p>This scenario describes a four-component Job aiming at checking the edit distance
            between the <span class="emphasis"><em>First Name</em></span> column of an input file with the data of the
            reference input file. The output of this Levenshtein type check is displayed along with
            the content of the main flow on a table</p><div class="mediaobject"><img src="../images/Use_Case_tFuzzyMatch1.png"></div><div class="section" title="Setting up the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e58248"></a>Setting up the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Drag and drop the following components from the <span class="emphasis"><strong>Palette</strong></span> to the design workspace: <span class="emphasis"><strong>tFileInputDelimited</strong></span> (x2), <span class="emphasis"><strong>tFuzzyMatch</strong></span>, <span class="emphasis"><strong>tLogRow</strong></span>.</p></li><li class="step" title="Step 2"><p>Link the first <span class="emphasis"><strong>tFileInputDelimited</strong></span>
                        component to the <span class="emphasis"><strong>tFuzzyMatch</strong></span> component
                        using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> connection.</p></li><li class="step" title="Step 3"><p>Link the second <span class="emphasis"><strong>tFileInputDelimited</strong></span>
                        component to the <span class="emphasis"><strong>tFuzzyMatch</strong></span> using a
                            <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span> connection (which appears as a <span class="emphasis"><strong>Lookup</strong></span> row on the design workspace).</p></li><li class="step" title="Step 4"><p>Link the <span class="emphasis"><strong>tFuzzyMatch</strong></span> component to the
                        standard output <span class="emphasis"><strong>tLogRow</strong></span> using a <span class="emphasis"><strong>Row</strong></span> &gt; <span class="emphasis"><strong>Main</strong></span>
                        connection. </p></li></ol></div></div><div class="section" title="Configuring the components"><div class="titlepage"><div><div><h4 class="title"><a name="d0e58315"></a>Configuring the components</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Define the first <span class="emphasis"><strong>tFileInputDelimited</strong></span> in
                        its <span class="emphasis"><strong>Basic settings</strong></span> view. Browse the system
                        to the input file to be analyzed.</p></li><li class="step" title="Step 2"><p>Define the schema of the component. In this example, the input schema has
                        two columns, <span class="emphasis"><em>firstname</em></span> and <span class="emphasis"><em>gender</em></span>.</p></li><li class="step" title="Step 3"><p>Define the second <span class="emphasis"><strong>tFileInputDelimited</strong></span>
                        component the same way.</p><div class="warning" title="Warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p><span class="emphasis"><em>Make sure the reference column is set as key column in the
                                schema of the lookup flow.</em></span></p></div><div class="mediaobject"><img src="../images/Use_Case_tFuzzyMatch2.png"></div></li><li class="step" title="Step 4"><p>Double-click the <span class="emphasis"><strong>tFuzzyMatch</strong></span> component to
                        open its <span class="emphasis"><strong>Basic settings</strong></span> view, and check its
                        schema. </p><p>The <span class="emphasis"><strong>Schema</strong></span> should match the <span class="emphasis"><strong>Main</strong></span> input flow schema in order for the main flow
                        to be checked against the reference.</p><div class="mediaobject"><img src="../images/Use_Case_tFuzzyMatch4.png"></div><p>Note that two columns, <span class="emphasis"><strong>Value</strong></span> and
                            <span class="emphasis"><strong>Matching</strong></span>, are added to the output
                        schema. These are standard matching information and are read-only. </p></li><li class="step" title="Step 5"><p>Select the method to be used to check the incoming data. In this scenario,
                            <span class="emphasis"><em>Levenshtein</em></span> is the <span class="emphasis"><strong>Matching
                            type</strong></span> to be used.</p></li><li class="step" title="Step 6"><p>Then set the distance. In this method, the distance is the number of char
                        changes (insertion, deletion or substitution) that needs to be carried out
                        in order for the entry to fully match the reference. </p><div class="mediaobject"><img src="../images/Use_Case_tFuzzyMatch3.png"></div><p>In this use case, we set both the minimum distance and the maximum
                        distance to <span class="emphasis"><em>0</em></span>. This means only the exact
                        matches will be output.</p></li><li class="step" title="Step 7"><p>Also, clear the <span class="emphasis"><strong>Case sensitive</strong></span> check
                        box.</p></li><li class="step" title="Step 8"><p>Check that the matching column and look up column are correctly
                        selected.</p></li><li class="step" title="Step 9"><p>Leave the other parameters as default.</p></li></ol></div></div><div class="section" title="Executing the Job"><div class="titlepage"><div><div><h4 class="title"><a name="d0e58410"></a>Executing the Job</h4></div></div></div><div class="procedure"><ul class="procedure"><li class="step" title="Step 1"><p>Save the Job and press <span class="emphasis"><strong>F6</strong></span> to execute the
                        Job.</p><div class="mediaobject"><img src="../images/Use_Case_tFuzzyMatch5.png"></div></li></ul></div><p>As the edit distance has been set to 0 (min and max), the output shows the result
                of a regular join between the main flow and the lookup (reference) flow, hence only
                full matches with Value of 0 are displayed. </p><p>A more obvious example is with a minimum distance of 1 and a maximum distance of
                2, see <a class="xref" href="tFuzzyMatch.html#Raa70931" title="Scenario 2: Levenshtein distance of 1 or 2 in first names">the section called &#8220;Scenario 2: Levenshtein distance of 1 or 2 in first names&#8221;</a></p></div></div><div class="section" title="Scenario 2: Levenshtein distance of 1 or 2 in first names"><div class="titlepage"><div><div><h3 class="title"><a name="Raa70931"></a>Scenario 2: Levenshtein distance of 1 or 2 in first names</h3></div></div></div><p>This scenario is based on the scenario described above. Only the minimum and maximum
            distance settings in the <span class="emphasis"><strong>tFuzzyMatch</strong></span> component are
            modified, which will change the output displayed. </p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>In the <span class="emphasis"><strong>Component</strong></span> view of the <span class="emphasis"><strong>tFuzzyMatch</strong></span>, change the minimum distance from
                        <span class="emphasis"><em>0</em></span> to <span class="emphasis"><em>1</em></span>. This excludes straight away the exact matches (which would show a
                    distance of 0).</p></li><li class="step" title="Step 2"><p>Change also the maximum distance to <span class="emphasis"><em>2</em></span>. The
                    output will provide all matching entries showing a discrepancy of 2 characters
                    at most.</p><div class="mediaobject"><img src="../images/Use_Case_tFuzzyMatch6.png"></div><p>No other changes are required.</p></li><li class="step" title="Step 3"><p>Make sure the <span class="emphasis"><strong>Matching item separator</strong></span> is
                    defined, as several references might be matching the main flow entry. </p></li><li class="step" title="Step 4"><p>Save the new Job and press <span class="emphasis"><strong>F6</strong></span> to run
                    it.</p><div class="mediaobject"><img src="../images/Use_Case_tFuzzyMatch7.png"></div><p>As the edit distance has been set to <span class="emphasis"><em>2</em></span>,
                    some entries of the main flow match more than one reference entry.</p></li></ol></div><p>You can also use another method, the metaphone, to assess the distance between the
            main flow and the reference, which will be described in the next scenario.</p></div><div class="section" title="Scenario 3: Metaphonic distance in first name"><div class="titlepage"><div><div><h3 class="title"><a name="d0e58485"></a>Scenario 3: Metaphonic distance in first name</h3></div></div></div><p>This scenario is based on the scenario described above. </p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>Change the <span class="emphasis"><strong>Matching type </strong></span>to <span class="emphasis"><strong>Metaphone</strong></span>. There is no minimum nor maximum distance
                    to set as the matching method is based on the discrepancies with the phonetics
                    of the reference.</p><div class="mediaobject"><img src="../images/Use_Case_tFuzzyMatch8.png"></div></li><li class="step" title="Step 2"><p>Save the Job and press <span class="emphasis"><strong>F6</strong></span>. The phonetics
                    value is displayed along with the possible matches.</p><div class="mediaobject"><img src="../images/Use_Case_tFuzzyMatch9.png"></div></li></ol></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tAddCRCRow.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-dataquality.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tIntervalMatch.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tAddCRCRow&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-tos-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tIntervalMatch</td></tr></table></div></body></html>