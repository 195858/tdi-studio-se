<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Dynamic HTML">
    <meta name="LASTUPDATED" content="04/28/11 20:08:07">
    <title>Scénario&#160;1&#160;: Récupérer des données à partir d&#39;un protocole HTTP</title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tFileFetch_Prop.html"><img id="LongDescNotReq1" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="Components10-04.html"><img id="LongDescNotReq2" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp1562518"> </a><div style="color: #000000; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp2819177"> </a><h2 class="pHeading2">
Scénario&#160;1&#160;: Récupérer des données à partir d&#39;un protocole HTTP
</h2>
<a name="wp2818039"> </a><p class="pIndented1">
Ce scénario décrit un Job comprenant trois composants, qui retrouve des données à partir d&#39;un site internet HTTP et sélectionne des données qui seront stockées dans un fichier délimité.
</p>
<a name="wp2820905"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFileFetch1.png" id="wp1562037" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1562054"> </a><div class="pSmartList2"><li>Cliquez et déposez les composants <b class="cBold">tFileFetch</b>, <b class="cBold">tFileInputRegex</b> et <b class="cBold">tFileOutputDelimited</b> dans l&#39;espace de modélisation, puis connectez-les comme illustré sur la figure ci-dessus.</li></div>
<a name="wp1562671"> </a><div class="pSmartList2"><li>Dans l&#39;onglet <b class="cBold">Basic settings</b> du composant <b class="cBold">tFileFetch</b>, sélectionnez le protocole que vous souhaitez utiliser. Ici, utilisez le protocole HTTP. </li></div>
<a name="wp2817596"> </a><div class="pSmartList2"><li>Saisissez l&#39;URI sur lequel le fichier peut être récupéré.</li></div>
<a name="wp1562072"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Destination directory</b>, sélectionnez le répertoire dans lequel le fichier récupéré doit être stocké.</li></div>
<a name="wp1562861"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Filename</b>, saisissez le nouveau nom du fichier si vous souhaitez le renommer. Dans cet exemple, <em class="cEmphasis">filefetch.txt</em>.</li></div>
<a name="wp3609857"> </a><div class="pSmartList2"><li>Si nécessaire, cochez la case <b class="cBold">Add header </b>et définissez une ou plusieurs requêtes HTTP comme conditions de récupération. Par exemple, vous pouvez récupérer le fichier s&#39;il a été modifié depuis une date précise. <br />Dans le tableau <b class="cBold">Headers</b>, dans le champ <b class="cBold">Name</b>, saisissez&#160;<em class="cEmphasis">&quot;If-Modified-Since&quot;</em> puis saisissez&#160;<em class="cEmphasis">&quot;Sat, 29 Oct 1994 19:43:31 GMT&quot;</em> dans le champ <b class="cBold">Value</b>.<br />Pour plus d&#39;informations concernant la définition d&#39;en-têtes HTTP, consultez&#160;<em class="cEmphasis"><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14">Header Field Definitions</a></em> (en anglais).</li></div>
<a name="wp3609962"> </a><div class="pSmartList2"><li>Sélectionnez le composant <b class="cBold">tFileInputRegex</b>. Dans le champ <b class="cBold">File name</b> paramétrez le nom du fichier afin qu&#39;il corresponde au fichier récupéré précédemment.</li></div>
<a name="wp1562881"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Regex</b>, utilisez une expression régulière pour sélectionner les données adéquates du fichier récupéré. Dans cet exemple&#160;: <code class="cCode">&lt;td(?:&#160;class=&quot;leftalign&quot;)?&gt;&#160;\s* (t\w+) \s* &lt;/td&gt;</code></li></div>
<a name="wp1639368"> </a><p class="pBodyRelative">
<br />
<img src="../Images/warning_small.png" align="left" id="wp1639366" border="0" hspace="0" vspace="0"/><br />
<em class="cEmphasis">Utilisez la bonne expression régulière en fonction du langage de génération utilisé. En effet, la syntaxe est différente en Java et en Perl, ainsi que les guillemets utilisées pour introduire les expressions régulières&#160;: guillemets simples en Perl et guillemets doubles en Java.</em>
</p>
<a name="wp1639400"> </a><div class="pSmartList2"><li>Si nécessaire, définissez l&#39;en-tête dans le champ <b class="cBold">Header</b>, le pied de page dans le champ <b class="cBold">Footer</b> et le nombre de lignes à traiter dans le champ <b class="cBold">Limit</b>. Pour cet exemple, ignorez ces champs.</li></div>
<a name="wp1562130"> </a><div class="pSmartList2"><li>Définissez le schéma décrivant le flux à transmettre au composant de sortie.</li></div>
<a name="wp1562133"> </a><div class="pSmartList2"><li>Le schéma devrait être automatiquement propagé au flux de sortie, mais pour en être sûr, vérifiez le schéma dans l&#39;onglet <b class="cBold">Basic settings</b> du composant <b class="cBold">tFileOutputDelimited</b>.</li></div>
<a name="wp1562147"> </a><div class="pSmartList2"><li>Puis appuyez sur <b class="cBold">F6</b> pour exécuter le Job.</li></div>
</ul></div>
</ul></div>
<a name="wp3618411"> </a><h2 class="pHeading2">
Scénario&#160;2&#160;: Réutiliser un cookie stocké pour récupérerdes fichiers via un protocole HTTP
</h2>
<a name="wp3618418"> </a><p class="pIndented1">
Ce scénario décrit un Job comprenant deux composants, qui se connecte à un site Web HTTP donné et, à l&#39;aide d&#39;un cookie stocké dans un répertoire local spécifié, récupère les données de ce site. 
</p>
<a name="wp3618428"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFileFetch2.png" id="wp3618424" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3621420"> </a><div class="pSmartList2"><li>Déposez deux composants <b class="cBold">tFileFetch</b> de la <b class="cBold">Palette</b> dans l&#39;espace de modélisation graphique.</li></div>
<a name="wp3621428"> </a><div class="pSmartList2"><li>Reliez ces deux composants à l&#39;aide d&#39;un lien <b class="cBold">Trigger</b> &gt; <b class="cBold">OnSubjobOk</b></li></div>
<a name="wp3621436"> </a><div class="pSmartList2"><li>Double-cliquez sur le <b class="cBold">tFileFetch_1</b> afin d&#39;ouvrir sa vue <b class="cBold">Component</b> et définir ses propriétés.</li></div>
</ul></div>
</ul></div>
<a name="wp3621443"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFileFetch3.png" id="wp3621440" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3621453"> </a><div class="pSmartList2"><li>Dans la liste <b class="cBold">Procotol</b>, sélectionnez le protocole que vous souhaitez utiliser. Ici, utilisez le protocole <b class="cBold">http</b>.</li></div>
<a name="wp3618905"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">URI</b>, saisissez l&#39;URI via laquelle vous pouvez vous connecter au site Web et récupérer la page Web. Dans cet exemple, l&#39;URI est <code class="cCode">http://www.codeproject.com/script/Membership/LogOn.aspx?rp=http%3a%2f%2fwww.codeproject.com%2fKB%2fcross-platform%2fjavacsharp.aspx&amp;download=true</code>.</li></div>
<a name="wp3620422"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Destination directory</b>, parcourez votre répertoire jusqu&#39;au dossier dans lequel stocker le fichier récupéré. Ce dossier sera créé à la volée s&#39;il n&#39;existe pas. Dans cet exemple, saisissez&#160;<em class="cEmphasis">C:/Logpage</em>.</li></div>
<a name="wp3620432"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Destination Filename</b>, saisissez un nouveau nom pour le fichier si vous souhaitez le modifier. Dans cet exemple, saisissez&#160;<em class="cEmphasis">webpage.html</em>.</li></div>
<a name="wp3620443"> </a><div class="pSmartList2"><li>Sous le tableau <b class="cBold">Parameters</b>, cliquez deux fois sur le bouton <b class="cBold">[+]</b> pour ajouter deux lignes.</li></div>
<a name="wp3621803"> </a><div class="pSmartList2"><li>Dans la colonne <b class="cBold">Name</b> du tableau <b class="cBold">Parameters</b>, saisissez respectivement le nom des deux lignes,&#160;<em class="cEmphasis">Email</em> et&#160;<em class="cEmphasis">Password</em>, requises par le site Web auquel vous vous connectez.</li></div>
<a name="wp3620466"> </a><div class="pSmartList2"><li>Dans la colonne <b class="cBold">Value</b>, saisissez les informations correspondantes, respectivement votre adresse e-mail et votre mot de passe.</li></div>
<a name="wp3620560"> </a><div class="pSmartList2"><li>Cochez la case <b class="cBold">Save cookie</b> pour activer le champ <b class="cBold">Cookie directory</b>.</li></div>
<a name="wp3620589"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Cookie directory</b>, parcourez votre répertoire jusqu&#39;au dossier dans lequel vous souhaitez stocker le cookie puis saisissez un nom pour le cookie à sauvegarder. Le dossier doit déjà exister. <br />Dans cet exemple, le répertoire est&#160;<em class="cEmphasis">C:/temp/Cookie</em>.</li></div>
<a name="wp3621102"> </a><div class="pSmartList2"><li>Double-cliquez sur le <b class="cBold">tFileFetch_2</b> afin d&#39;ouvrir sa vue <b class="cBold">Component</b> et définir ses propriétés.</li></div>
</ul></div>
</ul></div>
<a name="wp3621109"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tFileFetch4.png" id="wp3621106" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3621118"> </a><div class="pSmartList2"><li>Dans la liste <b class="cBold">Procotol</b>, sélectionnez <b class="cBold">http</b>.</li></div>
<a name="wp3621121"> </a><div class="pSmartList2"><li>Dans le champ URI, saisissez l&#39;adresse à partir de laquelle récupérer les fichiers qui vous intéressent. Dans cet exemple, l&#39;adresse est&#160;<code class="cCode">http://www.codeproject.com/KB/java/RemoteShell/RemoteShell.zip</code>.</li></div>
<a name="wp3621131"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Destination directory</b>, parcourez votre répertoire jusqu&#39;au dossier dans lequel vous souhaitez stocker les fichiers récupérés. Ce dossier peut être automatiquement créé s&#39;il n&#39;existe pas durant le processus d&#39;exécution. Dans cet exemple, saisissez&#160;<em class="cEmphasis">C:/JavaProject</em>.</li></div>
<a name="wp3621141"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Destination Filename</b>, saisissez un nouveau nom pour le fichier si vous souhaitez le modifier. Dans cet exemple, saisissez&#160;<em class="cEmphasis">RemoteShell.zip</em>.</li></div>
<a name="wp3621155"> </a><div class="pSmartList2"><li>Décochez la case <b class="cBold">Post method</b> pour désactiver le tableau <b class="cBold">Parameters</b>.</li></div>
<a name="wp3621165"> </a><div class="pSmartList2"><li>Cochez la case <b class="cBold">Read cookie</b> afin d&#39;activer le champ <b class="cBold">Cookie directory</b>.</li></div>
<a name="wp3621171"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Cookie directory</b>, parcourez votre répertoire jusqu&#39;au cookie que vous avez sauvegardé et que vous souhaitez utiliser. Dans cet exemple, le répertoire est&#160;<em class="cEmphasis">C:/temp/Cookie</em>.</li></div>
<a name="wp3621182"> </a><div class="pSmartList2"><li>Sauvegardez votre Job et appuyez sur <b class="cBold">F6</b> pour l&#39;exécuter.</li></div>
<a name="wp3621188"> </a><div class="pSmartList2"><li>Vérifiez les dossiers dans lesquels vous avez stocké les fichiers récupérés.</li></div>
</ul></div>
</ul></div>
<a name="wp3621191"> </a><h2 class="pHeading2">
Scénario associé
</h2>
<a name="wp2819233"> </a><p class="pIndented1">
Pour un exemple de transfert de données en mode stream, consultez le <a href="tFileInputDelimited_Scenario.html#wp3481494"><em class="cEmphasis">Scénario&#160;2&#160;: Lire les données d&#39;un fichier distant en mode stream</em></a>.
</p>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tFileFetch_Prop.html"><img id="LongDescNotReq3" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="Components10-04.html"><img id="LongDescNotReq4" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
