<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Dynamic HTML">
    <meta name="LASTUPDATED" content="04/28/11 20:09:03">
    <title>Scénario&#160;: Mapper et transformer des données de source XML</title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tXMLMap_Prop.html"><img id="LongDescNotReq1" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="System_group_intro.html"><img id="LongDescNotReq2" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp3825113"> </a><div style="color: #000000; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp3964116"> </a><h2 class="pHeading2">
Scénario&#160;: Mapper et transformer des données de source XML
</h2>
<a name="wp3964123"> </a><p class="pIndented1">
Dans ce scénario, un Job à trois composants est exécuté pour mapper et transformer des données provenant d&#39;une source XML,&#160;<em class="cEmphasis">customer.xml</em>, et générer un flux de sortie XML pouvant être réutilisé dans différents buts, comme, par exemple, pour une requête ESB.
</p>
<a name="wp3964137"> </a><p class="pIndented1">
Ces trois composants sont&#160;:
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3964148"> </a><div class="pSmartList2"><li><b class="cBold">tFileInputXML</b>&#160;: ce composant est utilisé pour fournir des données d&#39;entrée au <b class="cBold">tXMLMap</b>.</li></div>
<a name="wp3964161"> </a><div class="pSmartList2"><li><b class="cBold">tXMLMap&#160;</b>: ce composant mappe et transforme les flux de données XML en un seul flux de données XML.</li></div>
<a name="wp3964172"> </a><div class="pSmartList2"><li><b class="cBold">tLogRow</b>&#160;: ce composant est utilisé pour afficher les données de sortie.</li></div>
</ul></div>
</ul></div>
<a name="wp3964186"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tXMLMapBasicJob.png" id="wp3965209" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp3965204"> </a><p class="pIndented1">
Afin de reproduire ce scénario, procédez comme suit&#160;:
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3964209"> </a><div class="pSmartList2"><li>De la <b class="cBold">Palette</b>, déposez un <b class="cBold">tFileInputXML</b>, un <b class="cBold">tXMLMap</b> et un <b class="cBold">tLogRow</b> dans l&#39;espace de modélisation graphique.</li></div>
<a name="wp3964223"> </a><p class="pBodyRelative">
<br />
<img src="../Images/bulb_small.png" align="left" id="wp3964220" border="0" hspace="0" vspace="0"/><br />
Un composant utilisé dans l&#39;espace de modélisation peut être renommé comme vous le souhaitez. Dans ce scénario, le composant d&#39;entrée est nommé&#160;<em class="cEmphasis">Customers</em>. Pour plus d&#39;informations concernant le renommage d&#39;un composant, consultez la section&#160;<em class="cEmphasis">Onglet View</em> dans le <b class="cBold">Guide utilisateur</b> de <b class="cBold">Talend Integration Suite Studio</b>.
</p>
<a name="wp3964258"> </a><div class="pSmartList2"><li>Double-cliquez sur le composant <b class="cBold">tFileInputXML</b> nommé&#160;<em class="cEmphasis">Customers</em> pour ouvrir son menu contextuel.</li></div>
<a name="wp3964276"> </a><div class="pSmartList2"><li>Dans ce menu, sélectionnez <b class="cBold">Row</b> &gt; <b class="cBold">Main</b> afin de relier ce composant au <b class="cBold">tXMLMap</b>.</li></div>
<a name="wp3965298"> </a><div class="pSmartList2"><li>Répétez l&#39;opération afin de connectez ensuite le <b class="cBold">tXMLMap</b> au <b class="cBold">tLogRow</b> à l&#39;aide d&#39;un lien <b class="cBold">Row</b> &gt; <b class="cBold">*New output* (Main)</b>. Une boîte de dialogue s&#39;ouvre et vous demande de nommer ce lien de sortie. Dans ce scénario, nommez-le&#160;<em class="cEmphasis">Customer_States</em>.</li></div>
</ul></div>
</ul></div>
<a name="wp3964344"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tXMLMap8.png" id="wp3964340" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3964359"> </a><div class="pSmartList2"><li>Double-cliquez sur le composant <b class="cBold">tFileInputXML</b> nommé&#160;<em class="cEmphasis">Customers</em> afin d&#39;afficher sa vue <b class="cBold">Basic settings</b>.</li></div>
</ul></div>
</ul></div>
<a name="wp3964374"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tXMLMap2.png" id="wp3964370" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3964391"> </a><div class="pSmartList2"><li>A côté du champ <b class="cBold">Edit schema</b>, cliquez sur le bouton <b class="cBold">[...]</b> afin d&#39;ouvrir l&#39;éditeur du schéma.</li></div>
</ul></div>
</ul></div>
<a name="wp3964400"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tXMLMap3.png" id="wp3964396" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3964412"> </a><div class="pSmartList2"><li>Dans l&#39;éditeur du schéma, cliquez sur le bouton <b class="cBold">[+]</b> pour ajouter une ligne.</li></div>
<a name="wp3964420"> </a><div class="pSmartList2"><li>Dans la colonne <b class="cBold">Column</b>, saisissez un nouveau nom pour cette ligne. Dans ce scénario, le nom est&#160;<em class="cEmphasis">Customer</em>.</li></div>
<a name="wp3964433"> </a><div class="pSmartList2"><li>Dans la colonne <b class="cBold">Type</b>, sélectionnez le type de données de cette ligne. Dans ce scénario, le type est&#160;<em class="cEmphasis">Document</em>. Le type de données &quot;document&quot; est essentiel pour utiliser au maximum les fonctionnalités du <b class="cBold">tXMLMap</b>. Pour plus d&#39;informations concernant ce type de données, consultez la section&#160;<em class="cEmphasis">Utiliser le type Document</em> dans le <b class="cBold">Guide utilisateur </b>de <b class="cBold">Talend Integration Suite Studio</b>.</li></div>
<a name="wp3964461"> </a><div class="pSmartList2"><li>Cliquez sur <b class="cBold">OK</b> pour valider ce changement et acceptez la propagation proposée par la fenêtre pop-up. Une ligne est ajoutée automatiquement à la table <b class="cBold">Mapping</b>.</li></div>
<a name="wp3964474"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">File name / Stream</b>, parcourez votre système jusqu&#39;au fichier XML source fournissant les données client, ou bien saisissez son chemin d&#39;accès.</li></div>
<a name="wp3964487"> </a><div class="pSmartList2"><li>Dans le champ <b class="cBold">Loop XPath query</b>, saisissez <code class="cCode">&quot;/&quot;</code> pour remplacer le paramètre par défaut. Cela signifie que les données source sont interrogées depuis la racine.</li></div>
<a name="wp3964500"> </a><div class="pSmartList2"><li>Dans la colonne <b class="cBold">XPath query</b> de la table <b class="cBold">Mapping</b>, saisissez le XPath. Dans ce scénario, saisissez <code class="cCode">&quot;.&quot;</code>, ce qui signifie que toutes les données de la source seront interrogées.</li></div>
<a name="wp3964518"> </a><div class="pSmartList2"><li>Cochez la case <b class="cBold">Get Nodes</b> dans la colonne de la table <b class="cBold">Mapping</b>.</li></div>
<a name="wp3965439"> </a><div class="pSmartList2"><li>Double-cliquez sur le composant <b class="cBold">tXMLMap</b> pour ouvrir le <b class="cBold">Map Editor</b>. <br />Notez que la zone d&#39;entrée est déjà remplie par les tables d&#39;entrée définies et que la table supérieure est la table principale d&#39;entrée (flux <b class="cBold">Main</b>).</li></div>
<a name="wp3965465"> </a><div class="pSmartList2"><li>Dans la table gauche, cliquez-droit sur <b class="cBold">Customer</b> pour ouvrir le menu contextuel. </li></div>
</ul></div>
</ul></div>
<a name="wp3965494"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tXMLMap5.png" id="wp3965491" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3965506"> </a><div class="pSmartList2"><li>Dans ce menu contextuel, sélectionnez <b class="cBold">Import From File</b> et dans la fenêtre pop-up, parcourez votre système jusqu&#39;au fichier source correspondant, afin d&#39;importer la structure XML utilisée par les données reçues par le <b class="cBold">tXMLMap</b>. Dans ce scénario, le fichier source est&#160;<em class="cEmphasis">Customer.xml</em>, qui est également connectés au<b class="cBold"> tFileInputXML</b> (<em class="cEmphasis">Customers</em>).</li></div>
<a name="wp3965578"> </a><div class="pSmartList2"><li>Dans la table du côté gauche, cliquez-droit sur le noeud&#160;<em class="cEmphasis">Customer</em> et sélectionnez&#160;<b class="cBold">As loop element</b> pour le définir comme élément de boucle.</li></div>
</ul></div>
</ul></div>
<a name="wp3965606"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tXMLMap7.png" id="wp3965603" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3964779"> </a><div class="pSmartList2"><li>Dans la partie inférieure du <b class="cBold">Map Editor</b>, cliquez sur l&#39;onglet <b class="cBold">Schema editor</b> afin d&#39;afficher la vue correspondante.</li></div>
<a name="wp3964788"> </a><div class="pSmartList2"><li>Du côté droit de cette vue, cliquez sur le bouton<b class="cBold"> [+]</b> pour ajouter une ligne à la table&#160;<em class="cEmphasis">Customer</em> et renommez cette ligne&#160;<em class="cEmphasis">Customer_States</em>.</li></div>
</ul></div>
</ul></div>
<a name="wp3964807"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tXMLMap11.png" id="wp3964803" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3964826"> </a><div class="pSmartList2"><li>Dans la colonne <b class="cBold">Type</b> de la ligne&#160;<em class="cEmphasis">Customer_States</em>, sélectionnez <b class="cBold">Document</b> comme type de données. La racine XML correspondante est ajoutée automatiquement à la table supérieure, du côté droit, qui représente le flux de sortie.</li></div>
</ul></div>
</ul></div>
<a name="wp3964837"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tXMLMap12.png" id="wp3964833" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3964848"> </a><div class="pSmartList2"><li>Du côté droit de la table supérieure nommée&#160;<em class="cEmphasis">Customer_States</em>, importez la structure XML des données que vous devez utiliser du fichier source XML correspondant. Dans ce scénario, le fichier est&#160;<em class="cEmphasis">Customer_State.xml</em>.</li></div>
</ul></div>
</ul></div>
<a name="wp3964863"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tXMLMap9.png" id="wp3964859" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3964878"> </a><div class="pSmartList2"><li>Cliquez-droit sur le noeud&#160;<em class="cEmphasis">customer</em> et sélectionnez <b class="cBold">As loop element</b> dans le menu contextuel.</li></div>
</ul></div>
</ul></div>
<a name="wp3965978"> </a><p class="pIndented1">
Vous pouvez ensuite commencer à mapper le flux d&#39;entrée vers le flux de sortie.
</p>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3965981"> </a><div class="pSmartList2"><li>Dans la table du côté de l&#39;entrée (gauche) du <b class="cBold">Map Editor</b>, cliquez sur le noeud&#160;<em class="cEmphasis">id</em> et glissez-le dans la colonne <b class="cBold">Expression</b> dans la ligne correspondant à la ligne de sortie que vous devez mapper. Dans ce scénario, le noeud est&#160;<em class="cEmphasis">@id</em>.</li></div>
</ul></div>
</ul></div>
<a name="wp3965968"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tXMLMapBasicMap.png" id="wp3965928" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp3964929"> </a><div class="pSmartList2"><li>Répétez l&#39;opération pour mapper&#160;<em class="cEmphasis">CustomerName</em> à&#160;<em class="cEmphasis">CustomerName</em>,&#160;<em class="cEmphasis">CustomerAddress</em> à&#160;<em class="cEmphasis">CustomerAddress</em> et&#160;<em class="cEmphasis">idState</em> à&#160;<em class="cEmphasis">idState</em> du côté gauche au côté droit.</li></div>
<a name="wp3964959"> </a><div class="pSmartList2"><li>Cliquez sur <b class="cBold">OK</b> pour valider le mapping et fermer le <b class="cBold">Map Editor</b>.</li></div>
<a name="wp3964970"> </a><div class="pSmartList2"><li>Appuyez sur <b class="cBold">F6</b> pour exécuter le Job.</li></div>
</ul></div>
</ul></div>
<a name="wp3967883"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="../Images/Use_Case_tXMLMapBasicExecution.png" id="wp3966033" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp771827"> </a><p class="pBodyRelative">
<b class="cBold">Talend Integration Suite Studio</b>
</p>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tXMLMap_Prop.html"><img id="LongDescNotReq3" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="System_group_intro.html"><img id="LongDescNotReq4" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
