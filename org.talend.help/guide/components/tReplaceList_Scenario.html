<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Simple HTML">
    <meta name="LASTUPDATED" content="02/05/08 13:30:49">
    <title>Scenario: Replacement from a reference file</title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a href="tReplaceList_Prop.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="tReplicate_Scenario.html"><img src="images/snext.gif" border="0" alt="Next"></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp1496906"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<a name="wp1496917"> </a><h3><font color="#666666" face="Arial, Verdana, Helvetica, sans-serif" size="3"><b>
Scenario: Replacement from a reference file
</b></font></h3>
<dl><a name="wp1499454"> </a><dd><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The following job (created in Perl) searches and replaces a list of countries with their corresponding codes. The relevant codes are taken from a reference file placed as lookup flow in the job. The main flow is replicated and both outputs are displayed on the console, in order to show the main flow before and after replacement. 
</font></dd>
</dl><a name="wp1496931"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Use_Case_tReplaceList1.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<ul>
<ul>
<a name="wp1496950"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Click &amp; drop the following components from the <b>Palette</b>: <b>tMysqlInput</b>, <b>tFileInputDelimited</b>, <b>tReplicate</b>, <b>tReplaceList</b> and <b>tLogRow</b> (x2). Note that if your input schemas are stored in the repository, you can simply drag and drop the relevant node from the repository&#39;s Metadata Manager onto the designer to retrieve automatically the input components&#39; setting. For more information, see <a href="Technical_Process-04.html#wp1005660"><i>Drag &amp; Drop components from the Metadata Manager</i></a></font></li>
<a name="wp1496968"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Connect the components using<b> Main Row</b> connections via a right-click on each component. Notice that the main row coming from the reference flow (<b>tFileInputDelimited</b>) is called a lookup row.</font></li>
<a name="wp1496978"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Select the <b>tMysqlInput</b> component and set the input flow parameters.</font></li>
</ul>
</ul>
<a name="wp1497745"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Use_Case_tReplaceList3.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<ul>
<ul>
<a name="wp1497880"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">The input schema is made of two columns: <i>Names</i>, <i>States</i>. The column States gathered the name of the United States of America which are to be replaced by their respective code. </font></li>
<a name="wp1497894"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In the <b>Query</b> field, make sure the <i>State</i> column is included in the <code>Select </code>statement. In this use case, all columns are selected.</font></li>
<a name="wp1498193"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Check the <b>tReplicate</b> component setting. The schema is simply duplicated into two identical flows, but no change to the schema can be made.</font></li>
<a name="wp1498006"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Then double-click on the <b>tFileInputDelimited</b> component,  to set the reference file.</font></li>
</ul>
</ul>
<a name="wp1498029"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Use_Case_tReplaceList4.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<ul>
<ul>
<a name="wp1498053"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">The file includes two columns: <i>Postal</i>, <i>State</i> where <i>Postal</i> provides the zipcode corresponding to the name given in the respective row of the <i>State </i>column.</font></li>
<a name="wp1498548"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">The fields are delimited by semicolons and  rows are separated by carriage returns.</font></li>
<a name="wp1498551"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Edit the lookup flow schema.</font></li>
</ul>
</ul>
<a name="wp1498381"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Use_Case_tReplaceList5.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<ul>
<ul>
<a name="wp1498426"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Make sure the lookup search column (in this use case: <i>State</i>) is a key, in order to ensure the uniqueness of the values being searched.</font></li>
<a name="wp1498840"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Select the <b>tReplaceList</b> and set the operation to carry out. </font></li>
<a name="wp1499194"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">The schema is retrieved from the previous component of the main flow.</font></li>
</ul>
</ul>
<a name="wp1499201"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Use_Case_tReplaceList2.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<ul>
<ul>
<a name="wp1499209"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In <b>Lookup search index</b> field, type in the position index of the column being searched. In this use case, <i>State</i> is the second column of the lookup input file, therefore type in <b>1</b> in this field. </font></li>
<a name="wp1499222"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In <b>Lookup replacement index</b> field, fill in the position number of the column containing the replacement values, in this example: <i>Postal</i> for the State codes.</font></li>
<a name="wp1499235"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In the <b>Column options</b> table, select the <i>States</i> column as in this use case, the State names are to be replaced with their corresponding code.</font></li>
<a name="wp1499245"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In both <b>tLogRow</b> components, check the <b>Print values in table cells</b> checkbox for a better readability of the outputs.</font></li>
<a name="wp1499251"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Save the job and run it.</font></li>
</ul>
</ul>
<a name="wp1499257"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Use_Case_tReplaceList6.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<dl><a name="wp1499406"> </a><dd><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The first flow output shows the State column with full state names as it comes from the main input flow.
</font></dd>
<a name="wp1499423"> </a><dd><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The second flow output shows the States column after the State column names have been replaced with their respective codes. 
</font></dd>
</dl>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a href="tReplaceList_Prop.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="tReplicate_Scenario.html"><img src="images/snext.gif" border="0" alt="Next"></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
