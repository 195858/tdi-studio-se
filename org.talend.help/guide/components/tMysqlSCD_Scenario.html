<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Dynamic HTML">
    <meta name="LASTUPDATED" content="10/14/08 16:13:05">
    <title>Scenario: Tracking changes using Slowly Changing Dimension </title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tMysqlSCD_Prop.html"><img id="LongDescNotReq1" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tOracleSCD_Prop.html"><img id="LongDescNotReq2" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp1550780"> </a><div style="color: #000000; font-size: 12pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp1550788"> </a><h2 class="pHeading2">
Scenario: Tracking changes using Slowly Changing Dimension 
</h2>
<a name="wp1550791"> </a><p class="pIndented1">
This scenario describes a job that tracks changes and updates of a source file and writes the history of changes in an SCD table.
</p>
<a name="wp1550795"> </a><p class="pIndented1">
The source file contains various person profiles including their name, their number of pets and their home city. An id column helps ensuring the unicity of the line. 
</p>
<a name="wp1550803"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tMysqlSCD1.png" id="wp1550800" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1550808"> </a><div class="pSmartList2"><li>Click and drop the following components from the Palette onto the design workspace: <b class="cBold">tMysqlConnection</b>, <b class="cBold">tFileInputPositional</b>, <b class="cBold">tLogRow</b>, <b class="cBold">tMysqlSCD</b>, <b class="cBold">tMysqlCommit</b>.</li></div>
<a name="wp1550839"> </a><div class="pSmartList2"><li>Connect first the <b class="cBold">tFileInputPositional</b>, <b class="cBold">tLogRow</b>, <b class="cBold">tMysqlSCD</b> using the <b class="cBold">Row Main</b> link. This is the main flow of your job.</li></div>
<a name="wp1550851"> </a><div class="pSmartList2"><li>Then connect <b class="cBold">tMysqlConnection</b> to the <b class="cBold">tFileInputPositional</b> component using a <b class="cBold">Then Run</b> link.</li></div>
<a name="wp1550866"> </a><div class="pSmartList2"><li>And connect <b class="cBold">tMysqlSCD</b> to a <b class="cBold">tMysqlCommit</b> using a <b class="cBold">OnOK </b>trigger.</li></div>
<a name="wp1550869"> </a><div class="pSmartList2"><li>First configure the connection to the SCD table where all changes will be tracked down. The <b class="cBold">tMysqlConnection</b> component should be used to avoid setting several times the same DB connection when multiple DB components are used.</li></div>
</ul></div>
</ul></div>
<a name="wp1550881"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tMysqlSCD2.png" id="wp1550878" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1550892"> </a><div class="pSmartList2"><li>If your database details are stored in the repository, select <b class="cBold">Repository</b> in the <b class="cBold">Property type</b> field</li></div>
<a name="wp1550897"> </a><div class="pSmartList2"><li>And select the relevant repository entry if several databases are stored centrally.</li></div>
<a name="wp1550905"> </a><div class="pSmartList2"><li>Then define the <b class="cBold">tFileInputPositional</b> properties:</li></div>
</ul></div>
</ul></div>
<a name="wp1550912"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tMysqlSCD3.png" id="wp1550909" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1550917"> </a><div class="pSmartList2"><li>Recall the tFileInputPositional properties from the Repository, else fill in the Built-in settings.</li></div>
<a name="wp1550923"> </a><div class="pSmartList2"><li>In this example, the schema holds four column and follows this pattern: 3,19,11,9 </li></div>
</ul></div>
</ul></div>
<a name="wp1550930"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tMysqlSCD4.png" id="wp1550927" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1550938"> </a><div class="pSmartList2"><li>Then set the <b class="cBold">tLogRow</b> in order for the content of the varying  input file to display on the console before being processed through the SCD component.</li></div>
<a name="wp1550945"> </a><div class="pSmartList2"><li>In this example, check the <b class="cBold">Print values in cells of a table</b> box so that the content displays in a table.</li></div>
<a name="wp1550954"> </a><div class="pSmartList2"><li>Then set the <b class="cBold">tMysqlSCD</b> component to track changes in the input file.</li></div>
</ul></div>
</ul></div>
<a name="wp1550961"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tMysqlSCD5.png" id="wp1550958" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1550969"> </a><div class="pSmartList2"><li>Check the <b class="cBold">Use an existing connection</b> box to reuse the details defined on the  <b class="cBold">tMysqlConnection</b> properties.</li></div>
<a name="wp1550978"> </a><div class="pSmartList2"><li>Set the table name to be used to track changes. The SCD-type table must exist.</li></div>
</ul></div>
</ul></div>
<a name="wp1550985"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tMysqlSCD8.png" id="wp1550982" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1550990"> </a><div class="pSmartList2"><li>Define the table schema. In addition to the flow schema, the SCD schema should include SCD-specific columns to hold  standard log information such as: Start date, End date, Status (Active/Disabled) and Version number. </li></div>
<a name="wp1550996"> </a><div class="pSmartList2"><li>Add these columns to the schema if it does not include them already.</li></div>
</ul></div>
</ul></div>
<a name="wp1551003"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tMysqlSCD5.png" id="wp1551000" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1551014"> </a><div class="pSmartList2"><li>On the <b class="cBold">Source keys</b> table, add at least one column using the <b class="cBold">plus</b> button and select the relevant column that ensures the unicity of the records. It can be a generated <b class="cBold">Surrogate Key</b> or  you can use several columns to create a key that will ensure the unicity of each record.</li></div>
<a name="wp1551024"> </a><div class="pSmartList2"><li>Then check the <b class="cBold">Use SCD type 1 fields</b> to set the columns, for which changes will be implemented without being tracked down.</li></div>
</ul></div>
</ul></div>
<a name="wp1551033"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tMysqlSCD6.png" id="wp1551030" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1551038"> </a><div class="pSmartList2"><li>The SCD type 1 should be used mainly for typos and small mistake corrections, which don&#39;t need to be traced, but should be reflected in the output.</li></div>
<a name="wp1551046"> </a><div class="pSmartList2"><li>Click on the <b class="cBold">Plus</b> button and select the relevant table column name.</li></div>
<a name="wp1551052"> </a><div class="pSmartList2"><li>Then check the <b class="cBold">Use SCD type 2 fields</b> box to set the columns, for which changes will be implemented and tracked down in the SCD table.  </li></div>
</ul></div>
</ul></div>
<a name="wp1551061"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tMysqlSCD7.png" id="wp1551058" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<div class="pSmartList1"><ul class="pSmartList1">
<div class="pSmartList2"><ul class="pSmartList2">
<a name="wp1551070"> </a><div class="pSmartList2"><li>Click the <b class="cBold">Plus</b> button as many times as required and select the relevant column names.</li></div>
<a name="wp1551073"> </a><div class="pSmartList2"><li>SCD Type-2 principle lies in the fact that a new record is added to the SCD table when changes are detected on the columns defined. Note that although several changes may be made to the same record on various columns defined as SCD type-2, only one additional line tracks these changes in the SCD table.</li></div>
<a name="wp1551083"> </a><div class="pSmartList2"><li>Define the columns of your table that will hold the <b class="cBold">Start date </b>and<b class="cBold"> End date</b> values. The End date is null for current records until a change is detected. Then the End date gets filled in and a new record is added with no End date.</li></div>
<a name="wp1551096"> </a><div class="pSmartList2"><li>Check the <b class="cBold">Log active status</b> box, and select the column that will hold the <b class="cBold">True</b> or <b class="cBold">False</b> status. True for the current active record and False for the changed record.</li></div>
<a name="wp1551107"> </a><div class="pSmartList2"><li>Check the <b class="cBold">Log versions</b> box and select the column that will hold the  <b class="cBold">Version number </b>value.</li></div>
<a name="wp1551113"> </a><div class="pSmartList2"><li>Check the <b class="cBold">Debug mode</b> if you wish to trace the SCD tracking steps on the console during the job execution. </li></div>
<a name="wp1551118"> </a><div class="pSmartList2"><li>Then select the tMysqlCommit component and select the relevant connection on the list.</li></div>
<a name="wp1551126"> </a><div class="pSmartList2"><li>Press <b class="cBold">F6 </b>to execute your job.</li></div>
</ul></div>
</ul></div>
<a name="wp1551133"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tMysqlSCD9.png" id="wp1551130" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp1551136"> </a><p class="pIndented1">
The Run Job tab console shows all SCD steps along with the content of the varying input file (first and last on the example only). The SCD table shows the history of changes made to the input file along with the status and version number. 
</p>
<a name="wp1551144"> </a><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">
</div>
<div align="center"><img src="images/Use_Case_tMysqlSCD10.png" id="wp1551141" border="0" hspace="0" vspace="0"/></div><div style="color: #000000; font-size: 2pt; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 0pt; margin-left: 0pt; margin-right: 0pt; margin-top: 0pt; text-align: left; text-decoration: none; text-indent: 0pt; text-transform: none">

</div>
<a name="wp1551156"> </a><p class="pIndented1">
The <b class="cBold">End date </b>is <b class="cBold">Null</b> when the record status is active (current).
</p>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a accesskey="4" href="tMysqlSCD_Prop.html"><img id="LongDescNotReq3" src="images/prev.gif" border="0" alt="Previous" /></a><a accesskey="5" href="tOracleSCD_Prop.html"><img id="LongDescNotReq4" src="images/next.gif" border="0" alt="Next" /></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
