<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Simple HTML">
    <meta name="LASTUPDATED" content="02/05/08 13:30:49">
    <title>Scenario: identifying Ip country (Perl and Java)</title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a href="tIntervalMatch_Prop.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="tIterateToFlow_Prop.html"><img src="images/snext.gif" border="0" alt="Next"></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp1523265"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<a name="wp1524185"> </a><h3><font color="#666666" face="Arial, Verdana, Helvetica, sans-serif" size="3"><b>
Scenario: identifying Ip country (Perl and Java)
</b></font></h3>
<dl><a name="wp1526222"> </a><dd><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The following scenario describes a job designed in parallel in both languages, Perl and Java. In this job, a incoming main flow provides 2 columns: <i>Documents</i> and <i>IP</i> dummy values. A second file used as lookup flow in Java and reference range file in Perl contains a list of sorted IP ranges and their corresponding country. This job aims at retrieving each document&#39;s country from their IP value, in other words, creating a Join between the main flow and the lookup flow.
</font></dd>
</dl><a name="wp1524263"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Use_Case_tIntervalMatch2.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<dl><a name="wp1524750"> </a><dd><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
In <b>Perl</b>, the Job requires one <b>tFileInputDelimited</b>, a <b>tIntervalMatch</b> and a <b>tLogRow</b>.
</font></dd>
</dl><a name="wp1524757"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Use_Case_tIntervalMatch1.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<dl><a name="wp1524773"> </a><dd><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
In <b>Java</b>, the Job requires one extra <b>tFileInputDelimited</b>, a <b>tIntervalMatch</b> and a <b>tLogRow</b>.
</font></dd>
<ul>
<a name="wp1524778"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Click and drop the components onto the design editor.</font></li>
<a name="wp1524547"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Set the basic settings of the <b>tFileInputDelimited</b> component. </font></li>
</ul>
</dl><a name="wp1524642"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Use_Case_tIntervalMatch3.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<ul>
<ul>
<a name="wp1524660"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">The schema is made of two columns, respectively <i>Document</i> and <i>IP</i></font></li>
<a name="wp1524686"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">(Java only) Set the <b>Type</b> column on <b>String</b> for the <i>Document</i> column and <b>Integer</b> for the <i>IP</i> column.</font></li>
<a name="wp1524820"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">(Java only) Set now the second <b>tFileInputDelimited</b> properties.</font></li>
</ul>
</ul>
<a name="wp1524834"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Use_Case_tIntervalMatch4.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<ul>
<ul>
<a name="wp1524858"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">(Java only) Don&#39;t forget to define the <b>Type </b>of data.</font></li>
<a name="wp1525048"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">(Both Java and Perl) Propagate the schema from the incoming main flow to the <b>tIntervalMatch</b> component.</font></li>
</ul>
</ul>
<a name="wp1524900"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Use_Case_tIntervalMatch6.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<ul>
<ul>
<a name="wp1525117"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">(Both Java and Perl) Note that the output schema from the <b>tIntervalMatch</b> component is read-only and is made of the input schema plus an extra Lookup column which will output the requested lookup data.</font></li>
<a name="wp1525185"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Set the other properties of the <b>tIntervalMatch</b> component.</font></li>
<a name="wp1525202"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">(Perl only), the lookup file is defined directly in the setting of the <b>tIntervalMatch</b>.</font></li>
</ul>
</ul>
<a name="wp1525106"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Use_Case_tIntervalMatch5.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<ul>
<ul>
<a name="wp1525151"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">(Perl only) In <b>File Name </b>field, set the path to the lookup file. Set the Row and Field separator of the lookup file.</font></li>
<a name="wp1525221"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">(Perl only) In <b>Lookup column index</b> field, set the inferior bound of the data range. This coresponds to the position of the column containing the min value of the range (0 for the first column).</font></li>
<a name="wp1525452"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">(Perl only) No need to set the lookup values to be returned as all values from the lookup will be outputted.</font></li>
<a name="wp1525323"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">(Java only) Set the tIntervalMatch other properties such as the min and max column corresponding to the range bounds.</font></li>
</ul>
</ul>
<a name="wp1525353"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Use_Case_tIntervalMatch7.png" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<ul>
<ul>
<a name="wp1525413"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">(Java only) In the <b>Column Lookup</b> field, select the column where are the values to be returned. </font></li>
<a name="wp1525416"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">(Both Java and Perl) In the <b>Search column</b> field, select the main flow column containing the values to be matched to the range values.</font></li>
<a name="wp1525484"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">(Both Java and Perl) The tLogRow component does not require any specific setting for this job.</font></li>
</ul>
</ul>
<dl><a name="wp1525507"> </a><dd><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
Both Perl and Java jobs output the same result with slight differences in the way they display. 
</font></dd>
</dl><a name="wp1525515"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></div>
<div align="center"><img src="images/Full-6-152-439.jpg" height="206" width="674" border="0" hspace="0" vspace="0"></div><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<dl><a name="wp1525539"> </a><dd><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The Perl results include the range values whereas the Java output only includes the requested return value (country).
</font></dd>
</dl>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a href="tIntervalMatch_Prop.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="tIterateToFlow_Prop.html"><img src="images/snext.gif" border="0" alt="Next"></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
