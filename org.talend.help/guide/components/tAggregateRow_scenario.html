<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN" "http://www.w3.org/MarkUp/Wilbur/HTML32.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <meta name="GENERATOR" content="Quadralay WebWorks Publisher Standard Edition 8.0.5337.0">
    <meta name="TEMPLATEBASE" content="Simple HTML">
    <meta name="LASTUPDATED" content="10/05/07 18:38:02">
    <title>Scenario: Aggregating values and sorting data</title>
  </head>

  <body link="#3366CC" vlink="#9999CC" text="#000000" alink="#0000CC" bgcolor="#FFFFFF">

    <!--table width="220" border="0" align="right" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a href="tAggregateRow_Prop.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="tAggregateSortedRow_Prop.html"><img src="images/snext.gif" border="0" alt="Next"></a>
        </td>
      </tr>
    </table-->

    <!--img src="images/wwplogo.gif" width="122" height="63" alt="Put your logo here!">
    <hr align="left"-->

    <blockquote>
<a name="wp1404260"> </a><div><font color="#000000" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></div>
<a name="wp1404267"> </a><h3><font color="#666666" face="Arial, Verdana, Helvetica, sans-serif" size="3"><b>
Scenario: Aggregating values and sorting data
</b></font></h3>
<a name="wp1354727"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
The following scenario describes a four-component job. As input component, a CSV file contains countries and notation values to be sorted by best average value. This component is connected to a <b>tAggregateRow</b> operator, in charge of the average calculation then to a <b>tSortRow</b> component for the ascending sort. The output flow goes to the new csv file. 
</font></p>
<a name="wp1354741"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
</font></p>
<div align="center"><img src="images/Use_Case_tAggregateRow1.png" border="0" hspace="0" vspace="0"></div><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">

</font></p>
<ul>
<ul>
<a name="wp1354753"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">From the <b>File</b> folder in the Palette, click and drop a <b>tFileInputCSV</b> component. </font></li>
<a name="wp1354763"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Click on the label and rename it as <i>Countries</i>. Or rename it from the <b>View</b> tab panel</font></li>
<a name="wp1354769"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In the <b>Properties</b> tab panel of this component, define the filepath and the delimitation criteria. Or select the metadata file in the repository if it exists.</font></li>
<a name="wp1354782"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Click on <b>Edit schema...</b> and set the columns: <i>Countries</i> and <i>Points</i> to match the file structure. If your file description is stored in the Metadata area of the Repository, the schema is automatically uploaded when you click on <b>Repository</b> in <b>Schema type</b> field.</font></li>
<a name="wp1354798"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Then from the <b>Processing</b> folder in the Palette, click and drop a <b>tAggregateRow</b> component. Rename it as <i>Calculation</i>.</font></li>
<a name="wp1354818"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Connect <i>Countries</i> to <i>Calculation</i> via a right-click and select <b>Row &gt; Main</b>.</font></li>
<a name="wp1354824"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Double-click on <i>Calculation</i> (tAggregateRow component) to set the properties. Click on <b>Edit schema</b> and define the output schema. You can add as many columns as you need to hold the set operations results in the output flow.</font></li>
<a name="wp1354836"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<br>
<img src="images/Use_Case_tAggregateRow3.png" border="0" hspace="0" vspace="0"><br>

</font></p>
<a name="wp1354841"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In this example, we&#39;ll calculate the average notation value and we will display the max and the min notation for each country, given that each country holds several notations. Click OK when the schema is complete.</font></li>
<a name="wp1354848"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">To carry out the various set operations, back in the <b>Properties</b> panel, define the sets holding the operations in the <b>Group By </b>area. In this example, select <b>Country</b> as group by column. Note that the output column needs to be defined a key field in the schema. The first column mentioned as output column in the Group By table is the main set of calculation. All other output sets will be secondary by order of display. </font></li>
<a name="wp1354859"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Choose the input column which the values will be taken from.</font></li>
<a name="wp1354862"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Then fill in the various operations to be carried out. The functions are average, min, max for this use case. Select the Input columns, where the values are taken from.</font></li>
<a name="wp1354871"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<br>
<img src="images/Use_Case_tAggregateRow4.png" border="0" hspace="0" vspace="0"><br>

</font></p>
<a name="wp1354879"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Click and drop a <b>tSortRow</b> component from the Palette onto the modeling workspace. For more information regarding this component <a href="tSortRow_Prop.html#wp1449441">, see&#160;<i>tSortRow properties.</i></a></font></li>
<a name="wp1354890"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Connect the <b>tAggregateRow</b> to this new component using a row main link. </font></li>
<a name="wp1354893"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">On the Properties tab of the tSortRow component, define the column the sorting is based on, the sorting type and order. </font></li>
<a name="wp1354902"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<br>
<img src="images/Use_Case_tAggregateRow5.png" border="0" hspace="0" vspace="0"><br>

</font></p>
<a name="wp1354907"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In this case, the column to be sorted by is Country, the sort type is alphabetical and the order is ascending.</font></li>
<a name="wp1354911"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Add a last component to your job, to set the output flow. Click and drop a tFileOutputDelimited and define it.</font></li>
<a name="wp1354916"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Connect the tSortRow component to this output component.</font></li>
<a name="wp1354919"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">In the Properties panel, enter the output filepath. Edit the schema if need be. In this case the delimited file is of csv type. And check the Include Header box to reuse the schema column labels in your output flow.</font></li>
<a name="wp1354925"> </a><li><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">Press F6 to execute the job. The csv file thus created contains the aggregating result. </font></li>
<a name="wp1354934"> </a><p><font color="Black" face="Arial, Verdana, Helvetica, sans-serif" size="2">
<br>
<img src="images/Use_Case_tAggregateRow6.png" border="0" hspace="0" vspace="0"><br>

</font></p>
</ul>
</ul>
    </blockquote>
    <hr>

    <!--table align="right" border="0" cellspacing="0" cellpadding="0">
      <tr>
        <td align="right"><font size="1">
          <a href="http://www.webworks.com"><img src="images/webworks.gif" width="150" height="20" border="0"></a><br>
            Quadralay Corporation<br>
            http://www.webworks.com<br>
            Voice: (512) 719-3399<br>
            Fax: (512) 719-3606<br>
          <a href="mailto:sales@webworks.com">sales@webworks.com</a><br>
        </font></td>
      </tr>
    </table-->

    <!--table width="220" border="0" cellpadding="0" cellspacing="0">
      <tr> 
        <td>
<a href="tAggregateRow_Prop.html"><img src="images/sprev.gif" border="0" alt="Previous"></a><a href="tAggregateSortedRow_Prop.html"><img src="images/snext.gif" border="0" alt="Next"></a>
        </td>
      </tr>
    </table-->
  </body>
</html>
