// ============================================================================
//
// Copyright (C) 2006-2016 Talend Inc. - www.talend.com
//
// This source code is available under agreement available at
// %InstallDIR%\features\org.talend.rcp.branding.%PRODUCTNAME%\%PRODUCTNAME%license.txt
//
// You should have received a copy of the agreement
// along with this program; if not, write to Talend SA
// 9 rue Pages 92150 Suresnes, France
//
// ============================================================================
package org.talend.designer.core.generic.utils;

import static org.hamcrest.MatcherAssert.*;
import static org.hamcrest.Matchers.*;

import org.junit.Test;
import org.talend.components.api.properties.ComponentProperties;
import org.talend.daikon.properties.presentation.Widget;
import org.talend.daikon.properties.presentation.Widget.WidgetType;


/**
 * created by hcyi on Feb 16, 2016 Detailled comment
 *
 */
public class ComponentsUtilsTest {

    @Test
    public void testGetWidgetFromPropertyName() {
        String testProperty = "{\"@id\":1,\"@type\":\"org.talend.components.salesforce.SalesforceConnectionProperties\",\"endpoint\":{\"@id\":27,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":\"https://www.salesforce.com/services/Soap/u/34.0\",\"type\":{\"name\":\"STRING\",\"ordinal\":0},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"endpoint\",\"displayName\":null,\"title\":null},\"name\":{\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":\"aaa\",\"type\":{\"name\":\"STRING\",\"ordinal\":0},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"name\",\"displayName\":null,\"title\":null},\"loginType\":{\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":\"Basic\",\"type\":{\"name\":\"ENUM\",\"ordinal\":9},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":{\"@type\":\"java.util.ArrayList\",\"@items\":[\"Basic\",\"OAuth\"]},\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"loginType\",\"displayName\":null,\"title\":null},\"bulkConnection\":{\"@id\":26,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"BOOLEAN\",\"ordinal\":1},\"size\":-1,\"occurMinTimes\":0,\"occurMaxTimes\":0,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"bulkConnection\",\"displayName\":null,\"title\":null},\"needCompression\":{\"@id\":25,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"BOOLEAN\",\"ordinal\":1},\"size\":-1,\"occurMinTimes\":0,\"occurMaxTimes\":0,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"needCompression\",\"displayName\":null,\"title\":null},\"timeout\":{\"@id\":24,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":{\"@type\":\"int\",\"value\":60000},\"type\":{\"name\":\"INT\",\"ordinal\":2},\"size\":-1,\"occurMinTimes\":0,\"occurMaxTimes\":0,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"timeout\",\"displayName\":null,\"title\":null},\"httpTraceMessage\":{\"@id\":23,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"BOOLEAN\",\"ordinal\":1},\"size\":-1,\"occurMinTimes\":0,\"occurMaxTimes\":0,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"httpTraceMessage\",\"displayName\":null,\"title\":null},\"httpChunked\":{\"@id\":22,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"BOOLEAN\",\"ordinal\":1},\"size\":-1,\"occurMinTimes\":0,\"occurMaxTimes\":0,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"httpChunked\",\"displayName\":null,\"title\":null},\"clientId\":{\"@id\":21,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"STRING\",\"ordinal\":0},\"size\":-1,\"occurMinTimes\":0,\"occurMaxTimes\":0,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"clientId\",\"displayName\":null,\"title\":null},\"testConnection\":{\"formtoShow\":null,\"name\":\"testConnection\",\"displayName\":\"Test connection\",\"title\":null},\"advanced\":{\"formtoShow\":{\"subtitle\":null,\"properties\":{\"@ref\":1},\"widgetMap\":{\"endpoint\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":1,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":27}},\"bulkConnection\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":2,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":26}},\"needCompression\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":3,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":25}},\"httpTraceMessage\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":4,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":23}},\"httpChunked\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":5,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":22}},\"clientId\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":6,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":21}},\"timeout\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":7,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":24}},\"proxy\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":8,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@id\":20,\"@type\":\"org.talend.daikon.properties.presentation.Form\",\"subtitle\":null,\"properties\":{\"@id\":6,\"@type\":\"org.talend.components.common.ProxyProperties\",\"useProxy\":{\"@id\":9,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"BOOLEAN\",\"ordinal\":1},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"useProxy\",\"displayName\":null,\"title\":null},\"host\":{\"@id\":8,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"STRING\",\"ordinal\":0},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"host\",\"displayName\":null,\"title\":null},\"port\":{\"@id\":7,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"INT\",\"ordinal\":2},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"port\",\"displayName\":null,\"title\":null},\"userPassword\":{\"@id\":4,\"userId\":{\"@id\":3,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"STRING\",\"ordinal\":0},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"userId\",\"displayName\":null,\"title\":null},\"password\":{\"@id\":2,\"flags\":{\"@type\":\"java.util.RegularEnumSet\",\"@items\":[{\"@type\":\"org.talend.daikon.properties.Property$Flags\",\"name\":\"ENCRYPT\",\"ordinal\":0},{\"@type\":\"org.talend.daikon.properties.Property$Flags\",\"name\":\"SUPPRESS_LOGGING\",\"ordinal\":1}]},\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"STRING\",\"ordinal\":0},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"password\",\"displayName\":null,\"title\":null},\"returns\":null,\"name\":\"userPassword\",\"forms\":{\"@type\":\"java.util.ArrayList\",\"@items\":[{\"@id\":5,\"@type\":\"org.talend.daikon.properties.presentation.Form\",\"subtitle\":null,\"properties\":{\"@ref\":4},\"widgetMap\":{\"userId\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":1,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":3}},\"password\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":2,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"HIDDEN_TEXT\",\"ordinal\":8},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":2}}},\"cancelable\":false,\"originalValues\":null,\"callBeforeFormPresent\":false,\"callAfterFormBack\":false,\"callAfterFormNext\":false,\"callAfterFormFinish\":false,\"allowBack\":false,\"allowForward\":false,\"allowFinish\":false,\"refreshUI\":true,\"name\":\"Main\",\"displayName\":\"Main\",\"title\":null},{\"@type\":\"org.talend.daikon.properties.presentation.Form\",\"subtitle\":null,\"properties\":{\"@ref\":4},\"widgetMap\":{\"userId\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":1,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":3}},\"password\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":2,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"HIDDEN_TEXT\",\"ordinal\":8},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":2}}},\"cancelable\":false,\"originalValues\":null,\"callBeforeFormPresent\":false,\"callAfterFormBack\":false,\"callAfterFormNext\":false,\"callAfterFormFinish\":false,\"allowBack\":false,\"allowForward\":false,\"allowFinish\":false,\"refreshUI\":true,\"name\":\"Main\",\"displayName\":\"Main\",\"title\":null}]},\"validationResult\":null},\"returns\":null,\"name\":\"proxy\",\"forms\":{\"@type\":\"java.util.ArrayList\",\"@items\":[{\"@ref\":20},{\"@type\":\"org.talend.daikon.properties.presentation.Form\",\"subtitle\":null,\"properties\":{\"@ref\":6},\"widgetMap\":{\"useProxy\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":1,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":true,\"content\":{\"@ref\":9}},\"host\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":2,\"order\":1,\"visible\":false,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":8}},\"port\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":3,\"order\":1,\"visible\":false,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":7}},\"userPassword\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":4,\"order\":1,\"visible\":false,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":5}}},\"cancelable\":false,\"originalValues\":null,\"callBeforeFormPresent\":false,\"callAfterFormBack\":false,\"callAfterFormNext\":false,\"callAfterFormFinish\":false,\"allowBack\":false,\"allowForward\":false,\"allowFinish\":false,\"refreshUI\":true,\"name\":\"Main\",\"displayName\":\"Main\",\"title\":null}]},\"validationResult\":null},\"widgetMap\":{\"useProxy\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":1,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":true,\"content\":{\"@ref\":9}},\"host\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":2,\"order\":1,\"visible\":false,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":8}},\"port\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":3,\"order\":1,\"visible\":false,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":7}},\"userPassword\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":4,\"order\":1,\"visible\":false,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":5}}},\"cancelable\":false,\"originalValues\":null,\"callBeforeFormPresent\":false,\"callAfterFormBack\":false,\"callAfterFormNext\":false,\"callAfterFormFinish\":false,\"allowBack\":false,\"allowForward\":false,\"allowFinish\":false,\"refreshUI\":true,\"name\":\"Main\",\"displayName\":\"Main\",\"title\":null}}},\"cancelable\":false,\"originalValues\":null,\"callBeforeFormPresent\":false,\"callAfterFormBack\":false,\"callAfterFormNext\":false,\"callAfterFormFinish\":false,\"allowBack\":false,\"allowForward\":false,\"allowFinish\":false,\"refreshUI\":true,\"name\":\"Advanced\",\"displayName\":\"Advanced\",\"title\":null},\"name\":\"advanced\",\"displayName\":\"Advanced...\",\"title\":null},\"oauth\":{\"@id\":14,\"clientId\":{\"@id\":19,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"STRING\",\"ordinal\":0},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"clientId\",\"displayName\":null,\"title\":null},\"clientSecret\":{\"@id\":18,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"STRING\",\"ordinal\":0},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"clientSecret\",\"displayName\":null,\"title\":null},\"callbackHost\":{\"@id\":17,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"STRING\",\"ordinal\":0},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"callbackHost\",\"displayName\":null,\"title\":null},\"callbackPort\":{\"@id\":16,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"INT\",\"ordinal\":2},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"callbackPort\",\"displayName\":null,\"title\":null},\"tokenFile\":{\"@id\":15,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"STRING\",\"ordinal\":0},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"tokenFile\",\"displayName\":null,\"title\":null},\"returns\":null,\"name\":\"oauth\",\"forms\":{\"@type\":\"java.util.ArrayList\",\"@items\":[{\"@type\":\"org.talend.daikon.properties.presentation.Form\",\"subtitle\":null,\"properties\":{\"@ref\":14},\"widgetMap\":{\"clientId\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":1,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":19}},\"clientSecret\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":1,\"order\":2,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":18}},\"callbackHost\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":2,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":17}},\"callbackPort\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":2,\"order\":2,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":16}},\"tokenFile\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":3,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":15}}},\"cancelable\":false,\"originalValues\":null,\"callBeforeFormPresent\":false,\"callAfterFormBack\":false,\"callAfterFormNext\":false,\"callAfterFormFinish\":false,\"allowBack\":false,\"allowForward\":false,\"allowFinish\":false,\"refreshUI\":true,\"name\":\"Main\",\"displayName\":\"Main\",\"title\":null},{\"@type\":\"org.talend.daikon.properties.presentation.Form\",\"subtitle\":null,\"properties\":{\"@ref\":14},\"widgetMap\":{\"clientId\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":1,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":19}},\"clientSecret\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":1,\"order\":2,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":18}},\"callbackHost\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":2,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":17}},\"callbackPort\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":2,\"order\":2,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":16}},\"tokenFile\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":3,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":15}}},\"cancelable\":false,\"originalValues\":null,\"callBeforeFormPresent\":false,\"callAfterFormBack\":false,\"callAfterFormNext\":false,\"callAfterFormFinish\":false,\"allowBack\":false,\"allowForward\":false,\"allowFinish\":false,\"refreshUI\":true,\"name\":\"Main\",\"displayName\":\"Main\",\"title\":null}]},\"validationResult\":null},\"userPassword\":{\"@id\":10,\"securityKey\":{\"@id\":13,\"flags\":{\"@type\":\"java.util.RegularEnumSet\",\"@items\":[{\"@type\":\"org.talend.daikon.properties.Property$Flags\",\"name\":\"ENCRYPT\",\"ordinal\":0},{\"@type\":\"org.talend.daikon.properties.Property$Flags\",\"name\":\"SUPPRESS_LOGGING\",\"ordinal\":1}]},\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":\"9KdDMK8J9Vp9cl2XU7PC2RDm6FD3A70PUt9XkyikOf8=\",\"type\":{\"name\":\"STRING\",\"ordinal\":0},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"securityKey\",\"displayName\":null,\"title\":null},\"userId\":{\"@id\":12,\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":\"bchen2@talend.com\",\"type\":{\"name\":\"STRING\",\"ordinal\":0},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"userId\",\"displayName\":null,\"title\":null},\"password\":{\"@id\":11,\"flags\":{\"@type\":\"java.util.RegularEnumSet\",\"@items\":[{\"@type\":\"org.talend.daikon.properties.Property$Flags\",\"name\":\"ENCRYPT\",\"ordinal\":0},{\"@type\":\"org.talend.daikon.properties.Property$Flags\",\"name\":\"SUPPRESS_LOGGING\",\"ordinal\":1}]},\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":\"mGeXLdOUodSsVfZtBH8+JA==\",\"type\":{\"name\":\"STRING\",\"ordinal\":0},\"size\":-1,\"occurMinTimes\":1,\"occurMaxTimes\":1,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"password\",\"displayName\":null,\"title\":null},\"returns\":null,\"name\":\"userPassword\",\"forms\":{\"@type\":\"java.util.ArrayList\",\"@items\":[{\"@type\":\"org.talend.daikon.properties.presentation.Form\",\"subtitle\":null,\"properties\":{\"@ref\":10},\"widgetMap\":{\"userId\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":1,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":12}},\"password\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":2,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"HIDDEN_TEXT\",\"ordinal\":8},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":11}},\"securityKey\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":0,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"HIDDEN_TEXT\",\"ordinal\":8},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":13}}},\"cancelable\":false,\"originalValues\":null,\"callBeforeFormPresent\":false,\"callAfterFormBack\":false,\"callAfterFormNext\":false,\"callAfterFormFinish\":false,\"allowBack\":false,\"allowForward\":false,\"allowFinish\":false,\"refreshUI\":true,\"name\":\"Main\",\"displayName\":\"Main\",\"title\":null},{\"@type\":\"org.talend.daikon.properties.presentation.Form\",\"subtitle\":null,\"properties\":{\"@ref\":10},\"widgetMap\":{\"userId\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":1,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"DEFAULT\",\"ordinal\":0},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":12}},\"password\":{\"@type\":\"org.talend.daikon.properties.presentation.Widget\",\"row\":2,\"order\":1,\"visible\":true,\"widgetType\":{\"name\":\"HIDDEN_TEXT\",\"ordinal\":8},\"longRunning\":false,\"deemphasize\":false,\"callBeforeActivate\":false,\"callBeforePresent\":false,\"callValidate\":false,\"callAfter\":false,\"content\":{\"@ref\":11}}},\"cancelable\":false,\"originalValues\":null,\"callBeforeFormPresent\":false,\"callAfterFormBack\":false,\"callAfterFormNext\":false,\"callAfterFormFinish\":false,\"allowBack\":false,\"allowForward\":false,\"allowFinish\":false,\"refreshUI\":true,\"name\":\"Main\",\"displayName\":\"Main\",\"title\":null}]},\"validationResult\":null},\"proxy\":{\"@ref\":6},\"referencedComponent\":{\"referenceType\":{\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"ENUM\",\"ordinal\":9},\"size\":-1,\"occurMinTimes\":0,\"occurMaxTimes\":0,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":\"org.talend.components.api.properties.ComponentReferenceProperties$ReferenceType\",\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"referenceType\",\"displayName\":null,\"title\":null},\"componentType\":{\"flags\":{\"@type\":\"java.util.RegularEnumSet\",\"@items\":[{\"@type\":\"org.talend.daikon.properties.Property$Flags\",\"name\":\"DESIGN_TIME_ONLY\",\"ordinal\":2}]},\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":\"tSalesforceConnection\",\"type\":{\"name\":\"STRING\",\"ordinal\":0},\"size\":-1,\"occurMinTimes\":0,\"occurMaxTimes\":0,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"componentType\",\"displayName\":null,\"title\":null},\"componentInstanceId\":{\"flags\":null,\"taggedValues\":{\"@type\":\"java.util.HashMap\"},\"storedValue\":null,\"type\":{\"name\":\"STRING\",\"ordinal\":0},\"size\":-1,\"occurMinTimes\":0,\"occurMaxTimes\":0,\"precision\":0,\"pattern\":null,\"defaultValue\":null,\"nullable\":false,\"enumClass\":null,\"possibleValues\":null,\"children\":{\"@type\":\"java.util.ArrayList\"},\"name\":\"componentInstanceId\",\"displayName\":null,\"title\":null},\"componentProperties\":null,\"enclosingProperties\":{\"@ref\":1},\"returns\":null,\"name\":\"referencedComponent\",\"forms\":{\"@type\":\"java.util.ArrayList\"},\"validationResult\":null},\"returns\":null,\"org.talend.daikon.properties.Properties.name\":\"connection\",\"forms\":{\"@type\":\"java.util.ArrayList\"},\"validationResult\":null}";
        ComponentProperties properties = ComponentProperties.fromSerialized(testProperty, ComponentProperties.class).properties;
        
        Widget widget = ComponentsUtils.getWidgetFromPropertyName(properties, "userPassword.password");
        assertThat(widget.getContent().getName(), is("password"));
        assertThat(widget.getWidgetType(), is(WidgetType.HIDDEN_TEXT));
    }
    
}
