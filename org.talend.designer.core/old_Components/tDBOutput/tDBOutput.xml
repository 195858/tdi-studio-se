<COMPONENT>
   <HEADER NAME="tDBOutput" ID="" DISPLAY_NAME="Database Selection" PLATEFORM="ALL" SERIAL="" VERSION="0.101" STATUS="ALPHA" ICON="tDBOutput32.ico" COMPATIBILITY="ALL" AUTHOR="talend" RELEASE_DATE="20050320A" FAMILY="Database">
      <SIGNATURE></SIGNATURE>
   </HEADER>
   <DISPLAY>
      <POSITION LEFT="100" TOP="100" WIDTH="49" HEIGHT="49"/>
      <LABEL FORMAT="label : __NAME__" VALUE="" SHOW="true" DEFAULT=""/>
      <HINT FORMAT="hint : __NAME__" VALUE="" SHOW="false" DEFAULT=""/>
   </DISPLAY>
   <DOCUMENTATION>
      <URL/>
   </DOCUMENTATION>
   <CODE LANGUAGE="Perl" LOCALISATION="INTERNAL" URI=".">
      <VALUE/>
      
      <CALL><![CDATA[
my ($e_current_row) = (@_);
UpdateStat('__NAME__', 1);      
my $mResult = &tDBOutputRow(
  \%__NAME___DD,
  $e_current_row,
  __TABLEACTION__,
  __ROWACTION__,
  __TABLE__,
  __COLUMNS__,
  [__WHILECODE__],
  __QUERY__);
]]></CALL>
      <CALLREF UNIT="dbs.pm"><![CDATA[
__NAME___DD = (
 type     => 'output',      
 dbi      => '__DBI__',
 database => __DATABASE__,
 host     => __HOST__,
 username => __USERNAME__,
 password => __PASSWORD__,
 table    => __TABLE__,
 clear_before_insert => __TABLEACTION__);
]]></CALLREF>
 
 <CALLSTART><![CDATA[
  my $mResult = &OpenOutputDBs({db1 => \%__NAME___DD});
  ]]></CALLSTART>
 <CALLSTOP><![CDATA[
  my $mResult = &CloseOutputDB(\%__NAME___DD);
  UpdateStat('__NAME__', 0, 2);
 ]]></CALLSTOP>
 
   </CODE>
   <CONNECTORS>
      <CONNECTOR DIRECTION="IN" CTYPE="START" DISPLAY_NAME="Start">
         <OTYPES>
            <OTYPE>TFileDesc</OTYPE>
         </OTYPES>
      </CONNECTOR>
      <CONNECTOR DIRECTION="OUT" CTYPE="BEFORE" DISPLAY_NAME="Before">
         <OTYPES>
            <OTYPE>TFileDesc</OTYPE>
            <OTYPE>THashRow (FirstRow)</OTYPE>
         </OTYPES>
         <CONNECTIONS>
            <TO COMPONENT_ID="AA" CTYPE="AA" OTYPE="AA"/>
            <TO COMPONENT_ID="AA" CTYPE="AA" OTYPE="AA"/>
            <FROM COMPONENT_ID="AA" CTYPE="AA" OTYPE="AA"/>
            <FROM COMPONENT_ID="AA" CTYPE="AA" OTYPE="AA"/>
         </CONNECTIONS>
      </CONNECTOR>
      <CONNECTOR DIRECTION="OUT" CTYPE="AFTER" DISPLAY_NAME="After">
         <OTYPES>
            <OTYPE>TFileDesc</OTYPE>
            <OTYPE>THashRow (LastRow + RowNumber)</OTYPE>
         </OTYPES>
      </CONNECTOR>
      <CONNECTOR DIRECTION="OUT" CTYPE="OK" DISPLAY_NAME="Ok">
         <OTYPES>
            <OTYPE>TFileDesc</OTYPE>
            <OTYPE>THashRow (LastRow + RowNumber)</OTYPE>
            <OTYPE>TErrorNumber</OTYPE>
            <OTYPE>TErrorMessage</OTYPE>
         </OTYPES>
      </CONNECTOR>
      <CONNECTOR DIRECTION="OUT" CTYPE="ERROR" DISPLAY_NAME="Error">
         <OTYPES>
            <OTYPE>TFileDesc</OTYPE>
            <OTYPE>THashRow (LastRow + RowNumber)</OTYPE>
            <OTYPE>TErrorNumber</OTYPE>
            <OTYPE>TErrorMessage</OTYPE>
         </OTYPES>
      </CONNECTOR>
   </CONNECTORS>
   <PARAMETERS>
      <PARAMETER NAME="DBI" DISPLAY_NAME="Database Driver" TYPE="STRING" FIELD="CLOSED_LIST" SHOW="YES" REQUIRED="No" DEFAULT="MySql">
         <VALUE>MySql</VALUE>
         <ITEMS>
            <ITEM VALUE="MySql" IID="DBI:mysql"/>
            <ITEM VALUE="Oracle" IID="DBI:oracle"/>
            <ITEM VALUE="SQLServer" IID="DBI:sqlserver"/>
         </ITEMS>
      </PARAMETER>
      <PARAMETER NAME="DATABASE" DISPLAY_NAME="Database" TYPE="STRING" FIELD="TEXT" SHOW="YES" REQUIRED="No" DEFAULT="'test'" READONLY="FALSE">
         <VALUE/>
      </PARAMETER>
      <PARAMETER NAME="HOST" DISPLAY_NAME="Host" TYPE="STRING" FIELD="TEXT" SHOW="YES" REQUIRED="No" DEFAULT="'localhost'" READONLY="FALSE">
         <VALUE>''</VALUE>
      </PARAMETER>
      <PARAMETER NAME="USERNAME" DISPLAY_NAME="Username" TYPE="STRING" FIELD="TEXT" SHOW="YES" REQUIRED="No" DEFAULT="'root'" READONLY="FALSE">
         <VALUE>''</VALUE>
      </PARAMETER>
      <PARAMETER NAME="PASSWORD" DISPLAY_NAME="Password" TYPE="STRING" FIELD="TEXT" SHOW="YES" REQUIRED="No" DEFAULT="'lapins'" READONLY="FALSE">
         <VALUE>''</VALUE>
      </PARAMETER>
      <PARAMETER NAME="TABLE" DISPLAY_NAME="Table" TYPE="STRING" FIELD="TEXT" SHOW="YES" REQUIRED="No" DEFAULT="'foo_dest'" READONLY="FALSE">
         <VALUE>''</VALUE>
      </PARAMETER>

      <PARAMETER NAME="TABLEACTION" DISPLAY_NAME="DB Action" TYPE="INTEGER" FIELD="CLOSED_LIST" SHOW="YES" REQUIRED="No" DEFAULT="Clear table (1)" READONLY="FALSE">
         <ITEMS>
            <ITEM VALUE="No action (0)" IID="0"/>
            <ITEM VALUE="Clear table (1)" IID="1"/>
            <ITEM VALUE="Drop &amp; create table (2)" IID="2"/>       
         </ITEMS>
         <VALUE/>
      </PARAMETER>


      <PARAMETER NAME="ROWACTION" DISPLAY_NAME="Row Action" TYPE="INTEGER" FIELD="CLOSED_LIST" SHOW="YES" REQUIRED="No" DEFAULT="Insert rows (1)" READONLY="FALSE">
         <ITEMS>
            <ITEM VALUE="Insert rows (1)" IID="1"/>
            <ITEM VALUE="Replace existing rows only (2)" IID="2"/>
            <ITEM VALUE="Insert new or update existing rows (3)" IID="3"/>       
            <ITEM VALUE="User-defined SQL (4)" IID="4"/>     
            <ITEM VALUE="Call stored procedure (5)" IID="5"/>     
         </ITEMS>
         <VALUE/>
      </PARAMETER>

      <PARAMETER NAME="COLUMNS" DISPLAY_NAME="Columns" TYPE="STRING" FIELD="TEXT" SHOW="YES" REQUIRED="No" DEFAULT="[]" READONLY="FALSE">
         <VALUE>''</VALUE>
      </PARAMETER>
      <PARAMETER NAME="WHILECODE" DISPLAY_NAME="While Call" TYPE="STRING" FIELD="TEXT" SHOW="YES" REQUIRED="No" DEFAULT="\&amp;tNothing" READONLY="TRUE">
         <VALUE>''</VALUE>
      </PARAMETER>

      <PARAMETER NAME="QUERY" DISPLAY_NAME="Query" TYPE="STRING" FIELD="MEMOSQL" SHOW="YES" REQUIRED="No" DEFAULT="''" READONLY="FALSE">
         <VALUE>''</VALUE>
      </PARAMETER>
          <PARAMETER NAME="SCHEMATYPE" DISPLAY_NAME="Schema Type" TYPE="STRING" FIELD="CLOSED_LIST" SHOW="YES" REQUIRED="No" DEFAULT="Built-in">
         <VALUE/>
         <ITEMS>
            <ITEM VALUE="Built-in" IID="BuiltIn"/>
            <ITEM VALUE="Repository" IID="Repository"/>
            <ITEM VALUE="File" IID="File"/>
            <ITEM VALUE="Database" IID="Database"/>            
         </ITEMS>
      </PARAMETER>      
            

   
      <PARAMETER NAME="SCHEMA" DISPLAY_NAME="Schema" TYPE="STRING" FIELD="SCHEMA_EDITOR" SHOW="YES" REQUIRED="YES" DEFAULT="" READONLY="TRUE">
<VALUE>  _columns => ['id', 'name', 'addr1', 'state', 'id2', 'RegTime'],
  _keys    => ['id'],              
  id       => { type => 'integer',  null=>'no',  len => '',   key=> 'yes'},
  name     => { type => 'varchar2', null=>'yes', len => '10', key=> 'no'},
  addr1    => { type => 'varchar2', null=>'yes', len => '10', key=> 'no'},
  state    => { type => 'varchar2', null=>'yes', len => '40', key=> 'no'},
  id2      => { type => 'varchar2', null=>'yes', len => '10', key=> 'no'},
  RegTime  => { type => 'datetime', null=>'yes', len => '',   key=> 'no'}</VALUE>
<STORAGE>
id;True;Int24;;False;;|
name;False;String;10;True;;|
addr1;False;String;10;True;;|
state;False;String;40;True;;|
id2;False;String;10;True;;|
RegTime;False;DateTime;;True;;
</STORAGE>  
</PARAMETER>
   </PARAMETERS>
   <RETURNS>
   
      <RETURN NAME="FILENAME" DISPLAY_NAME="Current Row" TYPE="STRING" AVAILABILITY="In Row" CODE="$gv{tFileInput}{Row}"/>
      <RETURN NAME="FILECOUNT" DISPLAY_NAME="Number of row" TYPE="STRING" AVAILABILITY="After" CODE="$gv{tFileInput}{Count}"/>
      <RETURN NAME="ERROR_CODE" DISPLAY_NAME="Error Code" TYPE="INTEGER" AVAILABILITY="After" CODE="$gv{tFileInput}{Error}{Code}"/>
      <RETURN NAME="ERROR_MESSAGE" DISPLAY_NAME="Error Message" TYPE="STRING" AVAILABILITY="After" CODE="$gv{tFileInput}{Error}{Message}"/>
   </RETURNS>
</COMPONENT>